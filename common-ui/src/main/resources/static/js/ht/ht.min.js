var noAlert = true;
var htl = '{\n\
"corp": "亿阳信通股份有限公司",\n\
"project": "综合资源管理系统",\n\
"start": "2014-10-27",\n\
"hashCode": "1f11db2f53e31a7de7c1e0c7c7c302a52e467079964d8bf690f916d249a20f346e103573ed5b416b57bde97fc1179aa513ab6173e9a3ab23295e572cc1d7c6a5802e6223dccd3c17a1baefb90eecc189e8c32f899b9c9274495fd92d86b3f39144b8f8f903b472762a98140ca4ffd7a896fdf288910b85eb546bd6bbf8554e86",\n\
"t1": "32532451194112",\n\
"t2": "1414454398844",\n\
"signature": "1a62da7a6ab6c76b599c08e34fed3ec0f870645741ce991a88054a5e9f278245e99ef5780576c2ba8c2b4d488e3481fae4a607023e4797befabc4cf8ce7510d84bd75cc097ac87a7a82d40c3e6705b13af016f323482c5c58c5e8f89afa2aa66b29aa3d5e8885c8c58e95bfa93e819ff5559dd98fc34b4fe169174746363c6c9"\n\
}';!function(y,x,K){"use strict";var Z="ht";if(!y[Z]){!function(){for(var P=0,x=["ms","moz","webkit","o"],X=0;X<x.length&&!y.requestAnimationFrame;++X)y.requestAnimationFrame=y[x[X]+"RequestAnimationFrame"],y.cancelAnimationFrame=y[x[X]+"CancelAnimationFrame"]||y[x[X]+"CancelRequestAnimationFrame"];y.requestAnimationFrame||(y.requestAnimationFrame=function(D){var G=(new Date).getTime(),O=Math.max(0,16-(G-P)),B=y.setTimeout(function(){D(G+O)},O);return P=G+O,B}),y.cancelAnimationFrame||(y.cancelAnimationFrame=function(q){F(q)})}();var R,E,u,N,C=y.document,$=null,X=y[Z]={},J=y[Z+"config"],O=X.Default=J&&J.Default||{},n=X.Style=J&&J.Style||{},w=X.Color=J&&J.Color||{},Q=X.IsGetter=J&&J.IsGetter||{},T=Math,B=T.round,r=T.floor,j=T.ceil,q=T.sqrt,V=T.max,a=T.min,m=T.abs,h=T.cos,Y=T.acos,d=T.sin,c=T.pow,k=T.asin,L=T.PI,i=2*L,l=L/2,e=T.tan,t=T.atan2,v=T.random,H=!1,s=!1,P=y.parseInt||global.parseInt,z="2015-12-15",o=function(e){return e*e},W=y.setTimeout,F=y.clearTimeout,b=y.location,M=y.navigator?y.navigator.userAgent.toLowerCase():"",g=function(C){return C.test(M)},A=g(/msie/)||g(/trident/),f=g(/msie 10/),U=g(/firefox/),S=g(/mac/),_=O.isTouchable===K?C?"ontouchend"in C:!1:O.isTouchable,I="default",D="single",p="multiple",G="front",cn="back",Zd="left",Aj="right",tn="top",sb="bottom",kl="center",lq="eye",Vd="middle",Nb="east",yq="west",$d="north",Oc="none",$p="px",tr="absolute",Pm="border",lk="triangle",km="rect",mi="circle",Jq="cylinder",nr="shape",dm="items",Vn="normal",tm="remove",Hh="clear",Sn="width",Bi="height",qc="ingroup",Bn="check",Kf="uncheck",oe="radio",On="radioOn",Cj="radioOff",Uc="points",Xd="values",nm="series",Lc="body",Cq="label",jn="label2",Xf="note",Sd="note2",Li="icons",dl="labelFont",vh="labelColor",Wd="labelSelectColor",As="note.expanded",Cc="note2.expanded",si="edge.expanded",ch="edge.points",ad="edge.type",of="rotation",ko="getRotation",uc="setRotation",jo="hidden",Oh="visible",Rd="tuv",Hg="no",cg="select",xd="currentSubGraph",Rq="selectBackground",Pn="autoMakeVisible",is="autoHideScrollBar",jk="scrollBarColor",vr="scrollBarSize",rf="indent",hl="rowHeight",Fo="columnLineColor",Fj="rowLineColor",Bl="columnLineVisible",Im="rowLineVisible",eb="visibleFunc",Vj="expandIcon",wb="collapseIcon",ep="checkMode",zf="sortFunc",Go="editable",ub="batchEditable",Bm="tristate",di="asc",Tp="desc",Ec="position",Wr="elevation",fm="children",Yb="translateX",Dj="translateY",ro="dataModel",gp="shape3d",Xl="shape3d.resolution",Hm="shape3d.visible",Zg="shape3d.from.visible",Ip="shape3d.to.visible",Oq="shape3d.top.visible",ml="shape3d.bottom.visible",_l="repeat.uv.length",yn="serializeValue",le="deserializeValue",dn="centerUniform",wl="rgba(255,255,255,0)",Ab="style",Hq="attr",Yl="field",ss="string",bh="boolean",Fg="color",Yi="int",jc="number",Kn="ew-resize",pm="ns-resize",Ar="pointer",fg="auto",Nq="mousedown",Mq="mousemove",hi="mouseup",Pd="mouseout",rr="touchstart",Fc="touchmove",Fe="touchend",Lk="keydown",cl="keyup",Rb=U?"DOMMouseScroll":"mousewheel",xf=_?[rr,Fc,Fe]:[Lk,cl,Nq,Mq,hi,Pd,Rb,"contextmenu"],Xq=$,we=$,Xk=$,ll=hi.length,oo=function(){Xk&&(F(Xk.timeout),Xk=$)},so=function(){Xk&&Nl(Xk.e,Xk.info)};y.addEventListener&&(_||(y.addEventListener(Pd,function(){oo()},!1),y.addEventListener(Rb,function(){br()},!1)),y.addEventListener(cl,function(A){91===A.keyCode?cj={}:delete cj[A.keyCode]},!0),y.addEventListener(Lk,function(R){cj[R.keyCode]=!0},!0));var df,zj,Kq,Jk=!1,kd=$,uq=$,Kr={},ei={},Zr={},Kj={},Cs={},cj={},pj={},om={},Um={},po=[],pc={},Am=$,Lr=$,ec=function(){},qe=function(){throw"Oops!"},Rj=[0,0,0],uj=[0,0,0,0],Ch={x:0,y:0,width:0,height:0},yo=$,Ir=$,bn=$,Vc=function(T){Ir&&!T._72O&&(bn||(bn={}),bn[T._72O=sk()]=T),df!=$?Ii()<.05&&N&&!zj&&(vo=oo):vo=pi},lm=function(J,A,w,n){Ir||(Ir={});var U=Ir[J];if(U){if(U.url===A)return;U.image.onload=ec,U.image.onerror=ec}var M=new Image;Ir[J]={image:M,url:A},M.onload=function(){w&&(M.width=w),n&&(M.height=n),O.handleImageLoaded(J,M),ck(J,M)},M.onerror=function(){ck(J,O.handleUnfoundImage(J,A)||$)},M.src=A},ck=function(g,O){if(ei[g]=O,delete Ir[g],mb(Ir)&&(Ir=$,bn)){for(var G in bn){var z=bn[G];z.invalidateAll&&z.invalidateAll(),z.redraw&&z.redraw(),z.iv(),delete z._72O}bn=$}if(O&&bn)for(var G in bn){var z=bn[G];z.invalidateAll&&z.invalidateAll(),z.redraw&&z.redraw(),z.iv()}},Do=function(){return y.performance&&y.performance.now?y.performance.now():Date.now()},Vb=function(Y,x){x?F(Y):y.cancelAnimationFrame(Y)},Bf=function(i,I,h){return{width:i,height:I,comps:_f(h)?h:[h]}},Gb=function(Z,Y){return{type:mi,rect:[Z,Y,1.6,1.6],borderWidth:1,borderColor:Jg,gradient:nh,gradientColor:zh,background:Jg}},Zi=function(E,u){return Bf(16,16,{type:lk,rect:[4,4,10,8],background:E,rotation:u?1.57:3.14})},Ep=function(h,t){return Bf(16,16,{type:lk,rect:[4,4,8,7],background:h,rotation:t?3.14:0})},dd=function(V){var m=V._orientation;return"horizontal"===m||"h"===m},bb=function(M){X.z=E=M},Zp=function(i){var C=2,z=0;for(var V in i)V.length===C&&P(V,32)===rk&&(Am=Lr=i[V]),z++;return z},tq=function(o,W,A){return A?{x:o-A,y:W-A,width:2*A+1,height:2*A+1}:_?{x:o-5,y:W-5,width:11,height:11}:{x:o-1,y:W-1,width:3,height:3}},bl=function(V){return(/ble$/.test(V)||/ed$/.test(V)||Q[V]?"is":"get")+V.charAt(0).toUpperCase()+V.slice(1)},Qg=function(i){return"set"+i.charAt(0).toUpperCase()+i.slice(1)},yf=function(H){return typeof H===ss||H instanceof String},hf=function(T){return typeof T===jc},pi=function(w){return typeof w===bh},ys=function(o){return o&&"object"==typeof o},hc=function(N){return"function"==typeof N},_f=function(z){return z instanceof Array},ie=function(L){return L instanceof fr},Fm=function(s){return _f(s)?new fr(s):s},ag=function(y){return y instanceof kf},hq=function(f){return f instanceof en},ts=function($){return $ instanceof rn},zp=function(U){return U&&"IFRAME"===U.tagName},_m=function(h){return h==$?h:parseFloat(h.toFixed(2))},Jc=function(U,E,C){var N,M=E.length;if(C)for(var T=0;C>T;T++)if(3===M)U.push(E[0]),U.push(E[1]),U.push(E[2]);else for(N=0;M>N;N++)U.push(E[N]);else if(3===M)U.push(E[0]),U.push(E[1]),U.push(E[2]);else for(N=0;M>N;N++)U.push(E[N])},mh=function(K){return K?ys(K)?K:{}:!1},$l=function(v,t,e){var Y,Z=ys(v)?v:v.prototype;for(Y in t)e&&Z[Y]!==K||(Z[Y]=t[Y]);return v},jj=function($){return String.fromCharCode($)},zq=function(S){for(var n,C=0,w="";C<S.length;C++)n=S[S.length-1-C],"%"===n?n="'":"a"===n?n='"':"]"===n&&(n="\\"),w+=jj(n.charCodeAt(0)-1);return w},Cb=function(c,G,N){c.superClass.constructor.apply(G,N)},mb=function(v){for(var L in v)return!1;return!0},Ke=function(H){return H?0===H.length:!0},wf=function(x,U){return x.x===U.x&&x.y===U.y&&x.width===U.width&&x.height===U.height},Ig=function(c,U,Z){return U>c?U:c>Z?Z:c},Ii=function(){var E=1e4*d(ll++);return E-r(E)},wk=function(a,R,d){return Xj(a.x,a.y,R.x,R.y,d.x,d.y,d.x+d.width,d.y,!0)||Xj(a.x,a.y,R.x,R.y,d.x+d.width,d.y,d.x+d.width,d.y+d.height,!0)||Xj(a.x,a.y,R.x,R.y,d.x+d.width,d.y+d.height,d.x,d.y+d.height,!0)||Xj(a.x,a.y,R.x,R.y,d.x,d.y+d.height,d.x,d.y,!0)},Xj=function(e,Y,X,T,i,v,W,w,U){var m=(W-i)*(Y-v)-(w-v)*(e-i),c=(w-v)*(X-e)-(W-i)*(T-Y);if(0!==c){var I=m/c,J=e+I*(X-e),y=Y+I*(T-Y);return U&&(J+Cn<a(e,X)||J-Cn>V(e,X)||J+Cn<a(i,W)||J-Cn>V(i,W)||y+Cn<a(Y,T)||y-Cn>V(Y,T)||y+Cn<a(v,w)||y-Cn>V(v,w))?$:[J,y]}return $},Th=function(w,V,T){if(w&&T)if(V){if(V===Ab)return w.getStyle(T);if(V===Hq)return w.getAttr(T);if(V===Yl)return w[T]}else if(T=bl(T),w[T])return w[T]();return K},Bh=function(m,N,F,p){if(m&&F)if(N){if(N===Ab)m.s(F,p);else if(N===Hq)m.a(F,p);else if(N===Yl){var J=m[F];m[F]=p,m.fp("f:"+F,J,p)}}else F=Qg(F),m[F]&&m[F](p)},Lp=function(o,R,q,e,I){R&&Sm(o,q,e,1,I,R)},Vg=function(v,C,E,O){var V=1-v;return V*V*C+2*v*V*E+v*v*O},gh=function(h,c,M,l,j){var d=1-h;return d*d*d*c+3*d*d*h*M+3*d*h*h*l+h*h*h*j},Fq=function(G){var B,J,I,x,U=0;return G.forEach(function(o){if(B=o.length,B>0)for(J=o[0],x=1;B>x;x++)I=o[x],U+=Ym(J,I),J=I}),U},md=function(b,Z,F){var H="__"+b,v=function(D){F["handle_"+b](D)};F[H]||(F[H]=v,Z.addEventListener(b,v,!1))},es=function(U,W,F){var x="__"+U,z=F[x];z&&(W.removeEventListener(U,z,!1),delete F[x])},Co=function(r,Z){var J="_"+Z;r[bl(Z)]=function(){return this[J]},r[Qg(Z)]=function(V){var x=this[J];this[J]=V,this.fp(Z,x,V)}},Wg=function(c){return x.create(c)},Eh=function(W){if(!W.element){var w,y;(w=W.textField)?y=fi(fs.TextField,w):(w=W.textArea)?y=fi(fs.TextArea,w):(w=W.button)?y=fi(fs.Button,w):(w=W.comboBox)?y=fi(fs.ComboBox,w):(w=W.checkBox)?y=fi(fs.CheckBox,w):(w=W.radioButton)?y=fi(fs.RadioButton,w):(w=W.slider)?y=fi(fs.Slider,w):(w=W.colorPicker)?y=fi(fs.ColorPicker,w):(w=W.image)&&(y=fi(fs.Image,w)),y&&(W.element=y)}},eo=function(D){var h=C.createElement("div"),V=h.style;return h.tabIndex=-1,h.onkeydown=In,V.msTouchAction=Oc,V.cursor=I,ue(h,$,0),_&&V.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",$),D&&(V.overflow=jo),h},El=function(j){var m=C.createElement("canvas"),l=m.style;return l.msTouchAction=Oc,l.pointerEvents=Oc,ue(m,$,0),j&&Si(j,m),m},ue=function(B,i,L){var b=B.style;b.border=i?i+" solid 1px":0,b.outline=0,b.padding=L?"0 "+L+$p:0,Jf(B)},Jf=function(h){var F=h.style;F.position=tr,F.margin=0,F.setProperty("box-sizing","border-box",$),F.setProperty("-moz-box-sizing","border-box",$)},Kp=function(v,d,T,Y){Y||(Y=zd),d!=$&&(v.width=d*Y,v.style.width=d+$p),T!=$&&(v.height=T*Y,v.style.height=T+$p)},Si=function(i,V,N){i.appendChild(V),N&&(V.style.position=tr)},_o=function(J,a){a.split||(a+="");for(var $,D=a.split("\n"),h=0,m=D.length,K=0;m>K;K++){var g=Ul(J.font,D[K]);g.width>h&&(h=g.width),$||($=g.height)}return J.ss=D,{width:h,height:$*m}},dg=function(h,X,c,q,R,x){var k=X.length;if(1===k)vn(h,X[0],c,q,R);else for(var y=c.height/k,b={x:c.x,y:c.y,width:c.width,height:y},E=0;E<X.length;E++)x?Fl(h,X[E],q,R,b.x,b.y,b.width,b.height,x):vn(h,X[E],b,q,R),b.y+=y},vn=function(Q,l,c,X,f){Q.font=X?X:Cp,Q.fillStyle=f?f:jh,Q.textAlign=kl,Q.textBaseline=Vd;var U,n;c?c.width===K?(U=c.x,n=c.y):(U=c.x+c.width/2,n=c.y+c.height/2):(U=0,n=0),Q.fillText(l,B(U),B(n))},Tc=function(c){c.getView&&(c=c.getView());var p=c.offsetWidth||c.scrollWidth;return!p&&c.style.width&&(p=P(c.style.width)),p},Rm=function(a){a.getView&&(a=a.getView());var i=a.offsetHeight||a.scrollHeight;return!i&&a.style.height&&(i=P(a.style.height)),i},ce=function(){var Y=function(Z){In(Z),Z.stopPropagation()},I=_?[rr]:[Lk,Nq,Rb];return function(G){var L=eo(),Z=L.style;return Z.backgroundColor=O.disabledBackground,G&&(Z.backgroundImage="url("+G+")",Z.backgroundPosition="50% 50%",Z.backgroundRepeat="no-repeat no-repeat"),I.forEach(function(x){L.addEventListener(x,Y)}),L}}(),dk=function(q){var x=q.getContext("2d");return x.save(),x.lineCap=pl,x.lineJoin=_b,x},vo=function(y,p,n,G){Jh(y,p*zd,n*zd),G*=zd,1!==G&&y.scale(G,G)},Jh=function(R,V,A){R.translate(V,A)},Nk=function(K,N){K.rotate(N)},$r=function(J){if(C.activeElement!==J)if(_)J.focus();else{var q=Gj(),H=q.target;J.focus(),H.scrollLeft=q.left,H.scrollTop=q.top}},sj=function(y){return y&&y.getView?y.getView():y},Vq=function(z,t,s,P,N){2===arguments.length&&(s=t.y,P=t.width,N=t.height,t=t.x);var M=sj(z),r=M.style;(C.fullscreenElement||C.mozFullScreenElement||C.webkitFullscreenElement||C.msFullscreenElement)!==M&&(t!==K&&(r.left=t+$p),s!==K&&(r.top=s+$p),P!==K&&(r.width=P+$p),N!==K&&(r.height=N+$p)),z.endEditing&&!_&&z.endEditing(),z.redraw&&z.redraw(),z.invalidate&&z.invalidate(),z.onLayouted&&z.onLayouted(t,s,P,N),z._41O&&z._41O("layout")},hb=function(x){var A=x.touches[0];return A?A:x.changedTouches[0]},zn=function(S){O.popup&&O.popup.close(),O.popup=S},Xp=$,ym=function(Q){Xp.handleWindowTouchMove(Q)},Yr=function(U){Xp.handleWindowTouchEnd(U),y.removeEventListener(Fc,ym,!1),y.removeEventListener(Fe,Yr,!1),Xp=$},op=function(K){Xp.handleWindowMouseMove(K)},od=function(b){Xp.handleWindowMouseUp(b),y.removeEventListener(Mq,op,!1),y.removeEventListener(hi,od,!1),Xp=$},qk=function(T){return 1===Di(T)},Ud=function($,_){return _?_.keyCode===$:cj[$]},Uf=function(V){return Ak(V)&&Ud(65,V)},Te=function(N){return Ud(46,N)||Ud(8,N)},Dg=function(K){return function(N){return N?N.keyCode===K:cj[K]}},rk=573,Ik=[65,83,68,87,37,38,39,40,32,13,27],We=Dg(Ik[0]),ee=Dg(Ik[1]),De=Dg(Ik[2]),jp=Dg(Ik[3]),Rr=Dg(Ik[4]),Hj=Dg(Ik[5]),un=Dg(Ik[6]),Ag=Dg(Ik[7]),mr=Dg(Ik[8]),eq=Dg(Ik[9]),Zm=Dg(Ik[10]),ql={65:1,83:1,68:1,87:1,37:1,38:1,39:1,40:1},or=[2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,5,5,5,5,5,1049],sf=$,vf=$,sl=function(u,E){sf||(sf=El()),Kp(sf,u,E,1);var J=dk(sf);return J.clearRect(0,0,u,E),J},bq=function(){var m,T={};return function(c){var G,o=T[c];return o||(m||(m=El(),Kp(m,1,1,1)),G=m.getContext("2d"),G.clearRect(0,0,1,1),Sm(G,0,0,1,1,c),o=G.getImageData(0,0,1,1).data,o=T[c]=[o[0],o[1],o[2],o[3]]),o}}(),ti=function(J){if(!yf(J))return J;var K=bq(J);return K.CA||(K.CA=[K[0]/255,K[1]/255,K[2]/255,K[3]/255]),K.CA},Yd=function(G,f,n,Q){var v=El();v.width=n,v.height=Q;var i=v.getContext("2d");i.drawImage(G,0,0,n,Q);try{for(var K=i.getImageData(0,0,n,Q),l=K.data,t=0,D=l.length;D>t;t+=4){var I=l[t+0],X=l[t+1],P=l[t+2];l[t+0]=f[0]*I,l[t+1]=f[1]*X,l[t+2]=f[2]*P}i.putImageData(K,0,0)}catch(A){return G}return v},zm=function(O,k,j){return k&&(k="miter"===j?8*k+20:k+1,O&&$n(O,k)),k},Xh=function(b,Z){if(Z){var d=new yp(Z),k=b.width/2,A=b.height/2,c=vc([d.tf(-k,-A),d.tf(k,-A),d.tf(k,A),d.tf(-k,A)]);return c.x+=b.x+k,c.y+=b.y+A,c}return b},$g=function(n,Q,u,Y,v,O,R,x){Y*=Math.PI/180;var o={x:Math.cos(Y)*(n.x-R.x)/2+Math.sin(Y)*(n.y-R.y)/2,y:-Math.sin(Y)*(n.x-R.x)/2+Math.cos(Y)*(n.y-R.y)/2},q=Math.pow(o.x,2)/Math.pow(Q,2)+Math.pow(o.y,2)/Math.pow(u,2);q>1&&(Q*=Math.sqrt(q),u*=Math.sqrt(q));var m=(v==O?-1:1)*Math.sqrt((Math.pow(Q,2)*Math.pow(u,2)-Math.pow(Q,2)*Math.pow(o.y,2)-Math.pow(u,2)*Math.pow(o.x,2))/(Math.pow(Q,2)*Math.pow(o.y,2)+Math.pow(u,2)*Math.pow(o.x,2)));isNaN(m)&&(m=0);var k={x:m*Q*o.y/u,y:m*-u*o.x/Q},W={x:(n.x+R.x)/2+Math.cos(Y)*k.x-Math.sin(Y)*k.y,y:(n.y+R.y)/2+Math.sin(Y)*k.x+Math.cos(Y)*k.y},Z=function(O){return Math.sqrt(Math.pow(O[0],2)+Math.pow(O[1],2))},e=function(t,g){return(t[0]*g[0]+t[1]*g[1])/(Z(t)*Z(g))},l=function(X,a){return(X[0]*a[1]<X[1]*a[0]?-1:1)*Math.acos(e(X,a))},T=l([1,0],[(o.x-k.x)/Q,(o.y-k.y)/u]),U=[(o.x-k.x)/Q,(o.y-k.y)/u],N=[(-o.x-k.x)/Q,(-o.y-k.y)/u],K=l(U,N);e(U,N)<=-1&&(K=Math.PI),e(U,N)>=1&&(K=0);var e=Q>u?Q:u,C=Q>u?1:Q/u,d=Q>u?u/Q:1;if(null==x){var t={x:0,y:0,width:0,height:0};$n(t,e),t.x*=C,t.width*=C,t.y*=d,t.height*=d;var D=new yp(Y);return t=vc([D.tf(t.x,t.y),D.tf(t.x+t.width,t.y),D.tf(t.x+t.width,t.y+t.height),D.tf(t.x,t.y+t.height)]),t.x+=W.x,t.y+=W.y,[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}]}x.translate(W.x,W.y),x.rotate(Y),x.scale(C,d),x.arc(0,0,e,T,T+K,1-O),x.scale(1/C,1/d),x.rotate(-Y),x.translate(-W.x,-W.y)},Po=function(y,T){y&&y.beginPath();for(var P,m,d,g=[],t=function(B){for(var l,U=/(\-{0,1}[\d\.]+)/gi,O=[];l=U.exec(B);)O.push(parseFloat(l[0]));return O},O=/([MmLlHhVvCcSsQqTtAa]{1}[\d\.,\s\-Zz]*)/gi,u={x:0,y:0};P=O.exec(T);){var r=P[0],c=r.substr(0,1);if("M"===c||"m"===c){for(var i=t(r),A=0;A<i.length;A+=2){var x=i[A],B=i[A+1];"m"===c&&(x+=u.x,B+=u.y),y&&y.moveTo(x,B),g.push({x:x,y:B}),u.x=x,u.y=B}m=d=null}else if("H"===c||"h"===c){for(var i=t(r),A=0;A<i.length;A+=1){var x=i[A];"h"===c&&(x+=u.x),y&&y.lineTo(x,u.y),g.push({x:x,y:u.y}),u.x=x}m=d=null}else if("C"===c||"c"===c){for(var i=t(r),A=0;A<i.length;A+=6){var q=i[A],Z=i[A+1],Y=i[A+2],S=i[A+3],x=i[A+4],B=i[A+5];"c"===c&&(q+=u.x,Z+=u.y,Y+=u.x,S+=u.y,x+=u.x,B+=u.y),y&&y.bezierCurveTo(q,Z,Y,S,x,B),g.push({x:q,y:Z}),g.push({x:Y,y:S}),g.push({x:x,y:B}),u.x=x,u.y=B}m=[q,Z,Y,S,x,B],d=null}else if("S"===c||"s"===c){for(var i=t(r),A=0;A<i.length;A+=4){var q,Z;m?(q=2*m[4]-m[2],Z=2*m[5]-m[3]):(q=u.x,Z=u.y);var Y=i[A],S=i[A+1],x=i[A+2],B=i[A+3];"s"===c&&(Y+=u.x,S+=u.y,x+=u.x,B+=u.y),y&&y.bezierCurveTo(q,Z,Y,S,x,B),g.push({x:q,y:Z}),g.push({x:Y,y:S}),g.push({x:x,y:B}),u.x=x,u.y=B}m=[q,Z,Y,S,x,B],d=null}else if("Q"===c||"q"===c){for(var i=t(r),A=0;A<i.length;A+=4){var q=i[A],Z=i[A+1],x=i[A+2],B=i[A+3];"q"===c&&(q+=u.x,Z+=u.y,x+=u.x,B+=u.y),y&&y.quadraticCurveTo(q,Z,x,B),g.push({x:q,y:Z}),g.push({x:x,y:B}),u.x=x,u.y=B}m=null,d=[q,Z,x,B]}else if("T"===c||"t"===c){for(var i=t(r),A=0;A<i.length;A+=2){var q,Z;d?(q=2*d[2]-d[0],Z=2*d[3]-d[1]):(q=u.x,Z=u.y);var x=i[A],B=i[A+1];"t"===c&&(x+=u.x,B+=u.y),y&&y.quadraticCurveTo(q,Z,x,B),g.push({x:q,y:Z}),g.push({x:x,y:B}),u.x=x,u.y=B}m=null,d=[q,Z,x,B]}else if("V"===c||"v"===c){for(var i=t(r),A=0;A<i.length;A+=1){var B=i[A];"v"===c&&(B+=u.y),y&&y.lineTo(u.x,B),g.push({x:u.x,y:B}),u.y=B}m=d=null}else if("L"===c||"l"===c){for(var i=t(r),A=0;A<i.length;A+=2){var x=i[A],B=i[A+1];"l"===c&&(x+=u.x,B+=u.y),y&&y.lineTo(x,B),g.push({x:x,y:B}),u.x=x,u.y=B}m=d=null}else if("A"===c||"a"===c){for(var i=t(r),A=0;A<i.length;A+=7){var a=i[A],D=i[A+1],N=i[A+2],o=i[A+3],I=i[A+4],x=i[A+5],B=i[A+6];"a"===c&&(x+=u.x,B+=u.y);var C=$g(u,a,D,N,o,I,{x:x,y:B},y);C&&(g=g.concat(C)),u.x=x,u.y=B}m=d=null}var $=r.substr(r.length-1);("z"===$||"Z"===$)&&y&&y.closePath()}return g},cp=function(H,P,$,A){var s=!1;if(H.beginPath?H.beginPath():s=!0,ie(P)&&(P=P._as),ie($)&&($=$._as),$&&$.length){for(var f,m,z,Q,X=0,W=0,q=$.length;q>W;W++)f=$[W],1===f?(m=P[X++],H.moveTo(m.x,s?-m.y:m.y)):2===f?(m=P[X++],H.lineTo(m.x,s?-m.y:m.y)):3===f?(m=P[X++],z=P[X++],H.quadraticCurveTo(m.x,s?-m.y:m.y,z.x,s?-z.y:z.y)):4===f?(m=P[X++],z=P[X++],Q=P[X++],H.bezierCurveTo(m.x,s?-m.y:m.y,z.x,s?-z.y:z.y,Q.x,s?-Q.y:Q.y)):5===f&&H.closePath();A&&5!==f&&H.closePath()}else{var G,o,b,h=P.length;if(h>0){for(G=P[0],H.moveTo(G.x,s?-G.y:G.y),o=1;h>o;o++)b=P[o],H.lineTo(b.x,s?-b.y:b.y);A&&H.closePath()}}},Ui=function(m,f,I,k){if(ie(m)&&(m=m._as),ie(f)&&(f=f._as),f&&f.length){I=I||Sp;for(var L,O,h,G,P,N,Y=[],j=$,Z=0,z=0,y=f.length;y>z;z++)if(L=f[z],1===L)Y.push(j=[]),j.push(m[Z++]);else if(2===L)j.push(m[Z++]);else if(3===L)for(O=j[j.length-1],h=m[Z++],G=m[Z++],N=1;I>=N;N++)j.push({x:Vg(N/I,O.x,h.x,G.x),y:Vg(N/I,O.y,h.y,G.y)});else if(4===L)for(O=j[j.length-1],h=m[Z++],G=m[Z++],P=m[Z++],N=1;I>=N;N++)j.push({x:gh(N/I,O.x,h.x,G.x,P.x),y:gh(N/I,O.y,h.y,G.y,P.y)});else 5===L&&j.push(j[0]);return k&&5!==L&&j&&j.length>2&&j.push(j[0]),Y}return k&&m.length>2&&(m=m.slice(),m.push(m[0])),m?[m]:[]},mg=function(X,k,Q,Y,C,K){var M,d,N,u=bq(k),g=Y,$=u[0],Z=u[1],h=u[2];if(Q){var v=bq(Q);M=v[0]-$,d=v[1]-Z,N=v[2]-h}else M=255-$,d=255-Z,N=255-h;for(K||(K=Y>10?1:.5,K=1>C?a(K/C,2):K);(Y-=K)>0;){var L=1-Y/g,f=$+M*L,x=Z+d*L,I=h+N*L;f=a(j(f),255),x=a(j(x),255),I=a(j(I),255),X.strokeStyle="rgb("+f+","+x+","+I+")",X.lineWidth=Y,X.stroke()}},Jo=function(){var v={};return function(Y,c){var Z=Y+"-"+c,K=v[Z];if(K)return K;var C,G,m,q=bq(Y);return 0>c?(c=(100+c)/100,C=j(q[0]*c),G=j(q[1]*c),m=j(q[2]*c)):(c/=100,C=q[0],G=q[1],m=q[2],C+=(255-C)*c,G+=(255-G)*c,m+=(255-m)*c,C=a(j(C),255),G=a(j(G),255),m=a(j(m),255)),v[Z]="rgb("+C+","+G+","+m+")"}}(),Sm=function(o,P,X,M,Q,E){E&&(o.fillStyle=E),o.beginPath(),o.rect(P,X,M,Q),o.fill()},Vo=function(e,v,K,R,U,H,E){e.beginPath(),qh[v](e,K.x,K.y,K.width,K.height,R,U,H,E)},Mg=function(a,c,q,I,H){var r=qh[q];a.fillStyle=r?r(a,c,I?I:zh,H.x,H.y,H.width,H.height):c},yd=function(h,l){h.fillStyle=h.createPattern(l,"repeat")},Xn=function(O,V,B,z,D,P,Z,o){var a,E,i,F,w,v,c,q,M,G,n;if(m(D)>2*L&&(D=2*L),w=j(m(D)/(L/4)),a=D/w,E=-a,i=-z,w>0){v=V+h(z)*P,c=B+d(-z)*Z,o?O.lineTo(v,c):O.moveTo(v,c);for(var Q=0;w>Q;Q++)i+=E,F=i-E/2,q=V+h(i)*P,M=B+d(i)*Z,G=V+h(F)*(P/h(E/2)),n=B+d(F)*(Z/h(E/2)),O.quadraticCurveTo(G,n,q,M)}},Gi=function(_,W,R,I,x,m,q,h,$){6===arguments.length&&(q=m,h=m,$=m);var g=W+I,y=R+x,e=x>I?2*I:2*x;m=e>m?m:e,q=e>q?q:e,h=e>h?h:e,$=e>$?$:e;var N=.29*$,V=.58*$;_.moveTo(g,y-$),_.quadraticCurveTo(g,y-V,g-N,y-N),_.quadraticCurveTo(g-V,y,g-$,y),N=.29*h,V=.58*h,_.lineTo(W+h,y),_.quadraticCurveTo(W+V,y,W+N,y-N),_.quadraticCurveTo(W,y-V,W,y-h),N=.29*m,V=.58*m,_.lineTo(W,R+m),_.quadraticCurveTo(W,R+V,W+N,R+N),_.quadraticCurveTo(W+V,R,W+m,R),N=.29*q,V=.58*q,_.lineTo(g-q,R),_.quadraticCurveTo(g-V,R,g-N,R+N),_.quadraticCurveTo(g,R+V,g,R+q),_.lineTo(g,y-$)},ng=function(P,R,F,m,M,z,Q){R&&(F=B(F),m=B(m),Q||(Q=1),P.fillStyle=R,P.beginPath(),P.rect(F,m,Q,z),P.rect(F,m,M,Q),P.rect(F,m+z-Q,M,Q),P.rect(F+M-Q,m,Q,z),P.fill())},Ai=function(d,r,L,i){var Z=i.x,V=i.y,$=i.width,K=i.height;if(!(!r||!L||0>=$||0>=K)){var p,j=Qc(r),F=wn(r),Y=L>0;1===L||-1===L?(d.fillStyle=Y?j:F,d.beginPath(),d.rect(Z,V,1,K),d.rect(Z,V,$,1),d.fill(),d.fillStyle=Y?F:j,d.beginPath(),d.rect(Z,V+K-1,$,1),d.rect(Z+$-1,V,1,K),d.fill()):(L=a(m(L),a($/2,K/2)),p=d.createLinearGradient(Z,V,Z+L,V),p.addColorStop(0,Y?j:F),p.addColorStop(1,r),d.fillStyle=p,d.beginPath(),d.moveTo(Z,V),d.lineTo(Z+L,V+L),d.lineTo(Z+L,V+K-L),d.lineTo(Z,V+K),d.lineTo(Z,V),d.fill(),p=d.createLinearGradient(Z,V,Z,V+L),p.addColorStop(0,Y?j:F),p.addColorStop(1,r),d.fillStyle=p,d.beginPath(),d.moveTo(Z,V),d.lineTo(Z+L,V+L),d.lineTo(Z+$-L,V+L),d.lineTo(Z+$,V),d.lineTo(Z,V),d.fill(),p=d.createLinearGradient(Z,V+K,Z,V+K-L),p.addColorStop(0,Y?F:j),p.addColorStop(1,r),d.fillStyle=p,d.beginPath(),d.moveTo(Z,V+K),d.lineTo(Z+L,V+K-L),d.lineTo(Z+$-L,V+K-L),d.lineTo(Z+$,V+K),d.lineTo(Z,V+K),d.fill(),p=d.createLinearGradient(Z+$,V,Z+$-L,V),p.addColorStop(0,Y?F:j),p.addColorStop(1,r),d.fillStyle=p,d.beginPath(),d.moveTo(Z+$,V),d.lineTo(Z+$-L,V+L),d.lineTo(Z+$-L,V+K-L),d.lineTo(Z+$,V+K),d.lineTo(Z+$,V),d.fill())}},qs=function(b,$,s,t,B,I,T){var V=b.createLinearGradient(t,B,I,T);return V.addColorStop(0,s),V.addColorStop(1,$),V},Tr=function(m,x,R,s,g,t,h){var c=m.createLinearGradient(s,g,t,h);return c.addColorStop(0,x),c.addColorStop(.5,R),c.addColorStop(1,x),c},Ug=function(Z,m,A,q,e,v,J){var Y=Z.createLinearGradient(q,e,v,J);return Y.addColorStop(0,m),Y.addColorStop(1/3,A),Y.addColorStop(2/3,m),Y.addColorStop(1,A),Y},Mr=function(Z,v,P,g,$,F,O,j,r){var R=Z.createRadialGradient(g+F*j,$+O*r,a(F,O)/24,g+F/2,$+O/2,V(F,O)/2);return R.addColorStop(0,P),R.addColorStop(1,v),R},qh={polygon:function(x,E,q,b,X,V){(V==$||3>V)&&(V=6);for(var e,o,g=a(b,X)/2,B=E+b/2,K=q+X/2,P=0,Z=2*L/V,F=0;V>F;F++)e=B+h(P)*g,o=K+d(P)*g,0===F?x.moveTo(e,o):x.lineTo(e,o),P+=Z;x.closePath()},arc:function(N,k,E,J,y,d,S,p,I){d==$&&(d=L),S==$&&(S=i),p==$&&(p=!0);var l=k+J/2,r=E+y/2;p&&N.moveTo(l,r),I?(d=-d,S=-S,Xn(N,l,r,d,S-d,J/2,y/2,!0)):N.arc(l,r,a(J,y)/2,d,S),p&&N.closePath()},rect:function(g,P,H,Y,K){g.rect(P,H,Y,K)},circle:function(F,g,k,U,C){F.arc(g+U/2,k+C/2,a(U,C)/2,0,i,!0)},oval:function(h,a,y,M,d){Xn(h,a+M/2,y+d/2,0,i,M/2,d/2,!1)},roundRect:function(q,o,Y,Q,p,Z){Z==$&&(Z=a(a(Q,p)/4,8)),Gi(q,o,Y,Q,p,Z)},star:function(o,r,a,_,J){var H=2*_,F=2*J,x=r+_/2,P=a+J/2;o.moveTo(x-H/4,P-F/12),o.lineTo(r+.306*_,a+.579*J),o.lineTo(x-H/6,P+F/4),o.lineTo(r+_/2,a+.733*J),o.lineTo(x+H/6,P+F/4),o.lineTo(r+.693*_,a+.579*J),o.lineTo(x+H/4,P-F/12),o.lineTo(r+.611*_,a+.332*J),o.lineTo(x+0,P-F/4),o.lineTo(r+.388*_,a+.332*J),o.closePath()},triangle:function(o,U,n,J,f){o.moveTo(U+J/2,n),o.lineTo(U+J,n+f),o.lineTo(U,n+f),o.closePath()},hexagon:function(s,J,b,a,x){s.moveTo(J,b+x/2),s.lineTo(J+a/4,b+x),s.lineTo(J+3*a/4,+b+x),s.lineTo(J+a,b+x/2),s.lineTo(J+3*a/4,b),s.lineTo(J+a/4,b),s.closePath()},pentagon:function(X,d,A,k,c){var q=2*k,o=2*c,L=d+k/2,_=A+c/2;X.moveTo(L-q/4,_-o/12),X.lineTo(L-q/6,_+o/4),X.lineTo(L+q/6,_+o/4),X.lineTo(L+q/4,_-o/12),X.lineTo(L+0,_-o/4),X.closePath()},diamond:function(Q,u,P,o,r){Q.moveTo(u+o/2,P),Q.lineTo(u,P+r/2),Q.lineTo(u+o/2,P+r),Q.lineTo(u+o,P+r/2),Q.closePath()},rightTriangle:function(t,M,m,b,Y){t.moveTo(M,m),t.lineTo(M+b,m+Y),t.lineTo(M,m+Y),t.closePath()},parallelogram:function(q,m,x,U,o){var y=U/4;q.moveTo(m+y,x),q.lineTo(m+U,x),q.lineTo(m+U-y,x+o),q.lineTo(m,x+o),q.closePath()},trapezoid:function(I,d,m,A,B){var t=A/4;I.moveTo(d+t,m),I.lineTo(d+A-t,m),I.lineTo(d+A,m+B),I.lineTo(d,m+B),I.closePath()},"linear.southwest":function(j,i,I,R,Z,P,g){return qs(j,i,I,R,Z+g,R+P,Z)},"linear.southeast":function(B,H,f,P,G,I,D){return qs(B,H,f,P+I,G+D,P,G)},"linear.northwest":function(x,z,$,j,A,y,E){return qs(x,z,$,j,A,j+y,A+E)},"linear.northeast":function(g,C,M,n,d,V,h){return qs(g,C,M,n+V,d,n,d+h)},"linear.north":function(H,$,q,C,S,_,z){return qs(H,$,q,C,S,C,S+z)},"linear.south":function(_,c,I,j,R,H,q){return qs(_,c,I,j,R+q,j,R)},"linear.west":function(k,l,S,J,a,R){return qs(k,l,S,J,a,J+R,a)},"linear.east":function(Q,A,K,q,i,g){return qs(Q,A,K,q+g,i,q,i)},"radial.center":function(V,p,O,i,f,J,r){return Mr(V,p,O,i,f,J,r,.5,.5)},"radial.southwest":function(D,c,b,N,R,i,p){return Mr(D,c,b,N,R,i,p,.25,.75)},"radial.southeast":function(I,L,m,$,h,H,P){return Mr(I,L,m,$,h,H,P,.75,.75)},"radial.northwest":function(t,_,D,H,V,E,b){return Mr(t,_,D,H,V,E,b,.25,.25)},"radial.northeast":function(y,f,N,X,K,M,i){return Mr(y,f,N,X,K,M,i,.75,.25)},"radial.north":function(I,V,g,A,i,J,f){return Mr(I,V,g,A,i,J,f,.5,.25)},"radial.south":function(j,L,P,X,J,B,$){return Mr(j,L,P,X,J,B,$,.5,.75)},"radial.west":function(C,G,B,T,J,n,N){return Mr(C,G,B,T,J,n,N,.25,.5)},"radial.east":function(l,S,p,P,n,k,H){return Mr(l,S,p,P,n,k,H,.75,.5)},"spread.horizontal":function(D,A,y,p,C,n){return Tr(D,A,y,p,C,p+n,C)},"spread.vertical":function(U,K,p,G,n,V,k){return Tr(U,K,p,G,n,G,n+k)},"spread.diagonal":function(l,Y,r,p,L,o,K){return Tr(l,Y,r,p+o,L,p,L+K)},"spread.antidiagonal":function(y,T,u,P,h,n,W){return Tr(y,T,u,P,h,P+n,h+W)},"spread.north":function(C,D,h,V,m,f,Q){return Ug(C,D,h,V,m-Q/4,V,m+Q+Q/4)},"spread.south":function(z,e,b,J,K,P,O){return Ug(z,b,e,J,K-O/4,J,K+O+O/4)},"spread.west":function(o,a,G,M,Y,A){return Ug(o,a,G,M-A/4,Y,M+A+A/4,Y)},"spread.east":function(N,C,_,t,f,A){return Ug(N,_,C,t-A/4,f,t+A+A/4,f)}},yp=function(T,x,w){var q=this;q.s=d(T),q.c=h(T),q.cx=x||0,q.cy=w||0};yp.prototype.tf=function(W,x){1===arguments.length&&(x=W.y,W=W.x);var V=this;return{x:V.c*W-V.s*x+V.cx,y:V.s*W+V.c*x+V.cy}};var yj=function(M,u,k){return new yp(M).tf(u,k)},db=function(w){var O=w.touches[0],m=w.touches[1],K=O.clientX,C=O.clientY,Q=m.clientX,Z=m.clientY;return q((K-Q)*(K-Q)+(C-Z)*(C-Z))},ol=(function(){for(var z=0,t=Tp.split(""),w=0;w<t.length;w++)z=10*P(t[w])+z;return bb(y[rk.toString(8*w)+Cq.substr(w)]),z}(),function(N,Q,b){for(var E=0;E<b.size();E++){var r=b.get(E);N.co(r)&&Q.add(r)}for(E=0;E<b.size();E++)r=b.get(E),ol(N,Q,r._children)}),Ae=function(s,e,H){for(var z=0;z<H.size();z++){var K=H.get(H.size()-1-z);s.co(K)&&e.add(K)}for(z=0;z<H.size();z++)K=H.get(z),Ae(s,e,K._children)},pg=function(A,s,l){for(var x=!1,U=0;U<l.size();U++){var G=l.get(U);A.co(G)?x&&s.add(G):x=1}for(U=0;U<l.size();U++)G=l.get(U),pg(A,s,G._children)},_k=function(h,B,u){for(var U=!1,V=0;V<u.size();V++){var O=u.get(u.size()-1-V);h.co(O)?U&&B.add(O):U=!0}for(V=0;V<u.size();V++)O=u.get(V),_k(h,B,O._children)},tj=function(H,C,K,W){var R=W==$;if(0!==C||0!==K||!R&&0!==W){var T,Z,b,d,X=new fr;H.each(function(z){if(ag(z)){var c=!0;if(b)for(T=0;T<b.size();T++)Z=b.get(T),Z.isHostOn(z)?(b.removeAt(T),T--,X.remove(Z)):c&&(z.isHostOn(Z)||z.isLoopedHostOn(Z))&&(c=!1);if(d)for(T=0;T<d.size();T++)Z=d.get(T),lp(Z,z)?(d.removeAt(T),T--,X.remove(Z)):c&&lp(z,Z)&&(c=!1);c&&(X.add(z),(z._host||z._69O)&&(b||(b=new fr),b.add(z)),(ts(z)||ts(z._parent))&&(d||(d=new fr),d.add(z)))}else if(hq(z)&&z.s(ad)===Uc){var y=z.s(ch);y&&!y.isEmpty()&&(y.each(function(M){R?(M.x+=C,M.y+=K):(M.x+=C,M.y+=W,M.e==$?M.e=K:M.e+=K)}),z.fp(ch,!1,!0))}}),X.each(function(k){R?k.translate(C,K):k.translate3d(C,K,W)})}},Ri={1:29,2:30,3:31,4:32,5:33,6:26,7:27,8:28,9:21,10:22,11:23,12:24,13:25,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:9,22:10,23:11,24:12,25:13,26:6,27:7,28:8,29:1,30:2,31:3,32:4,33:5,34:36,35:37,36:34,37:35,38:54,39:55,40:52,41:53,42:50,43:51,44:49,50:42,51:43,52:40,53:41,54:38,55:39},nl=function(){var x={1:function(k,e){return{x:k.x-e.width/2,y:k.y-e.height/2}},2:function(o,J){return{x:o.x+J.width/2,y:o.y-J.height/2}},3:function(X,x){return{x:X.x+X.width/2,y:X.y-x.height/2}},4:function(T,u){return{x:T.x+T.width-u.width/2,y:T.y-u.height/2}},5:function($,M){return{x:$.x+$.width+M.width/2,y:$.y-M.height/2}},6:function(O){return{x:O.x,y:O.y}},7:function(p){return{x:p.x+p.width/2,y:p.y}},8:function(D){return{x:D.x+D.width,y:D.y}},9:function(O,y){return{x:O.x-y.width/2,y:O.y+y.height/2}},10:function(B,j){return{x:B.x+j.width/2,y:B.y+j.height/2}},11:function(K,b){return{x:K.x+K.width/2,y:K.y+b.height/2}},12:function(s,$){return{x:s.x-$.width/2+s.width,y:s.y+$.height/2}},13:function(u,X){return{x:u.x+u.width+X.width/2,y:u.y+X.height/2}},14:function(s,n){return{x:s.x-n.width/2,y:s.y+s.height/2}},15:function(y){return{x:y.x,y:y.y+y.height/2}},16:function(d,w){return{x:d.x+w.width/2,y:d.y+d.height/2}},17:function(R){return{x:R.x+R.width/2,y:R.y+R.height/2}},18:function(x,E){return{x:x.x+x.width-E.width/2,y:x.y+x.height/2}},19:function(i){return{x:i.x+i.width,y:i.y+i.height/2}},20:function(Q,O){return{x:Q.x+Q.width+O.width/2,y:Q.y+Q.height/2}},21:function(l,h){return{x:l.x-h.width/2,y:l.y+l.height-h.height/2}},22:function(O,t){return{x:O.x+t.width/2,y:O.y+O.height-t.height/2}},23:function(R,D){return{x:R.x+R.width/2,y:R.y+R.height-D.height/2}},24:function(l,D){return{x:l.x+l.width-D.width/2,y:l.y+l.height-D.height/2}},25:function(n,Q){return{x:n.x+n.width+Q.width/2,y:n.y+n.height-Q.height/2}},26:function(P){return{x:P.x,y:P.y+P.height}},27:function(b){return{x:b.x+b.width/2,y:b.y+b.height}},28:function(W){return{x:W.x+W.width,y:W.y+W.height}},29:function(O,t){return{x:O.x-t.width/2,y:O.y+O.height+t.height/2}},30:function(g,x){return{x:g.x+x.width/2,y:g.y+g.height+x.height/2}},31:function(j,A){return{x:j.x+j.width/2,y:j.y+j.height+A.height/2}},32:function(I,a){return{x:I.x+I.width-a.width/2,y:I.y+I.height+a.height/2}},33:function(_,l){return{x:_.x+_.width+l.width/2,y:_.y+_.height+l.height/2}},34:function(v,Z){return{x:v.x,y:v.y-Z.height/2}},35:function(e,D){return{x:e.x+e.width,y:e.y-D.height/2}},36:function(W,G){return{x:W.x,y:W.y+W.height+G.height/2}},37:function(g,G){return{x:g.x+g.width,y:g.y+g.height+G.height/2}},38:function(u,w){return{x:u.x+u.width/4,y:u.y-w.height/2}},39:function(M,z){return{x:M.x+3*M.width/4,y:M.y-z.height/2}},40:function(s){return{x:s.x+s.width/4,y:s.y}},41:function(o){return{x:o.x+3*o.width/4,y:o.y}},42:function(u,j){return{x:u.x+u.width/4,y:u.y+j.height/2}},43:function(g,n){return{x:g.x+3*g.width/4,y:g.y+n.height/2}},44:function(L,U){return{x:L.x+L.width/2,y:L.y+L.height/2-U.height/2}},45:function(A){return{x:A.x+A.width/4,y:A.y+A.height/2}},46:function(_,g){return{x:_.x+_.width/2-g.width/2,y:_.y+_.height/2}},47:function(i,g){return{x:i.x+i.width/2+g.width/2,y:i.y+i.height/2}},48:function(f){return{x:f.x+3*f.width/4,y:f.y+f.height/2}},49:function(r,V){return{x:r.x+r.width/2,y:r.y+r.height/2+V.height/2}},50:function(n,u){return{x:n.x+n.width/4,y:n.y+n.height-u.height/2}},51:function(b,J){return{x:b.x+3*b.width/4,y:b.y+b.height-J.height/2}},52:function(o){return{x:o.x+o.width/4,y:o.y+o.height}},53:function(I){return{x:I.x+3*I.width/4,y:I.y+I.height}},54:function(M,d){return{x:M.x+M.width/4,y:M.y+M.height+d.height/2}},55:function(A,E){return{x:A.x+3*A.width/4,y:A.y+A.height+E.height/2}}};return Zp(y)?function(W,A,w){return x[W](A,w?w:Ch)}:void 0}();$l(w,{highlight:"#1ABC9C",label:"#000",labelSelect:"#FFF",transparent:"rgba(0,0,0,0.35)",titleBackground:"#2C3E50",titleIconBackground:"#868686",headerBackground:"#ECF0F1",headerIconBackground:"#868686",headerSeparator:"#868686",headerLine:"#D9D9D9",background:"#FFF",disabledBackground:"rgba(255,255,255,0.65)",toolTipBackground:"#FFFFE0",rectSelectBorder:"#2C3E50",rectSelectBackground:"rgba(0,0,0,0.35)",editPointBorder:"#2C3E50",editPointBackground:"#D9D9D9",dash:"#2C3E50",groupBackground:"#ECF0F1",groupTitleBackground:"#2C3E50",gridBackground:"#D9D9D9",gridCellBorderColor:"#868686",gridBlockColor:"#868686",reverse:"#868686",contentIconBackground:"#868686",contentLine:"#D9D9D9",widgetBackground:"#ECF0F1",widgetBorder:"#D9D9D9",widgetIconBackground:"#868686",widgetIconBorder:"#868686",widgetIconGradient:"#D9D9D9",widgetIconHighlight:"#43AFF1",imageBackground:"#3498DB",imageGradient:"#D9D9D9",chart:["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"]},!0);var Mf=w.reverse,Xb=w.transparent,Rl=w.rectSelectBackground,Of=w.dash,xb=w.titleBackground,Fn=w.titleIconBackground,Td=w.headerBackground,xq=w.headerIconBackground,ok=w.headerSeparator,cf=w.headerLine,wr=w.contentIconBackground,Bd=w.contentLine,mj=(w.widgetIconHighlight,w.widgetIconBorder),Jg=(w.widgetIconGradient,w.imageBackground),zh=w.imageGradient,Ng=w.highlight,gd=w.label,Ro=w.labelSelect;
    if(z&&!y.noAlert){var qq=new Date,Hd=z.split("-"),ib=new Date(qq.getFullYear(),qq.getMonth(),qq.getDate()),z=new Date(P(Hd[0],10),P(Hd[1],10)-1,P(Hd[2],10)),fl=ib.getTime(),ar=z.getTime(),Zj=Z+"_try",Zl=y.localStorage,ic=y.alert;if(Zl&&ic)if(ar>fl&&6048e5>ar-fl){var cr=(ar-fl)/864e5;Zl&&Zl[Zj]!=cr&&(Zl[Zj]=cr,ic("HT for Web free trail license will expire in "+cr+" days, please apply for a new license!"))}else fl>=ar&&ic("HT for Web free trail license expired!"),Zl&&delete Zl[Zj]}var hn={ms_ac:function(X,c){for(var O=c.ms_ac,x=0;x<O.length;x++)Co(X,O[x])},ms_listener:function(F){F.addListeners=function(){for(var y=this,H=0;H<xf.length;H++)y["handle_"+xf[H]]&&md(xf[H],y.getView(),y)},F.removeListeners=function(){for(var Y=this,y=0;y<xf.length;y++)Y["handle_"+xf[y]]&&es(xf[y],Y.getView(),Y)}},ms_fire:function(x){x.mp=function(y,f,m){this.addPropertyChangeListener(y,f,m)},x.ump=function(D,K){this.removePropertyChangeListener(D,K)},x.fp=function(o,a,R){return this.firePropertyChange(o,a,R)},x.addPropertyChangeListener=function(F,V,T){var c=this;c._62I||(c._62I=new yb),c._62I.add(F,V,T)},x.removePropertyChangeListener=function(m,Y){this._62I.remove(m,Y)},x.firePropertyChange=function(A,F,s){if(F===s)return!1;var k=this,l={property:A,oldValue:F,newValue:s,data:k};return k._62I&&k._62I.fire(l),k.onPropertyChanged&&k.onPropertyChanged(l),!0}},ms_attr:function(S){S.a=function(T,f){var Z=this;if(2===arguments.length)Z.setAttr(T,f);else{if(!ys(T))return Z.getAttr(T);for(var V in T)Z.setAttr(V,T[V])}return Z},S.getAttr=function(c){return this._attrObject?this._attrObject[c]:K},S.setAttr=function(r,$){var Y=this;Y._attrObject||(Y._attrObject={});var g=Y._attrObject[r];$===K?delete Y._attrObject[r]:Y._attrObject[r]=$,Y.fp&&Y.fp("a:"+r,g,$)&&Y.onAttrChanged&&Y.onAttrChanged(r,g,$)},S.getSerializableAttrs=function(){var g,p={};for(g in this._attrObject)p[g]=1;return p}},ms_bnb:function(L){L.getBodyColor=function(Z){return Z.s("body.color")},L.getBorderColor=function(x){return x.s("border.color")}},_51o:function(W){W.mi=function(X,E,U){this.addInteractorListener(X,E,U)},W.umi=function(T,C){this.removeInteractorListener(T,C)},W.fi=function(q){this.fireInteractorEvent(q)},W.addInteractorListener=function(G,t,Z){var V=this;V._63I||(V._63I=new yb),V._63I.add(G,t,Z)},W.removeInteractorListener=function(S,l){this._63I.remove(S,l)},W.fireInteractorEvent=function(o){this._63I&&this._63I.fire(o)},W.setInteractors=function(K){var v=this,U=v._interactors;U&&U.each(function(I){I.tearDown()}),_f(K)&&(K=new fr(K)),v._interactors=K,K&&K.each(function(a){a.setUp()}),v.fp("interactors",U,K),v.invalidateSelection()},W.getInteractors=function(){return this._interactors}},_49o:function(B){B._44O=$,B._45O=$,B.addTopPainter=function(c){var T=this;T._44O||(T._44O=new fr),T._44O.contains(c)||(T._44O.add(c),T.redraw&&T.redraw())},B.removeTopPainter=function(R){var A=this;A._44O&&(A._44O.remove(R),A.redraw&&A.redraw())},B.addBottomPainter=function(p){var u=this;u._45O||(u._45O=new fr),u._45O.contains(p)||(u._45O.add(p),u.redraw&&u.redraw())},B.removeBottomPainter=function(v){var j=this;j._45O&&(j._45O.remove(v),j.redraw&&j.redraw())},B._93db=function(W,i){var O=this;O._45O&&O._45O.each(function(e){e.draw?e.draw(W,i):e.call(O,W,i)})},B._92db=function(q,S){var s=this;s._44O&&s._44O.each(function(c){c.draw?c.draw(q,S):c.call(s,q,S)})}},ms_sm:function(F){F.sm=function(){return this.getSelectionModel()},F.setSelectableFunc=function(I){this.sm().setFilterFunc(I)},F.getSelectableFunc=function(){return this.sm().getFilterFunc()},F.getSelectionModel=function(){var K=this;return K._3o?K._3o:K.dm().sm()},F.isSelectionModelShared=function(){return!this._3o},F.setSelectionModelShared=function(K){var I=this,t=!I._3o,o=I._16o,l=I.dm();t!==K&&(I.invalidateSelection&&I.invalidateSelection(),K?(l.sm().ms(o,I),I._3o.ums(o,I),I._3o.dispose(),I._3o=$):(l.sm().ums(o,I),I._3o=new Lq(l),I._3o.ms(o,I)),I.onSelectionModelSharedChanged(),I.fp("selectionModelShared",t,K))},F.onSelectionModelSharedChanged=function(){var Y=this;Y.redraw(),Y.invalidateSelection&&Y.invalidateSelection()},F.removeSelection=function(){var B=this.dm(),$=B.getHistoryManager();$&&$.beginInteraction(),this.sm().toSelection().each(B.remove,B),$&&$.endInteraction()},F.selectAll=function(){var k=this;k.sm().ss(k.dm().toDatas(k.isVisible,k))},F.isSelected=function(s){return this.sm().co(s)},F.isSelectedById=function(a){var T=this.dm().getDataById(a);return T?this.isSelected(T):!1},F.isSelectable=function(Z){return this.sm().isSelectable(Z)}},ms_tx:function(N){N._64I=0,N._65O=0,N.isScrollable=function(){return this.getWidth()<this._64I},N._40o=function(){return this.isScrollable()},N.getLogicalPoint=function(x){return tl(x,this._canvas||this._view,this.tx(),this.ty?this.ty():0)},N.tx=function(B){return B===K?this.getTranslateX():(this.setTranslateX(B),void 0)},N.getTranslateX=function(){return this._65O},N.setTranslateX=function(r){var k=this,t=k.getWidth()-k._64I;t>r&&(r=t),r>0&&(r=0),r=B(r);var I=k._65O;k._65O=r,k.fp(Yb,I,r)}},ms_ty:function(O){O._23Q=0,O._66O=0,O._41o=function(){return this.getHeight()<this._23Q},O.getLogicalPoint=function(q){return tl(q,this._canvas||this._view,this.tx?this.tx():0,this.ty())},O.ty=function(t){return t===K?this.getTranslateY():(this.setTranslateY(t),void 0)},O.getTranslateY=function(){return this._66O},O.setTranslateY=function(s){var f=this,W=f.getHeight()-f._23Q;W>s&&(s=W),s>0&&(s=0),s=B(s);var Q=f._66O;f._66O=s,f.fp(Dj,Q,s)}},ms_txy:function(M){M._65O=0,M._66O=0,M.tx=function(u){return u===K?this.getTranslateX():(this.setTranslateX(u),void 0)},M.ty=function(b){return b===K?this.getTranslateY():(this.setTranslateY(b),void 0)},M.onTranslateEnded=function(){},M.setTranslate=function(X,J,W){var m=this;if(W=mh(W)){m._65I&&m._65I.stop(!0);var O=m.tx(),c=m.ty();W.action=function(N){m.setTranslate(O+(X-O)*N,c+(J-c)*N)},W._37o=function(){delete m._66I,delete m._65I,m.onTranslateEnded()},m._66I=1,m._65I=ae(W)}else m.tx(X),m.ty(J)},M.getTranslateX=function(){return this._65O},M.setTranslateX=function(Q){var O=this;Q=O.adjustTranslateX(Q);var u=O._65O;O._65O=Q,O.fp(Yb,u,Q)},M.getTranslateY=function(){return this._66O},M.setTranslateY=function(j){var Q=this;j=Q.adjustTranslateY(j);var h=Q._66O;Q._66O=j,Q.fp(Dj,h,j)},M.adjustTranslateX=function(J){return B(J)},M.adjustTranslateY=function(g){return B(g)},M.translate=function(H,f,q){this.setTranslate(this.tx()+H,this.ty()+f,q)},M.getLogicalPoint=function(x){var O=this;return tl(x,this._canvas||O._view,O.tx(),O.ty())}},ms_dm:function(V){V.dm=function(J){return J?(this.setDataModel(J),void 0):this.getDataModel()},V.getDataModel=function(){return this._dataModel}},ms_lp:function(F){F.lp=function(V){return this.getLogicalPoint(V)}},ms_v:function(s){s._disabled=!1,s.setDisabled=function(T,M){var u=this,g=u._disabled;g!==T&&(g&&(bf(u._63O),delete u._63O),T&&(Si(u._view,u._63O=ce(M)),u.iv()),u._disabled=T,u.fp("disabled",g,T))},s.isDisabled=function(){return this._disabled},s.getView=function(){return this._view},s.addToDOM=function(){var X=this,N=X.getView(),j=N.style;C.body.appendChild(N),j.left="0",j.right="0",j.top="0",j.bottom="0",y.addEventListener("resize",function(){X.iv()},!1)},s.getWidth=function(){return this._view.clientWidth},s.getHeight=function(){return this._view.clientHeight},s.setWidth=function(H){var C=this;C._view.style.width=H+$p,C.iv(),C.fp&&C.fp(Sn,$,H)},s.setHeight=function(R){var O=this;O._view.style.height=R+$p,O.iv(),O.fp&&O.fp(Bi,$,R)},s.setFocus=function(T){var Y=this,m=Y._currentEditor;return T&&m&&(m.getView&&(m=m.getView()),m.contains(T.target))?!1:($r(Y._view),Y.endEditing&&Y.endEditing(),Y._41O("focus"),!0)},s.iv=function(y){this.invalidate(y)},s.invalidate=function(Y){var e=this;e._68I||(e._68I=1,Sg(e.validate,e,$,Y),e.onInvalidated&&e.onInvalidated(),e._41O("invalidate"))},s.validate=function(){var S=this,E=S._view;if(S._68I&&(delete S._68I,E.parentNode))if(0===E.offsetWidth&&0===E.offsetHeight&&S._67I!==$)S._67I===K&&(S._67I=O.reinvalidateCount),S._67I>0?S._67I--:S._67I=$,S.iv();else{S._41O("beginValidate"),S.validateImpl(),S.onValidated&&S.onValidated(),S._41O("validate");var D=S._63O;D&&(E.lastChild!==D&&(bf(D),Si(E,D)),Vq(D,0,0,S.getWidth(),S.getHeight())),Vc(S)}},s.layout=function(c,T,Z,d){1===arguments.length?Vq(this,c):Vq(this,c,T,Z,d)},s.addViewListener=function(S,A,e){var u=this;u._67O||(u._67O=new yb),u._67O.add(S,A,e)},s.removeViewListener=function(E,k){this._67O.remove(E,k)},s._41O=function(x){var o=this;o._67O&&(yf(x)&&(x={kind:x}),o._67O.fire(x)),O.viewListener&&O.viewListener(o,x)}},ms_tip:function(C){C.enableToolTip=function(){var w=this;_||w._13o||(w._13o=function(L){var I=w.getToolTip(L);I!=$?O.toolTipContinual&&O.isToolTipShowing()?Nl(L,I):(br(),Xk={timeout:W(so,xs),e:L,info:I}):br()},w.getView().addEventListener(Mq,w._13o,!1))},C.disableToolTip=function(){var H=this;H._13o&&(H.getView().removeEventListener(Mq,H._13o,!1),delete H._13o)},C.getToolTip=function(P){var U=this;if(U.getDataAt){var T=U.getDataAt(P);return T?T.getToolTip():$}return U.getValue?_m(U.getValue()):void 0}},_52o:function(g){g._zoom=1,g._29I=Ch,g.zoomIn=function(S,W){this.setZoom(this._zoom*rh,S,W)},g.zoomOut=function(J,F){this.setZoom(this._zoom/rh,J,F)},g.zoomReset=function(V,X){this.setZoom(1,V,X)},g.scrollZoomIn=function(z){this.setZoom(this._zoom*Ic,$,z)},g.scrollZoomOut=function(q){this.setZoom(this._zoom/Ic,$,q)},g.pinchZoomIn=function(c){this.setZoom(this._zoom*me,$,c)},g.pinchZoomOut=function(N){this.setZoom(this._zoom/me,$,N)},g.adjustZoom=function(i){return Ql>i?Ql:i>bp?bp:i},g.getZoom=function(){return this._zoom},g.setZoom=function(m,P,c){var n=this;if(P=mh(P)){n._14o&&n._14o.stop(!0);var z=n._zoom;P.action=function(U){n._96O(z+(m-z)*U,c)},P._37o=function(){delete n._zooming,delete n._14o,n.onZoomEnded()},n._zooming=1,n._14o=ae(P)}else n._96O(m,c)},g._96O=function(A,c){var v=this;if(A=v.adjustZoom(A),A!==v._zoom){v.validate();var x=v._29I,y=v._zoom;0!==x.width&&0!==x.height&&(c=c?c:{x:x.x+x.width/2,y:x.y+x.height/2},v.tx((c.x-x.x)*y-c.x*A),v.ty((c.y-x.y)*y-c.y*A)),v._zoom=A,v.fp("zoom",y,A)}}}};$l(O,{baseZIndex:K,isTouchable:_,devicePixelRatio:y.devicePixelRatio?y.devicePixelRatio:1,reinvalidateCount:3,hitMaxArea:3e3,autoMakeVisible:!0,autoHideScrollBar:!0,disabledOpacity:.4,disabledBackground:w.disabledBackground,toolTipDelay:800,toolTipContinual:!1,lineCap:"butt",lineJoin:"round",imageGradient:"linear.northeast",dashPattern:[16,16],animDuration:200,animEasing:function(p){return p*p},labelColor:gd,labelSelectColor:Ro,labelFont:(_?"15":"12")+"px arial, sans-serif",widgetIndent:_?30:20,widgetRowHeight:_?30:20,widgetHeaderHeight:_?32:22,widgetTitleHeight:_?34:24,scrollBarColor:Xb,scrollBarSize:7,scrollBarTimeout:1e3,scrollBarMinLength:20,scrollBarInteractiveSize:_?32:16,zoomIncrement:1.3,scrollZoomIncrement:1.05,pinchZoomIncrement:1.08,zoomMax:20,zoomMin:.01,segmentResolution:12,shapeResolution:24,shapeSide:24,getVersion:function(){return"4.7"},setCompType:function(K,O){pj[K]=O},getCompType:function(D){return pj[D]},numberListener:function(){var E={46:1,8:1,9:1,27:1,13:1,109:1,110:1,189:1,190:1};return function(A){var L=A.keyCode;E[L]||65===L&&O.isCtrlDown(A)||L>=35&&39>=L||(A.shiftKey||48>L||L>57)&&(96>L||L>105)&&A.preventDefault()}}(),preventDefault:function(X){var w=X.target.tagName;("DIV"===w||"CANVAS"===w)&&(X.preventDefault(),X.preventManipulation&&X.preventManipulation())},getWindowInfo:function(){var c=C.documentElement,v=c&&(c.scrollLeft||c.scrollTop)?c:C.body;return{target:v,left:v.scrollLeft,top:v.scrollTop,width:y.innerWidth||v.clientWidth,height:y.innerHeight||v.clientHeight}},isDragging:function(){return!!Xp},isLeftButton:function(h){return _?!0:0===h.button},getTouchCount:function(z){return _?z.touches.length:1},isDoubleClick:function(){var j=new Date,q=$,o=new Date,P=$;return function(I){if(kd=new Date,uq=kd.getTime(),_){var s=I.type,H=s+"_isDoubleClick";if(I[H]===K){var g=lc(I);"touchstart"===s?(I[H]=q&&Ym(q,g)<20&&uq-j.getTime()<500,j=kd,q=g):(I[H]=P&&Ym(P,g)<20&&uq-o.getTime()<500,o=kd,P=g)}return I[H]}return 2===I.detail}}(),isShiftDown:function(y){return y?y.shiftKey:cj["16"]},isCtrlDown:function(Q){return Q?S?Q.metaKey:Q.ctrlKey:S?cj["91"]:cj["17"]},getClientPoint:function(f){return _&&(f=hb(f)),{x:f.clientX,y:f.clientY}},getPagePoint:function(D){return _&&(D=hb(D)),{x:D.pageX,y:D.pageY}},createObject:function(F,L){var $=new F;for(var w in L){var r=Qg(w),f=L[w];$[r]?($[r](f),"setToolTip"===r&&$.enableToolTip&&$.enableToolTip()):$[w]=f}return $},setImage:function(i,K,d,f){var F=arguments.length;4===F?lm(i,f,K,d):2===F?yf(K)?lm(i,K):ei[i]=K:1===F&&lm(i,i)},getImage:function(S,w){var V;if(S==$)return $;if(ys(S)?V=S:(V=ei[S],S&&V===K&&(Ir&&Ir[S]||lm(S,S))),w&&V&&V.tagName){V.colors||(V.colors={});var i=V.colors[w];return i||(i=Yd(V,ti(w),V.width,V.height),V.colors[w]=i),i}return V},getId:function(){var o=1;return function(){return++o}}(),callLater:function(T,b,x,B){var P=function(){T.apply(b,x)};return B?W(P,B):y.requestAnimationFrame(P)},clone:function(h){if(!h)return $;if(_f(h))return h.slice(0);if(ys(h)){var H,I={};for(H in h)I[H]=h[H];return I}return h},handleImageLoaded:function(){},handleUnfoundImage:function(){},sortFunc:function(Z,e){if(Z===e)return 0;if(Z==$&&e!=$)return 1;if(Z!=$&&e==$)return-1;if(Z==$&&e==$)return 0;var q,b=typeof Z,H=typeof e;return b===ss&&H===ss?q=Z.localeCompare(e):b===jc&&H===jc&&(q=Z-e),q===K&&(q=(""+Z).localeCompare(""+e)),q>0?1:0>q?-1:0},getClassMap:function(){return Kr},getClass:function(u){if(yf(u)){var z,T=Kr[u];if(!T){z=u.split("."),T=y;for(var c=0;c<z.length;c++)T=T[z[c]];Kr[u]=T}return T}return u},def:function(s,m,O){var e,D,n,U=function(){};if(U.prototype=m.prototype,e=new U,yf(s)){if(Kr[s])throw"'"+s+"' alreay defined";n=dh(s),e.getClassName=function(){return s}}else n=s;if(e.constructor=n,e.getClass=function(){return n},e.getSuperClass=function(){return m},O)for(D in O)hn[D]&&hn.hasOwnProperty(D)?hn[D](e,O):e[D]=O[D];n.prototype=e,n.superClass=m.prototype},startAnim:function(){var r=function(f){f.duration&&(f.startTime=Do()),f.timeId=Sg(f.tick,$,$,f.interval)};return function(l){return l=Nf(l),l.easing=l.easing||O.animEasing,l.duration||l.frames||(l.duration=O.animDuration),l.t=0,l.duration?l.interval=0:(l.frame=0,l.interval=l.interval||10),l.tick=function(){if(l.duration){var P=(Do()-l.startTime)/l.duration;P>1&&(P=1),l.t=P,l.action(l.easing(P),P),1===P?l.stop():l._isPaused||(l.timeId=Sg(l.tick))}else l.frame++,P=l.t=l.frame/l.frames,l.action(l.easing(P),P),l.frame<l.frames?l._isPaused||(l.timeId=Sg(l.tick,$,$,l.interval)):l.stop()},l.resume=function(){l._isPaused&&(delete l._isPaused,l.duration?l.t<1&&(l.startTime=Do()-l.duration*l.t,l.timeId=Sg(l.tick)):l.frame<l.frames&&(l.timeId=Sg(l.tick,$,$,l.interval)))},l.pause=function(){l._isPaused=!0},l.stop=function(v){l.isRunning()&&(l.duration?l.t<1&&v&&(l.t=1,l.action(l.easing(1))):l.frame<l.frames&&v&&(l.frame=l.frames,l.action(l.easing(1))),l._37o&&l._37o(),l.finishFunc&&l.finishFunc(),Vb(l.timeId,!l.duration),delete l.timeId)},l.isRunning=function(){return l.timeId!=$},l.delay?Sg(r,$,[l],l.delay):r(l),l}}(),getTextSize:function(){var u={},j=C?El().getContext("2d"):$;return function(g,y){j.font=g?g:Cp;var G=u[j.font];return G||(G=2*j.measureText("e").width+4,u[j.font]=G),{width:j.measureText(y).width+4,height:G}}}(),drawText:function(X,F,B,_,c,W,q,z,y,b){if(F!=$){var h=Ul(B,F),d={};d.y=b&&b!==Vd?b===tn?W+h.height/2:W+z-h.height/2:W+z/2,d.x=y&&y!==Zd?y===Aj?c+q-h.width/2:c+q/2:c+h.width/2,vn(X,F,d,B,_)}},getDistance:function(I,g){var O=I.length;return g?3===O?q(o(I[0]-g[0])+o(I[1]-g[1])+o(I[2]-g[2])):2===O?q(o(I[0]-g[0])+o(I[1]-g[1])):I.z===K?q(o(g.x-I.x)+o(g.y-I.y)):q(o(g.x-I.x)+o(g.y-I.y)+o(g.z-I.z)):3===O?q(o(I[0])+o(I[1])+o(I[2])):2===O?q(o(I[0])+o(I[1])):void 0},brighter:function(J,N){return Jo(J,N?N:40)},darker:function(F,M){return Jo(F,M?M:-40)},unionPoint:function(Z,p){if(!Z)return $;if(2===arguments.length)return Z&&p?{x:a(Z.x,p.x),y:a(Z.y,p.y),width:m(Z.x-p.x),height:m(Z.y-p.y)}:$;var T=Z;if(T._as&&(T=T._as),T.length===K)return $;var B=T.length;if(0>=B)return $;for(var W=1,g=T[0],q={x:g.x,y:g.y,width:0,height:0};B>W;W++){g=T[W];var z=a(q.x,g.x),N=V(q.x+q.width,g.x),j=a(q.y,g.y),S=V(q.y+q.height,g.y);q.x=z,q.y=j,q.width=N-z,q.height=S-j}return q},unionRect:function(q,S){if(q&&!S)return Nf(q);if(!q&&S)return Nf(S);if(q&&S){var C={x:a(q.x,S.x),y:a(q.y,S.y)};return C.width=V(q.x+q.width,S.x+S.width)-C.x,C.height=V(q.y+q.height,S.y+S.height)-C.y,C}return $},containsPoint:function(o,J){return!(!o||J.x<o.x||J.y<o.y||J.x>o.x+o.width||J.y>o.y+o.height)},containsRect:function(g,k){if(!g||!k)return!1;var M=k.x,a=k.y,T=k.width,w=k.height,O=g.width,G=g.height;if(0>(O|G|T|w))return!1;var n=g.x,V=g.y;if(n>M||V>a)return!1;if(O+=n,T+=M,M>=T){if(O>=n||T>O)return!1}else if(O>=n&&T>O)return!1;if(G+=V,w+=a,a>=w){if(G>=V||w>G)return!1}else if(G>=V&&w>G)return!1;return!0},intersectsRect:function(Q,Y){if(!Q||!Y)return!1;var o=Y.width,I=Y.height,M=Q.width,T=Q.height;if(0>=M||0>=T||0>=o||0>=I)return!1;var b=Y.x,y=Y.y,i=Q.x,h=Q.y;return M+=i,T+=h,o+=b,I+=y,M>b&&T>y&&o>i&&I>h},intersection:function(d,J){if(!d||!J)return $;var O=J.x,k=J.y,Z=d.x,x=d.y,g=O,j=k,L=Z,B=x;return g+=J.width,j+=J.height,L+=d.width,B+=d.height,Z>O&&(O=Z),x>k&&(k=x),g>L&&(g=L),j>B&&(j=B),g-=O,j-=k,0>=g||0>=j?$:{x:O,y:k,width:g,height:j}},grow:function(i,T){i.x-=T,i.y-=T,i.width=i.width+2*T,i.height=i.height+2*T},getLogicalPoint:function(B,b,c,P,y,S){var x=b.getBoundingClientRect();return B=_?hb(B):B,{x:(B.clientX-x.left+b.scrollLeft-(c||0))/(y||1),y:(B.clientY-x.top+b.scrollTop-(P||0))/(S||1)}},removeHTML:function(){var t;return function(G){return G&&G.parentNode?t===G?!0:(t=G,G.parentNode.removeChild(G),t=$,!0):!1}}(),getToolTipDiv:function(){if(!Xq){Xq=eo(),we=eo();var W=Xq.style;O.baseZIndex!=$&&(W.zIndex=P(O.baseZIndex)+3+""),W.whiteSpace="nowrap",W.color=O.toolTipLabelColor,W.background=O.toolTipBackground,W.font=O.toolTipLabelFont,W.padding="5px",W.boxShadow="0px 0px 3px "+O.toolTipShadowColor}return Xq},isToolTipShowing:function(){return Xq&&Xq.parentNode?!0:we&&we.parentNode?!0:!1},hideToolTip:function(){bf(Xq),bf(we),oo()},showToolTip:function(N,F){if(!N||F==$)return br(),void 0;O.getToolTipDiv();var l,D;if(F.html?(F=F.html,l=we,bf(Xq)):(l=Xq,bf(we)),D=l.style,l.innerHTML=F,l.parentNode||Si(C.body,l),N.target){N=wd(N);var b=Gj(),B=N.x,i=N.y,H=_?60:12;if(_){var m=l.getBoundingClientRect();D.left=B-m.width/2+$p,D.top=i-m.height-H<b.top?i+H+$p:i-m.height-H+$p}else{D.left=B+H+$p,D.top=i+H+$p;var m=l.getBoundingClientRect();m.left+m.width>b.width&&(D.left=B-H-m.width+$p),m.top+m.height>b.height&&(D.top=i-H-m.height+$p),m.left<0&&(D.left=B+H+$p),m.top<0&&(D.top=i+H+$p)}}else D.left=N.x+$p,D.top=N.y+$p;oo()},startDragging:function(F,G){F!==Xp&&(Xp?_?Xp.handleWindowTouchEnd(G):Xp.handleWindowMouseUp(G):_?(y.addEventListener(Fc,ym,!1),y.addEventListener(Fe,Yr,!1)):(y.addEventListener(Mq,op,!1),y.addEventListener(hi,od,!1)),Xp=F)},getImageMap:function(){return ei},toBoundaries:function(x,W,t,v){var D=[];return Ui(x,W,t,v).forEach(function(t){var F=[];t.forEach(function(q){F.push(q.x,q.y)}),D.push(F)}),D},getCurrentKeyCodeMap:function(){return cj},drawCenterImage:function(y,K,C,X,H,J,Q){var x=ud(K,H),e=Pq(K,H);fb(y,K,B(C-x/2),B(X-e/2),x,e,H,J,Q)},drawStretchImage:function($,i,V,m,t,R,q,e,y,I){var C,u=ud(i,e),x=Pq(i,e);"uniform"===V?(C=a(R/u,q/x),u*=C,x*=C,m+=B((R-u)/2),t+=B((q-x)/2),R=u,q=x):V===dn&&((u>R||x>q)&&(C=a(R/u,q/x),u*=C,x*=C),m+=B((R-u)/2),t+=B((q-x)/2),R=u,q=x),fb($,i,m,t,R,q,e,y,I)},toCanvas:function(y,Z,i,R,G,v,d){y=Tn(y,d),Z=Z||ud(y,G),i=i||Pq(y,G);var m=El();Kp(m,Z,i,1);var w=dk(m);return ai(w,y,R,0,0,Z,i,G,v,d),w.restore(),m},createElement:function(z,H,Z,a){var g=C.createElement(z);return ue(g,H||w.widgetBorder,2),g.style.font=Z?Z:Cp,a!=$&&(g.value=a),g},containedInView:function(i,A){var Y=sj(A).getBoundingClientRect();return rl({x:Y.left,y:Y.top,width:Y.width,height:Y.height},lc(i))},isIsolating:function(){return Jk},setIsolating:function(Y){Jk=Y},toColorData:bq},!0),$l(Q,{adjustChildrenToTop:1,autoHideScrollBar:1,autoUpdate:1,firstPersonMode:1,ortho:1,strict:1,stickToRight:1,instant:1,closePath:1,hierarchical:1},!0);var ed=O.disabledOpacity,xs=O.toolTipDelay,zd=O.devicePixelRatio,dj=O.autoMakeVisible,jq=O.autoHideScrollBar,nh=O.imageGradient,Nl=O.showToolTip,br=O.hideToolTip,rq=O.dashPattern,pl=O.lineCap,_b=O.lineJoin,jh=O.labelColor,Tl=O.labelSelectColor,Cp=O.labelFont,sr=O.widgetIndent,So=O.widgetRowHeight,ho=O.widgetHeaderHeight,kc=O.widgetTitleHeight,fj=O.scrollBarColor,Wp=O.scrollBarSize,os=O.scrollBarTimeout,Oj=O.scrollBarMinLength,gq=O.scrollBarInteractiveSize,rh=O.zoomIncrement,Ic=O.scrollZoomIncrement,me=O.pinchZoomIncrement,bp=O.zoomMax,Ql=O.zoomMin,fi=O.createObject,In=O.preventDefault,Em=O.setImage,Tn=O.getImage,Mp=O.drawCenterImage,ai=O.drawStretchImage,sk=O.getId,Sg=O.callLater,Pe=O.sortFunc,Nf=O.clone,dh=O.getClass,ae=O.startAnim,Qc=O.brighter,wn=O.darker,Fl=O.drawText,Ul=O.getTextSize,Ni=O.isLeftButton,Di=O.getTouchCount,ik=O.isDoubleClick,Sj=O.isShiftDown,Ak=O.isCtrlDown,lc=O.getClientPoint,wd=O.getPagePoint,Ym=O.getDistance,vc=O.unionPoint,gb=O.unionRect,rl=O.containsPoint,uh=O.containsRect,Ie=O.intersectsRect,yg=O.intersection,Gj=O.getWindowInfo,$n=O.grow,tl=O.getLogicalPoint,vq=O.startDragging,bf=O.removeHTML,pb=O.createElement,Sp=O.segmentResolution,Ee=O.shapeResolution,eh=O.shapeSide,de=O.def,Lo=function(j,k,H){de(Z+"."+j,k,H)};$l(O,{toolTipLabelColor:jh,toolTipLabelFont:Cp,toolTipBackground:w.toolTipBackground,toolTipShadowColor:Xb},!0);var Cn=1e-6,Dh="undefined"!=typeof Uint16Array?Uint16Array:Array,wq="undefined"!=typeof Float32Array?Float32Array:Array,Hl=function(t,V,U){var p=[t[0]-V[0],t[1]-V[1],t[2]-V[2]];if(U){var S=Ym(p);S>0&&(p[0]/=S,p[1]/=S,p[2]/=S)}return p},Bk=function(N){return[-N[0],-N[1],-N[2]]},jb=function(s,P){return 3===s.length?s[0]*P[0]+s[1]*P[1]+s[2]*P[2]:s[0]*P[0]+s[1]*P[1]},Cm=function(){var U=new wq(16);return U[0]=1,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=1,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=1,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U},Yj=Cm(),Jr=function(z){var Q=new wq(16);return Q[0]=z[0],Q[1]=z[1],Q[2]=z[2],Q[3]=z[3],Q[4]=z[4],Q[5]=z[5],Q[6]=z[6],Q[7]=z[7],Q[8]=z[8],Q[9]=z[9],Q[10]=z[10],Q[11]=z[11],Q[12]=z[12],Q[13]=z[13],Q[14]=z[14],Q[15]=z[15],Q},bs=function(m,A){return m[0]=A[0],m[1]=A[1],m[2]=A[2],m[3]=A[3],m[4]=A[4],m[5]=A[5],m[6]=A[6],m[7]=A[7],m[8]=A[8],m[9]=A[9],m[10]=A[10],m[11]=A[11],m[12]=A[12],m[13]=A[13],m[14]=A[14],m[15]=A[15],m},xm=function(Y){return Y[0]=1,Y[1]=0,Y[2]=0,Y[3]=0,Y[4]=0,Y[5]=1,Y[6]=0,Y[7]=0,Y[8]=0,Y[9]=0,Y[10]=1,Y[11]=0,Y[12]=0,Y[13]=0,Y[14]=0,Y[15]=1,Y},jf=function(o,n){var D=o[0],r=o[1],h=o[2];return o[0]=n[0]*D+n[4]*r+n[8]*h+n[12],o[1]=n[1]*D+n[5]*r+n[9]*h+n[13],o[2]=n[2]*D+n[6]*r+n[10]*h+n[14],o},us=function(S,$){var y=S[0],u=S[1],z=S[2],o=S[3];return S[0]=$[0]*y+$[4]*u+$[8]*z+$[12]*o,S[1]=$[1]*y+$[5]*u+$[9]*z+$[13]*o,S[2]=$[2]*y+$[6]*u+$[10]*z+$[14]*o,S[3]=$[3]*y+$[7]*u+$[11]*z+$[15]*o,S},Pg=function(){var p,u,n,J,V=jj(Ik[1]+Ik[7]),A=jj(Ik[0]+Ik[3]-Ik[10]),C=jj(Ik[8]+2),x=function(){return u=n.charAt(p),p+=1,u},S=function(){var K="";if(u===C)for(;x();){if(u===C)return x(),K;K+=u}else x()},l=function(){for(;u&&" ">=u;)x()},o=function(){var F,Y={};if(u===V){if(x(),l(),u===A)return x(),Y;for(;u;){if(F=S(),l(),x(),Y[F]=J(),l(),u===A)return x(),Y;x(),l()}}};return J=function(){switch(l(),u){case V:return o();default:return S()}},function(c){if(N={},c){var f;if(n=c,p=0,u=" ",f=J(),l(),!u)return f}}}(),mm=function($,R){if(R){var x=d(R),E=h(R),j=$[4],t=$[5],z=$[6],D=$[7],g=$[8],B=$[9],S=$[10],s=$[11];$[4]=j*E+g*x,$[5]=t*E+B*x,$[6]=z*E+S*x,$[7]=D*E+s*x,$[8]=g*E-j*x,$[9]=B*E-t*x,$[10]=S*E-z*x,$[11]=s*E-D*x}},Ho=function(J,S){if(S){var A=d(S),I=h(S),q=J[0],D=J[1],s=J[2],o=J[3],$=J[8],f=J[9],x=J[10],B=J[11];J[0]=q*I-$*A,J[1]=D*I-f*A,J[2]=s*I-x*A,J[3]=o*I-B*A,J[8]=q*A+$*I,J[9]=D*A+f*I,J[10]=s*A+x*I,J[11]=o*A+B*I}},Ko=function(f,k){if(k){var y=d(k),O=h(k),i=f[0],H=f[1],z=f[2],m=f[3],c=f[4],b=f[5],T=f[6],A=f[7];f[0]=i*O+c*y,f[1]=H*O+b*y,f[2]=z*O+T*y,f[3]=m*O+A*y,f[4]=c*O-i*y,f[5]=b*O-H*y,f[6]=T*O-z*y,f[7]=A*O-m*y}},$k=function(K,h,f){return Sb($,f===!1?$:K.s3(),K.r3(),K.getRotationMode(),K.p3(),$,h)},Sb=function(k,w,O,c,o,$,v){return $||($=Cm()),o&&lb($,o),Jd($,O,c),v&&jr($,$,v),w&&Sf($,w),k&&jr($,$,k),$},Up=function(N,V,L){V=P(V),L=P(L);var f=this;f.g=N,f._84O=V,f._85O=L,f._70I=!0,f.F=0,f._83O=V+L,f.pen={x:0,y:0}},jg="lineDashOffset",Wb="setLineDash",lg=function(T){for(var m in T)1===m.length&&(jg=T[m]);return m?1:0},yk=function(b,N,W){return Ke(N)?b:b[Wb]?(b[Wb](N),W&&(b.lineDashOffset=W),b):new Up(b,N[0],N.length>1?N[1]:N[0])},Nm=function(I,a){!Ke(a)&&I[Wb]&&(I[Wb](po),I.lineDashOffset=0)};if(de(Up,x,{_69I:6,moveTo:function(Y,P){var K=this,v=K.pen;v.x=Y,v.y=P,K.g.moveTo(Y,P),K.start||(K.start={x:Y,y:P})},lineTo:function(A,k){var I=this,g=I.pen,i=A-g.x,p=k-g.y,_=t(p,i),K=h(_),y=d(_),s=I._23O(g.x,g.y,A,k),Q=I._85O,x=I._84O,m=I._83O;if(I.F){if(I.F>s)return I._70I?I._72I(A,k):I.moveTo(A,k),I.F-=s,void 0;if(I._70I?I._72I(g.x+K*I.F,g.y+y*I.F):I.moveTo(g.x+K*I.F,g.y+y*I.F),s-=I.F,I.F=0,I._70I=!I._70I,!s)return}var W=r(s/m);if(W){for(var M=K*x,T=y*x,P=K*Q,j=y*Q,U=0;W>U;U++)I._70I?(I._72I(g.x+M,g.y+T),I.moveTo(g.x+P,g.y+j)):(I.moveTo(g.x+P,g.y+j),I._72I(g.x+M,g.y+T));s-=m*W}I._70I?s>x?(I._72I(g.x+K*x,g.y+y*x),I.moveTo(A,k),I.F=Q-(s-x),I._70I=!1):(I._72I(A,k),s===x?(I.F=0,I._70I=!I._70I):(I.F=x-s,I.moveTo(A,k))):s>Q?(I.moveTo(g.x+K*Q,g.y+y*Q),I._72I(A,k),I.F=x-(s-Q),I._70I=!0):(I.moveTo(A,k),s===Q?(I.F=0,I._70I=!I._70I):I.F=Q-s)},quadraticCurveTo:function(A,g,F,v){var U,h=this,f=h.pen,N=f.x,M=f.y,Q=h._22O(N,M,A,g,F,v),y=0,T=0,B=h._85O,q=h._84O;if(h.F){if(h.F>Q)return h._70I?h._71I(A,g,F,v):h.moveTo(F,v),h.F-=Q,void 0;if(y=h.F/Q,U=h._20O(N,M,A,g,F,v,y),h._70I?h._71I(U[2],U[3],U[4],U[5]):h.moveTo(U[4],U[5]),h.F=0,h._70I=!h._70I,!Q)return}var o=Q-Q*y,Y=r(o/h._83O),s=q/Q,i=B/Q;if(Y)for(var b=0;Y>b;b++)h._70I?(T=y+s,U=h._21O(N,M,A,g,F,v,y,T),h._71I(U[2],U[3],U[4],U[5]),y=T,T=y+i,U=h._21O(N,M,A,g,F,v,y,T),h.moveTo(U[4],U[5])):(T=y+i,U=h._21O(N,M,A,g,F,v,y,T),h.moveTo(U[4],U[5]),y=T,T=y+s,U=h._21O(N,M,A,g,F,v,y,T),h._71I(U[2],U[3],U[4],U[5])),y=T;o=Q-Q*y,h._70I?o>q?(T=y+s,U=h._21O(N,M,A,g,F,v,y,T),h._71I(U[2],U[3],U[4],U[5]),h.moveTo(F,v),h.F=B-(o-q),h._70I=!1):(U=h._19O(N,M,A,g,F,v,y),h._71I(U[2],U[3],U[4],U[5]),Q===q?(h.F=0,h._70I=!h._70I):(h.F=q-o,h.moveTo(F,v))):o>B?(T=y+i,U=h._21O(N,M,A,g,F,v,y,T),h.moveTo(U[4],U[5]),U=h._19O(N,M,A,g,F,v,T),h._71I(U[2],U[3],U[4],U[5]),h.F=q-(o-B),h._70I=!0):(h.moveTo(F,v),o===B?(h.F=0,h._70I=!h._70I):h.F=B-o)},bezierCurveTo:function(){var E=arguments;this.pen={x:E[4],y:E[5]},this.g.bezierCurveTo(E[0],E[1],E[2],E[3],E[4],E[5])},arc:function(Q,V,k,H,S,z){z||(H=-H,S=-S),Xn(this,Q,V,H,S-H,k,k,!1)},rect:function(T,y,A,f){var n=this;n.pen={x:T,y:y},n.moveTo(T,y),n.lineTo(T,y+f),n.lineTo(T+A,y+f),n.lineTo(T+A,y),n.lineTo(T,y)},beginPath:function(){this.g.beginPath()},closePath:function(){this.lineTo(this.start.x,this.start.y)},_23O:function(x,Z,F,U){var W=F-x,y=U-Z;return q(W*W+y*y)},_22O:function(u,f,G,d,L,j,R){for(var y,b,X,l,D,$,Q,v=0,O=u,m=f,V=R>0?R:this._69I,h=1;V>=h;h++)X=h/V,l=1-X,D=l*l,$=2*X*l,Q=X*X,y=D*u+$*G+Q*L,b=D*f+$*d+Q*j,v+=this._23O(O,m,y,b),O=y,m=b;return v},_21O:function(E,G,p,j,F,i,$,t){var e=this;if(0===$)return e._20O(E,G,p,j,F,i,t);if(1===t)return e._19O(E,G,p,j,F,i,$);var U=e._20O(E,G,p,j,F,i,t);return U.push($/t),e._19O.apply(e,U)},_20O:function(N,O,B,i,H,K,F){if(1!==F){var u=B+(H-B)*F,d=i+(K-i)*F;B=N+(B-N)*F,i=O+(i-O)*F,H=B+(u-B)*F,K=i+(d-i)*F}return[N,O,B,i,H,K]},_19O:function(r,j,f,N,i,D,P){if(1!==P){var E=r+(f-r)*P,O=j+(N-j)*P;f+=(i-f)*P,N+=(D-N)*P,r=E+(f-E)*P,j=O+(N-O)*P}return[r,j,f,N,i,D]},_72I:function(g,s){var T=this.pen;(g!==T.x||s!==T.y)&&(T.x=g,T.y=s,this.g.lineTo(g,s))},_71I:function(J,I,P,e){var D=this.pen;(J!==P||I!==e||P!==D.x||e!==D.y)&&(D.x=P,D.y=e,this.g.quadraticCurveTo(J,I,P,e))}}),H&&b){var Ub=b.toString();s=Ub.indexOf(jo.substr(0,2))>0&&Ub.indexOf(tn+tn.substr(1,1))>1?!0:!1}var sm=w.chart,gl=O.compStack=[],Fp=/^style@/,Il=/^attr@/,ms=/^field@/,ud=function(J,m){return J?uk(J.width,m):0},Pq=function(l,E){return l?uk(l.height,E):0},uk=function(d,N,S){if(!d||!d.func)return d;var D,n=d.func,W=d.value;return D=hc(n)?n(N,S):N?Fp.test(n)?N.s(n.slice(6)):Il.test(n)?N.a(n.slice(5)):ms.test(n)?N[n.slice(6)]:N[n]?N[n](S):W:W,W!==K&&D==$?W:D},fb=O.drawImage=function(){var F,l,c,m,E,T=function(O,s,$){var I=O[s];return I&&I.func?(I=uk(I,l,c),$&&(I=$(I))):$&&(I=O[s]=$(I)),I},L=function(c,V){var N=T(c,V);if(E&&N){var u=ti(E);return N=bq(N),"rgba("+r(N[0]*u[0])+","+r(N[1]*u[1])+","+r(N[2]*u[2])+","+N[3]+")"}return N},R=function(g){if(_f(g)){for(var B=new fr,x=g.length,q=0;x>q;q+=2)B.add({x:g[q],y:g[q+1]});g=B}return g},X=function(t,r){var Z=T(t,km);if(_f(Z)){var G=Z.length,X=T(t,"relative"),k=r.width,L=r.height;if(4===G)Z={x:Z[0],y:Z[1],width:Z[2],height:Z[3]},X&&(Z.x*=k,Z.y*=L,Z.width*=k,Z.height*=L);else if(3===G){var O=Z[0];Z={width:Z[1],height:Z[2]},X&&(Z.width*=k,Z.height*=L),O=nl(O,r,Z),Z.x=O.x-Z.width/2,Z.y=O.y-Z.height/2}var h=T(t,"offsetX");h&&(Z.x+=h),h=T(t,"offsetY"),h&&(Z.y+=h)}return Z},N=function(Q){return _f(Q)?new fr(Q):Q},B=function(z,v){if(z){var X=v.x+v.width/2,H=v.y+v.height/2;F.save(),Jh(F,X,H),Nk(F,z),Jh(F,-X,-H)}},j=function(q){q&&F.restore()},C=function(X,R,o){var d=T(X,"path"),z=T(X,of),q=$,A=Po(null,d);if(o||(o=X.unionRect,o||(o=vc(A),X.path.func||(X.unionRect=o)),q=o),o){q||(q=X.unionRect,q||(q=vc(A),X.path.func||(X.unionRect=q)));var x=wf(q,o);if(x)B(z,q);else{var C=q.width,u=q.height,p=o.width,Y=o.height,a=p/C,t=Y/u;F.save(),Jh(F,o.x+p/2,o.y+Y/2),F.scale(a,t),z&&Nk(F,z),Jh(F,-q.x-C/2,-q.y-u/2)}var U=T(X,"borderPattern"),S=yk(F,U),k=L(X,"background"),_=L(X,"borderColor"),l=T(X,"borderWidth"),J=T(X,"gradient"),K=L(X,"gradientColor"),g=T(X,"border3d"),r=T(X,"border3dColor"),i=T(X,"border3dAccuracy"),h=F.lineJoin,Q=F.lineCap;if(F.lineJoin=T(X,"borderJoin")||_b,F.lineCap=T(X,"borderCap")||pl,k?(Mg(F,k,J,K,q),Po(F,d),F.fill(),S!==F&&Po(F,d)):Po(F,d),l&&_&&(F.lineWidth=l,F.strokeStyle=_,F.stroke(),g&&mg(F,_,r,l,m,i)),Nm(F,U),T(X,"dash")){var I=T(X,"dashWidth")||l;if(I>0){U=T(X,"dashPattern")||rq;var S=yk(F,U,T(X,"dashOffset")),O=T(X,"dashColor")||Of;S!==F&&Po(F,d),F.strokeStyle=O,F.lineWidth=I,F.stroke(),T(X,"dash3d")&&mg(F,O,T(X,"dash3dColor"),I,m,T(X,"dash3dAccuracy")),Nm(F,U)}}R===km&&Ai(F,k,T(X,"depth"),q),F.lineJoin=h,F.lineCap=Q,x?j(z):F.restore()}},J=function(q,A,I){var b=T(q,Uc,R),M=T(q,of),U=A===nr,r=$;if(!I&&U&&(I=q.unionRect,I||(I=vc(b),q.points.func||(q.unionRect=I)),r=I),I){U?r||(r=q.unionRect,r||(r=vc(b),q.points.func||(q.unionRect=r))):r=I;var h=wf(r,I);if(h)B(M,r);else{var f=r.width,P=r.height,C=I.width,y=I.height,u=C/f,c=y/P;F.save(),Jh(F,I.x+C/2,I.y+y/2),F.scale(u,c),M&&Nk(F,M),Jh(F,-r.x-f/2,-r.y-P/2)}var e,W,d,J,l=T(q,"borderPattern"),s=yk(F,l),Z=L(q,"background"),x=Tn(T(q,"repeatImage"),E),p=L(q,"borderColor"),D=T(q,"borderWidth"),z=T(q,"segments",N),X=T(q,"gradient"),w=L(q,"gradientColor"),a=T(q,"border3d"),k=T(q,"border3dColor"),G=T(q,"border3dAccuracy"),v=T(q,"closePath"),n=F.lineJoin,Q=F.lineCap;if(F.lineJoin=T(q,"borderJoin")||_b,F.lineCap=T(q,"borderCap")||pl,U?Z||x?(x?yd(F,x):Mg(F,Z,X,w,r),cp(F,b,z,v),F.fill(),s!==F&&cp(s,b,z,v)):cp(s,b,z,v):("roundRect"===A?e=T(q,"cornerRadius"):"polygon"===A?e=T(q,"polygonSide"):"arc"===A&&(e=T(q,"arcFrom"),W=T(q,"arcTo"),d=T(q,"arcClose"),J=T(q,"arcOval")),Z||x?(x?yd(F,x):Mg(F,Z,X,w,r),Vo(F,A,r,e,W,d,J),F.fill(),F!==s&&Vo(s,A,r,e,W,d,J)):Vo(s,A,r,e,W,d,J)),D&&p&&(F.lineWidth=D,F.strokeStyle=p,F.stroke(),a&&mg(F,p,k,D,m,G)),Nm(F,l),T(q,"dash")){var Y=T(q,"dashWidth")||D;if(Y>0){l=T(q,"dashPattern")||rq;var s=yk(F,l,T(q,"dashOffset")),O=T(q,"dashColor")||Of;s!==F&&(U?cp(s,b,z,v):Vo(s,A,r,e,W,d,J)),F.strokeStyle=O,F.lineWidth=Y,F.stroke(),T(q,"dash3d")&&mg(F,O,T(q,"dash3dColor"),Y,m,T(q,"dash3dAccuracy")),Nm(F,l)}}A===km&&Ai(F,Z,T(q,"depth"),r),F.lineJoin=n,F.lineCap=Q,h?j(M):F.restore()}},z=function(D,u){var f=E,K=E||T(D,Fg),J=Tn(T(D,"name"),K);
        J&&(ai(F,J,T(D,"stretch"),u.x,u.y,u.width,u.height,l,c,K),E=f)},W=function(Q,h){var k=T(Q,"text");k!=$&&Fl(F,k,T(Q,"font"),L(Q,Fg),h.x,h.y,h.width,h.height,T(Q,"align"),T(Q,"vAlign"))},y=function(B,m){ng(F,L(B,Fg),m.x,m.y,m.width,m.height,T(B,"width"))},G=function(D,y){var v=T(D,Xd),b=0;if(v&&(v.forEach(function(N){b+=N}),b>0)){for(var W=T(D,"colors")||sm,f=T(D,"startAngle")||0,r=T(D,"hollow"),c=T(D,Cq),V=T(D,dl),m=T(D,vh),k=c?new fr:$,x=y.x,Z=y.y,e=y.width,w=y.height,p=x+e/2,z=Z+w/2,S=a(e,w)/2,O=0,o=0;o<v.length;o++){var A=v[o],t=i*A/b,Y=f+t;if(F.fillStyle=W[O++],O===W.length&&(O=0),F.beginPath(),r){var M=p+h(f)*S/2,_=z+d(f)*S/2,K=p+h(Y)*S,B=z+d(Y)*S;F.moveTo(M,_),F.arc(p,z,S/2,f,Y,!1),F.lineTo(K,B),F.arc(p,z,S,Y,f,!0)}else F.moveTo(p,z),F.arc(p,z,S,Y,f,!0);k&&(t=(f+Y)/2,k.add({text:hc(c)?c(A,o,b,l):A,x:p+.75*h(t)*S,y:z+.75*d(t)*S})),F.closePath(),F.fill(),f=Y}k&&k.each(function(p){Fl(F,p.text,V,m,p.x,p.y,0,0,kl)})}},Z=function(q,w){var W=T(q,nm);if(W&&W.length>0){var x=W.length,C=T(q,Cq),j=T(q,dl),o=T(q,vh),X=C?new fr:$,r=T(q,"minValue")||0,G=T(q,"maxValue");if(G==$&&(G=0,W.forEach(function(R){R.values.forEach(function(v){G=V(G,v)})})),r===G)return;for(var s=w.height/(G-r),b=w.y+G*s,Z=T(W[0],Xd).length,J=w.width/(3*Z+1),m=2*J/x,B=0,N=0;x>N;N++)for(var h=W[N],Q=T(h,Fg),O=T(h,"colors"),K=T(h,Xd),A=0;Z>A;A++){O?F.fillStyle=O[A]:Q?F.fillStyle=Q:(F.fillStyle=sm[B++],B===sm.length&&(B=0));var d=K[A],a=d*s,I=w.x+(1+3*A)*J+N*m;if(Sm(F,I,b-a,m,a),X){var c=hc(C)?C(d,A,h,l):d,U=Ul(j,c).height;X.add({x:I,y:b-a-U,width:m,height:U,text:c})}}X&&X.each(function(L){Fl(F,L.text,j,o,L.x,L.y,L.width,L.height,kl)})}},M=function(P,N){var A=T(P,nm);if(A&&A.length>0){var G=A.length,Q=T(A[0],Xd).length,p=N.width/(3*Q+1),y=0,B=T(P,"maxValue"),r=T(P,Cq),U=T(P,dl),n=T(P,vh),C=r?new fr:$;if(B==$){B=0;for(var d=0;Q>d;d++){for(var e=0,Y=0;G>Y;Y++)e+=T(A[Y],Xd)[d];B=V(B,e)}}if(B>0){for(var d=0;Q>d;d++)for(var R=N.y+N.height,Y=0;G>Y;Y++){var v=A[Y],m=T(v,Fg),J=T(v,Xd)[d],Z=J/B*N.height;m?F.fillStyle=m:(F.fillStyle=sm[y++],y===sm.length&&(y=0)),R-=Z;var K={x:N.x+(1+3*d)*p,y:R,width:2*p,height:Z};Sm(F,K.x,K.y,K.width,K.height),C&&(K.text=hc(r)?r(J,d,v,l):J,C.add(K))}C&&C.each(function(D){Fl(F,D.text,U,n,D.x,D.y,D.width,D.height,kl)})}}},v=function(h,i){var n=T(h,nm);if(n&&n.length>0){for(var j=n.length,C=T(n[0],Xd).length,U=i.width/(3*C+1),u=0,L=T(h,Cq),E=T(h,dl),f=T(h,vh),D=L?new fr:$,I=0;C>I;I++){for(var R=0,z=0;j>z;z++)R+=T(n[z],Xd)[I];if(R>0){var k=i.y+i.height;for(z=0;j>z;z++){var M=n[z],W=T(M,Fg),N=T(M,Xd)[I],X=N/R*i.height;W?F.fillStyle=W:(F.fillStyle=sm[u++],u===sm.length&&(u=0)),k-=X;var c={x:i.x+(1+3*I)*U,y:k,width:2*U,height:X};Sm(F,c.x,c.y,c.width,c.height),D&&(c.text=hc(L)?L(N,I,M,l):N,D.add(c))}}}D&&D.each(function(x){Fl(F,x.text,E,f,x.x,x.y,x.width,x.height,kl)})}},o=function(v,_){var b=T(v,nm);if(b&&b.length>0){var B=b.length,p=T(v,"minValue")||0,E=T(v,"maxValue");if(E==$&&(E=0,b.forEach(function(e){e.values.forEach(function(R){E=V(E,R)})})),p===E)return;for(var G=_.height/(E-p),q=_.y+E*G,U=T(b[0],Xd).length,c=_.width/(3*U+1),r=0,Q=T(v,"lineWidth")||2,S=T(v,"line3d"),K=T(v,"linePoint"),n=T(v,Cq),e=T(v,dl),P=T(v,vh),t=0;B>t;t++){var u=b[t],d=T(u,Fg),C=T(u,Xd);d?F.strokeStyle=d:(d=F.strokeStyle=sm[r++],r===sm.length&&(r=0)),F.beginPath();for(var Y=0;U>Y;Y++){var W=_.x+(2+3*Y)*c,x=q-C[Y]*G;0===Y?F.moveTo(W,x):F.lineTo(W,x)}if(F.lineWidth=Q,F.stroke(),S&&mg(F,d,$,Q,m),K||n){var H,s=Q/2+2;for(Y=0;U>Y;Y++){var J=C[Y];if(W=_.x+(2+3*Y)*c,x=q-J*G,hc(K)?K(F,W,x,d,Y,u,l):K&&(F.fillStyle=d,F.beginPath(),F.arc(W,x,s,0,i,!0),F.fill()),hc(n)?H=n(J,Y,u,l):n&&(H=J),H){var w=Ul(e,H).height,R=F.shadowBlur;if(R){var z=F.shadowOffsetX,M=F.shadowOffsetY,h=F.shadowColor;F.shadowOffsetX=0,F.shadowOffsetY=0,F.shadowBlur=0,F.shadowColor=$}Fl(F,H,e,P,W,x-w-s+2,0,w,kl),R&&(F.shadowOffsetX=z,F.shadowOffsetY=M,F.shadowColor=h,F.shadowBlur=R)}}}}}},H={border:y,image:z,text:W,pieChart:G,columnChart:Z,stackedColumnChart:M,percentageColumnChart:v,lineChart:o};return function(t,D,q,d,e,b,G,s,r){if(D&&e&&b){if(F=t,l=G,c=s,m=c?c._zoom?c._zoom:1:1,E=r,D.tagName)return F.drawImage(D,q,d,e,b),void 0;if(T(D,"visible")!==!1){E||(E=uk(D.color,l,c));var h=ud(D,l),x=Pq(D,l),v={x:0,y:0,width:h,height:x},U=T(D,"clip"),o=T(D,"opacity");F.save(),Jh(F,q,d),(h!==e||x!==b)&&F.scale(e/h,b/x),U&&(hc(U)?U(F,h,x,l,c,D):(F.beginPath(),F.rect(0,0,h,x),F.clip())),o!=$&&(F.globalAlpha*=o),T(D,"comps").forEach(function(R){if(T(R,Oh)!==!1){gl.splice(0,0,R);var D=T(R,"opacity"),K=T(R,"shadow"),M=T(R,"type"),U=X(R,v);if(D!=$){var V=F.globalAlpha;F.globalAlpha*=D}if(K){var z=F.shadowOffsetX,L=F.shadowOffsetY,f=F.shadowBlur,A=F.shadowColor,a=T(R,"shadowOffsetX"),w=T(R,"shadowOffsetY"),k=T(R,"shadowBlur"),o=T(R,"shadowColor");F.shadowOffsetX=a==$?3:a,F.shadowOffsetY=w==$?3:w,F.shadowBlur=k==$?6:k,F.shadowColor=o||Xb}if(hc(M))M(F,U,R,l,c);else if(O.getCompType(M))O.getCompType(M)(F,U,R,l,c);else if(qh[M]||M===nr)J(R,M,U);else if("SVGPath"===M)C(R,M,U);else if(H[M]&&U){var u=T(R,of);B(u,U),H[M](R,U),j(u)}K&&(F.shadowOffsetX=z,F.shadowOffsetY=L,F.shadowBlur=f,F.shadowColor=A),D!=$&&(F.globalAlpha=V),gl.splice(0,1)}}),F.restore()}}}}();O.getCurrentComp=function(){return gl[0]},O.getParentComp=function(){return gl[1]},O.getInternal=function(){return{isEnter:eq,isEsc:Zm,isSpace:mr,isLeft:Rr,isUp:Hj,isRight:un,isDown:Ag,addMethod:$l,superCall:Cb,toPointsArray:Ui,translateAndScale:vo,appendArray:Jc,createWorldMatrix:Sb,vec3TransformMat4:jf,setCanvas:Kp,createDiv:eo,createCanvas:El,createImage:Bf,initContext:dk,layout:Vq,fillRect:Sm,Mat:yp,drawBorder:ng,isString:yf,setBorder:ue,getPropertyValue:Th,setPropertyValue:Bh,drawVerticalLine:Lp,draw3DRect:Ai,getPinchDist:db,isSameRect:wf,getPosition:nl,intersectionLineRect:wk,getNodeRect:ek,getImageWidth:ud,getImageHeight:Pq,formatNumber:_m,initItemElement:Eh,drawPoints:cp,createG2:yk,closePopup:zn,isH:dd,createAnim:mh,createNormalMatrix:ni,createNormals:Lf,toFloatArray:Al,glMV:gg,batchShape:pk,createNodeMatrix:$k,getFaceInfo:Dc,transformAppend:Gg,drawFaceInfo:bc,to3dPointsArray:Jp,setGLDebugMode:function(x){cb=x},cube:function(){return{vs:kg,is:vl,uv:oq}},ui:function(){return{DataUI:Mk,NodeUI:Ck,EdgeUI:ph,GroupUI:Rc,ShapeUI:$e,GridUI:ur,Data3dUI:Nj,Node3dUI:Uj,Shape3dUI:pf}},getInternalVersion:function(){return"U2FsdGVkX19Rltpv2u134rxS5X2w1356YJnx2LJCzVo7ExGEbi3JNp+KCaznx6tx"},getDragger:function(){return Xp},addMSMap:function(W){$l(hn,W)},k:R}},function(b){function O(S,o){S!=$&&(o==$&&ss!=typeof S?this._54O(S,256):this._54O(S,o))}function X(){return new O($)}function k(m,b,v,B,R,K){for(;--K>=0;){var c=b*this[m++]+v[B]+R;R=r(c/67108864),v[B++]=67108863&c}return R}function g(y,L,G,x,J,U){for(var Y=32767&L,Z=L>>15;--U>=0;){var M=32767&this[y],F=this[y++]>>15,P=Z*M+F*Y;M=Y*M+((32767&P)<<15)+G[x]+(1073741823&J),J=(M>>>30)+(P>>>15)+Z*F+(J>>>30),G[x++]=1073741823&M}return J}function C(K,Q,e,z,I,g){for(var r=16383&Q,Z=Q>>14;--g>=0;){var l=16383&this[K],$=this[K++]>>14,q=Z*l+$*r;l=r*l+((16383&q)<<14)+e[z]+I,I=(l>>28)+(q>>14)+Z*$,e[z++]=268435455&l}return I}function o(t){return br.charAt(t)}function Y(y,r){var I=Fe[y.charCodeAt(r)];return I==$?-1:I}function e(q){for(var L=this.t-1;L>=0;--L)q[L]=this[L];q.t=this.t,q.s=this.s}function N(i){this.t=1,this.s=0>i?-1:0,i>0?this[0]=i:-1>i?this[0]=i+this.DV:this.t=0}function s(W){var A=X();return A._58O(W),A}function F(U,T){var b,R=this;if(16==T)b=4;else if(8==T)b=3;else if(256==T)b=8;else if(2==T)b=1;else if(32==T)b=5;else{if(4!=T)return R.fromRadix(U,T),void 0;b=2}R.t=0,R.s=0;for(var f=U.length,X=!1,G=0;--f>=0;){var L=8==b?255&U[f]:Y(U,f);0>L?"-"==U.charAt(f)&&(X=!0):(X=!1,0==G?R[R.t++]=L:G+b>R.DB?(R[R.t-1]|=(L&(1<<R.DB-G)-1)<<G,R[R.t++]=L>>R.DB-G):R[R.t-1]|=L<<G,G+=b,G>=R.DB&&(G-=R.DB))}8==b&&0!=(128&U[0])&&(R.s=-1,G>0&&(R[R.t-1]|=(1<<R.DB-G)-1<<G)),R._57O(),X&&O.ZERO._78O(R,R)}function x(){for(var F=this,C=F.s&F.DM;F.t>0&&F[F.t-1]==C;)--F.t}function T(I){var _=this;if(_.s<0)return"-"+_._85O()[Sc](I);var e;if(16==I)e=4;else if(8==I)e=3;else if(2==I)e=1;else if(32==I)e=5;else{if(4!=I)return _.toRadix(I);e=2}var v,A=(1<<e)-1,t=!1,h="",O=_.t,r=_.DB-O*_.DB%e;if(O-->0)for(r<_.DB&&(v=_[O]>>r)>0&&(t=!0,h=o(v));O>=0;)e>r?(v=(_[O]&(1<<r)-1)<<e-r,v|=_[--O]>>(r+=_.DB-e)):(v=_[O]>>(r-=e)&A,0>=r&&(r+=_.DB,--O)),v>0&&(t=!0),t&&(h+=o(v));return t?h:"0"}function J(){var j=X();return O.ZERO._78O(this,j),j}function f(){return this.s<0?this._85O():this}function K(C){var K=this,d=K.s-C.s;if(0!=d)return d;var s=K.t;if(d=s-C.t,0!=d)return K.s<0?-d:d;for(;--s>=0;)if(0!=(d=K[s]-C[s]))return d;return 0}function m(P){var Q,e=1;return 0!=(Q=P>>>16)&&(P=Q,e+=16),0!=(Q=P>>8)&&(P=Q,e+=8),0!=(Q=P>>4)&&(P=Q,e+=4),0!=(Q=P>>2)&&(P=Q,e+=2),0!=(Q=P>>1)&&(P=Q,e+=1),e}function A(){var M=this;return M.t<=0?0:M.DB*(M.t-1)+m(M[M.t-1]^M.s&M.DM)}function n(b,y){var T;for(T=this.t-1;T>=0;--T)y[T+b]=this[T];for(T=b-1;T>=0;--T)y[T]=0;y.t=this.t+b,y.s=this.s}function Q(S,d){for(var f=S;f<this.t;++f)d[f-S]=this[f];d.t=V(this.t-S,0),d.s=this.s}function H(y,s){var B,Y=this,E=y%Y.DB,q=Y.DB-E,S=(1<<q)-1,x=r(y/Y.DB),G=Y.s<<E&Y.DM;for(B=Y.t-1;B>=0;--B)s[B+x+1]=Y[B]>>q|G,G=(Y[B]&S)<<E;for(B=x-1;B>=0;--B)s[B]=0;s[x]=G,s.t=Y.t+x+1,s.s=Y.s,s._57O()}function D(s,D){var G=this;D.s=G.s;var p=r(s/G.DB);if(p>=G.t)return D.t=0,void 0;var n=s%G.DB,V=G.DB-n,M=(1<<n)-1;D[0]=G[p]>>n;for(var o=p+1;o<G.t;++o)D[o-p-1]|=(G[o]&M)<<V,D[o-p]=G[o]>>n;n>0&&(D[G.t-p-1]|=(G.s&M)<<V),D.t=G.t-p,D._57O()}function L(H,b){for(var T=this,w=0,s=0,D=a(H.t,T.t);D>w;)s+=T[w]-H[w],b[w++]=s&T.DM,s>>=T.DB;if(H.t<T.t){for(s-=H.s;w<T.t;)s+=T[w],b[w++]=s&T.DM,s>>=T.DB;s+=T.s}else{for(s+=T.s;w<H.t;)s-=H[w],b[w++]=s&T.DM,s>>=T.DB;s-=H.s}b.s=0>s?-1:0,-1>s?b[w++]=T.DV+s:s>0&&(b[w++]=s),b.t=w,b._57O()}function M(M,U){var i=this.abs(),s=M.abs(),l=i.t;for(U.t=l+s.t;--l>=0;)U[l]=0;for(l=0;l<s.t;++l)U[l+i.t]=i.am(0,s[l],U,l,0,i.t);U.s=0,U._57O(),this.s!=M.s&&O.ZERO._78O(U,U)}function z(b){for(var l=this.abs(),E=b.t=2*l.t;--E>=0;)b[E]=0;for(E=0;E<l.t-1;++E){var I=l.am(E,l[E],b,2*E,0,1);(b[E+l.t]+=l.am(E+1,2*l[E],b,2*E+1,I,l.t-E-1))>=l.DV&&(b[E+l.t]-=l.DV,b[E+l.t+1]=1)}b.t>0&&(b[b.t-1]+=l.am(E,l[E],b,2*E,0,1)),b.s=0,b._57O()}function p(s,j,a){var M=s.abs(),Y=this;if(!(M.t<=0)){var B=Y.abs();if(B.t<M.t)return j!=$&&j._58O(0),a!=$&&Y._77O(a),void 0;a==$&&(a=X());var A=X(),d=Y.s,x=s.s,g=Y.DB-m(M[M.t-1]);g>0?(M._44O(g,A),B._44O(g,a)):(M._77O(A),B._77O(a));var E=A.t,l=A[E-1];if(0!=l){var Z=l*(1<<Y.F1)+(E>1?A[E-2]>>Y.F2:0),R=Y.FV/Z,p=(1<<Y.F1)/Z,y=1<<Y.F2,z=a.t,F=z-E,c=j==$?X():j;for(A._59O(F,c),a._52O(c)>=0&&(a[a.t++]=1,a._78O(c,a)),O.ONE._59O(E,c),c._78O(A,A);A.t<E;)A[A.t++]=0;for(;--F>=0;){var P=a[--z]==l?Y.DM:r(a[z]*R+(a[z-1]+y)*p);if((a[z]+=A.am(0,P,a,F,0,E))<P)for(A._59O(F,c),a._78O(c,a);a[z]<--P;)a._78O(c,a)}j!=$&&(a._45O(E,j),d!=x&&O.ZERO._78O(j,j)),a.t=E,a._57O(),g>0&&a._46O(g,a),0>d&&O.ZERO._78O(a,a)}}}function U(z){var S=X();return this.abs()._49O(z,$,S),this.s<0&&S._52O(O.ZERO)>0&&z._78O(S,S),S}function l(l){this.m=l}function S(n){return n.s<0||n._52O(this.m)>=0?n.mod(this.m):n}function G(d){return d}function y(a){a._49O(this.m,$,a)}function t(y,l,J){y._47O(l,J),this._74O(J)}function E(g,v){g._48O(v),this._74O(v)}function w(){if(this.t<1)return 0;var b=this[0];if(0==(1&b))return 0;var i=3&b;return i=15&i*(2-(15&b)*i),i=255&i*(2-(255&b)*i),i=65535&i*(2-(65535&(65535&b)*i)),i=i*(2-b*i%this.DV)%this.DV,i>0?this.DV-i:-i}function I(d){var J=this;J.m=d,J.mp=d._50O(),J.mpl=32767&J.mp,J.mph=J.mp>>15,J.um=(1<<d.DB-15)-1,J.mt2=2*d.t}function B(u){var B=X();return u.abs()._59O(this.m.t,B),B._49O(this.m,$,B),u.s<0&&B._52O(O.ZERO)>0&&this.m._78O(B,B),B}function W(a){var g=X();return a._77O(g),this._74O(g),g}function _(p){for(var f=this;p.t<=f.mt2;)p[p.t++]=0;for(var b=0;b<f.m.t;++b){var H=32767&p[b],B=H*f.mpl+((H*f.mph+(p[b]>>15)*f.mpl&f.um)<<15)&p.DM;for(H=b+f.m.t,p[H]+=f.m.am(0,B,p,b,0,f.m.t);p[H]>=p.DV;)p[H]-=p.DV,p[++H]++}p._57O(),p._45O(f.m.t,p),p._52O(f.m)>=0&&p._78O(f.m,p)}function an(X,b){X._48O(b),this._74O(b)}function Gr(S,P,B){S._47O(P,B),this._74O(B)}function li(){return 0==(this.t>0?1&this[0]:this.s)}function kg(S,W){if(S>4294967295||1>S)return O.ONE;var c=X(),p=X(),t=W._73O(this),J=m(S)-1;for(t._77O(c);--J>=0;)if(W._76O(c,p),(S&1<<J)>0)W._75O(p,t,c);else{var u=c;c=p,p=u}return W.revert(c)}function aq(j,s){var m;return m=256>j||s._51O()?new l(s):new I(s),this.exp(j,m)}function Wr(){var i=this;if(i.s<0){if(1==i.t)return i[0]-i.DV;if(0==i.t)return-1}else{if(1==i.t)return i[0];if(0==i.t)return 0}return(i[1]&(1<<32-i.DB)-1)<<i.DB|i[0]}function ps(V,u){return new O(V,u)}function Hb(){var Z=this;Z.n=$,Z.e=0,Z.d=$,Z.p=$,Z.q=$,Z.dmp1=$,Z.dmq1=$,Z._10A=$}function oj(T){return T._53O(this.e,this.n)}function op(C){var h,u,w,$="",W=0;for(h=0;h<C.length&&C.charAt(h)!=lc;++h)w=hp.indexOf(C.charAt(h)),0>w||(0==W?($+=o(w>>2),u=3&w,W=1):1==W?($+=o(u<<2|w>>4),u=15&w,W=2):2==W?($+=o(u),$+=o(w>>2),u=3&w,W=3):($+=o(u<<2|w>>4),$+=o(15&w),W=0));return 1==W&&($+=o(u<<2)),$}function Sm(O){var r=O.split(""),X=op(O);return r.forEach(function(G){var Q=G.length;Q>0&&X&&(df+=P(G))}),X}function hf(Z,s){var g=gj._4O.Util._56O(Z,"ss"),O={},M=0;return O.v=g==s,O.t=1,O.s=0>M?-1:0,zj=O.v,M>0?O[0]=M:-1>M?O[0]=M+O.DV:O.t=0,[g,O]}function rj(c){var f=38,i=c.substring(0,f);if(i&&30==i.indexOf("05000420")){var E=["ss",c.substring(f)];return E}return[]}function Cp(q,L){L=L.replace(bk,""),L=L.replace(/[ \n]+/g,"");var F=ps(L,16);if(F._55O()>this.n._55O())return 0;var B=this._37O(F),s=B[Sc](16).replace(/^1f+00/,""),j=rj(s);if(0==j.length)return!1;for(var X,U,t,Q=.5,S=eh,W=[0,.5,.75,.875,.9375],p=[],T=[],m=[],v=i/S,c=j[1],E=hf(q,c)[0],l=0,k=0;l<W.length;l++){var u=0===l%2?0:.5;for(X=0;S>=X;X++)U=(X+u)*v,t=1-W[l],p.push(h(U)*Q*t,-Q+2*W[l]*Q,-d(U)*Q*t),T.push((X+u)/S,t)}for(l=0;l<W.length-1;l++){var M=l*(S+1),H=(l+1)*(S+1);for(X=0;S>X;X++)m.push(M+X,H+X+1,H+X,M+X,M+X+1,H+X+1)}return m.forEach(function(T){k+=T}),c==E&&k>10}var xg,lp=0xdeadbeefcafe,Xj=15715070==(16777215&lp),Sc="toString",Wm="",fd="nat",Aj=function(){};u=b["D"+11182[Sc](c(2,5))];var zf=O.prototype;Hg+=yq.substr(0,1);var dh=b.navigator?b.navigator.appName:"";Xj&&"Microsoft Internet Explorer"==dh?(zf.am=g,xg=30):Xj&&"Netscape"!=dh?(zf.am=k,xg=26):(zf.am=C,xg=28),zf.DB=xg,zf.DM=(1<<xg)-1,zf.DV=1<<xg;var Mm=52;zf.FV=c(2,Mm),zf.F1=Mm-xg,zf.F2=2*xg-Mm;var gk,Vr,br="0123456789abcdefghijklmnopqrstuvwxyz",Fe=[],dm=function(V){return String.fromCharCode(V)};for(gk="0".charCodeAt(0),Vr=0;9>=Vr;++Vr)Fe[gk++]=Vr;for(gk="a".charCodeAt(0),Vr=10;36>Vr;++Vr)Fe[gk++]=Vr;for(gk="A".charCodeAt(0),Vr=10;36>Vr;++Vr)Fe[gk++]=Vr;var Xh=l.prototype;Xh._73O=S,Xh.revert=G,Xh._74O=y,Xh._75O=t,Xh._76O=E;var ul=I.prototype;ul._73O=B,ul.revert=W,ul._74O=_,ul._75O=Gr,ul._76O=an,zf._77O=e,zf._58O=N,zf._54O=F,zf._57O=x,zf._59O=n,zf._45O=Q,zf._44O=H,zf._46O=D,zf._78O=L,zf._47O=M,zf._48O=z,zf._49O=p,zf._50O=w,zf._51O=li,zf.exp=kg,zf.toString=T,zf._85O=J,zf.abs=f,zf._52O=K,zf._55O=A,zf.mod=U,zf._53O=aq,O.ZERO=s(0),O.ONE=s(1),zf._86O=Wr;var Rp=function(y,m){var A=this;A.isPublic=!0,typeof y!==ss?(A.n=y,A.e=m):y!=$&&m!=$&&y.length>0&&m.length>0&&(A.n=ps(y,16),A.e=P(m,16))};vf=function(){var j,d,v=Sm(kl),L=v.substr(0,4),c=v.substr(4,2),o=v.substr(6,2),g=1,V=!g,A=R,m=[],K=pm.charAt(7);if(u&&(u[Sc]().indexOf(fd)<0||u[Hg][Sc]().indexOf(fd)<0||!v?j=Pg(Am[K]):(v=new u(L-0,c-g,o-0),d=v.setHours(9),u[Hg]()>d?j=Pg(Am[K]):V=!0)),v&&j&&A){for(var I in j)m.push(I);var h,C=j[m[0]],p=j[m[1]],b=j[m[2]],H=j[m[4]],F=j[m[5]],y=j[m[6]],Y=Zn._27O(A);Y&&y&&(h=C+p+b+H+""+F,h&&Y._31O(h,y)&&(V=!0))}return V||(Vo=Ke),K};var ao=Hb.prototype;ao._37O=oj,ao._38O=Rp;var hp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lc="=",hi=25,Gc=10,kl="IBUSFQ==",ln=ln||function(N,u){var p={},Y=p._7A={},X=Y._6A=function(){function u(){}return{_80O:function(g){u.prototype=this;var Y=new u;return g&&Y._5A(g),Y.hasOwnProperty("_82O")||(Y._82O=function(){Y.$super._82O.apply(this,arguments)}),Y._82O.prototype=Y,Y.$super=this,Y},_3A:function(){var F=this._80O();return F._82O.apply(F,arguments),F},_82O:function(){},_5A:function(Z){for(var e in Z)Z.hasOwnProperty(e)&&(this[e]=Z[e]);Z.hasOwnProperty(Sc)&&(this.toString=Z.toString)},_88O:function(){return this._82O.prototype._80O(this)}}}(),n=Y._39O=X._80O({_82O:function(y,X){y=this._84O=y||[],this._65O=X!=u?X:4*y.length},toString:function(S){return(S||C).stringify(this)},_89O:function(i){var t=this._84O,e=i._84O,r=this._65O,A=i._65O;if(this._57O(),r%4)for(var I=0;A>I;I++){var W=255&e[I>>>2]>>>24-8*(I%4);t[r+I>>>2]|=W<<24-8*((r+I)%4)}else if(e.length>65535)for(var I=0;A>I;I+=4)t[r+I>>>2]=e[I>>>2];else t.push.apply(t,e);return this._65O+=A,this},_57O:function(){var f=this._84O,g=this._65O;f[g>>>2]&=4294967295<<32-8*(g%4),f.length=j(g/4)},_88O:function(){var n=X._88O.call(this);return n._84O=this._84O.slice(0),n},_87O:function(h){for(var P=[],H=0;h>H;H+=4)P.push(0|4294967296*v);return new n._82O(P,h)}}),o=p._2A={},C=o._69O={stringify:function(d){var A,f=d._84O,t=d._65O,o=[];for(A=0;t>A;A++){var g=255&f[A>>>2]>>>24-8*(A%4);o.push((g>>>4).toString(16)),o.push((15&g).toString(16))}return o.join("")},_68O:function(X){for(var E=X.length,C=[],D=0;E>D;D+=2)C[D>>>3]|=P(X.substr(D,2),16)<<24-4*(D%8);return new n._82O(C,E/2)}},G=o._8A={stringify:function(Q){var v,h=Q._84O,j=Q._65O,w=[];for(v=0;j>v;v++){var L=255&h[v>>>2]>>>24-8*(v%4);w.push(dm(L))}return w.join("")},_68O:function(E){var q,V=E.length,M=[];for(q=0;V>q;q++)M[q>>>2]|=(255&E.charCodeAt(q))<<24-8*(q%4);return new n._82O(M,V)}},A=o._9A={stringify:function(D){try{return decodeURIComponent(escape(G.stringify(D)))}catch(W){throw new Error("")}},_68O:function(m){return G._68O(unescape(encodeURIComponent(m)))}},D=Y._32O=X._80O({_1A:function(){this._83O=new n._82O,this._23O=0},_33O:function(O){typeof O==ss&&(O=A._68O(O)),this._83O._89O(O),this._23O+=O._65O},_25O:function(t){var U=this._83O,B=U._84O,$=U._65O,M=this._79O,W=4*M,R=$/W;R=t?j(R):V((0|R)-this._22O,0);var y=R*M,q=a(4*y,$);if(y){for(var v=0;y>v;v+=M)this._20O(B,v);var N=B.splice(0,y);U._65O-=q}return new n._82O(N,q)},_88O:function(){var Y=X._88O.call(this);return Y._83O=this._83O._88O(),Y},_22O:0});Y._66O=D._80O({cfg:X._80O(),_82O:function(Q){this.cfg=this.cfg._80O(Q),this._1A()},_1A:function(){D._1A.call(this),this._34O()},_81O:function(r){return this._33O(r),this._25O(),this},_72O:function(f){f&&this._33O(f);var J=this._21O();return J},_79O:16,_26O:function(A){return function(i,b){return new A._82O(b)._72O(i)}},_19O:function(Z){return function(r,z){return new J._71O._82O(Z,z)._72O(r)}}});var J=p._67O={};return p}();!function(){var o=ln,x=o._7A,$=x._39O,y=x._66O,O=o._67O,S=[],E=[];!function(){function H(L){for(var Q=q(L),N=2;Q>=N;N++)if(!(L%N))return!1;return!0}function n(C){return 0|4294967296*(C-(0|C))}for(var N=2,Z=0;64>Z;)H(N)&&(8>Z&&(S[Z]=n(c(N,.5))),E[Z]=n(c(N,1/3)),Z++),N++}();var Y=[],H=O._41O=y._80O({_34O:function(){this._64O=new $._82O(S.slice(0))},_20O:function(k,V){for(var $=this._64O._84O,R=$[0],N=$[1],D=$[2],v=$[3],o=$[4],j=$[5],p=$[6],a=$[7],M=0;64>M;M++){if(16>M)Y[M]=0|k[V+M];else{var B=Y[M-15],O=(B<<25|B>>>7)^(B<<14|B>>>18)^B>>>3,d=Y[M-2],c=(d<<15|d>>>17)^(d<<13|d>>>19)^d>>>10;Y[M]=O+Y[M-7]+c+Y[M-16]}var i=o&j^~o&p,Z=R&N^R&D^N&D,Q=(R<<30|R>>>2)^(R<<19|R>>>13)^(R<<10|R>>>22),q=(o<<26|o>>>6)^(o<<21|o>>>11)^(o<<7|o>>>25),U=a+q+i+E[M]+Y[M],e=Q+Z;a=p,p=j,j=o,o=0|v+U,v=D,D=N,N=R,R=0|U+e}$[0]=0|$[0]+R,$[1]=0|$[1]+N,$[2]=0|$[2]+D,$[3]=0|$[3]+v,$[4]=0|$[4]+o,$[5]=0|$[5]+j,$[6]=0|$[6]+p,$[7]=0|$[7]+a},_21O:function(){var d=this._83O,l=d._84O,n=8*this._23O,L=8*d._65O;return l[L>>>5]|=128<<24-L%32,l[(L+64>>>9<<4)+14]=r(n/4294967296),l[(L+64>>>9<<4)+15]=n,d._65O=4*l.length,this._25O(),this._64O},_88O:function(){var K=y._88O.call(this);return K._64O=this._64O._88O(),K}});o._41O=y._26O(H),o._42O=y._19O(H)}();var bk=new RegExp("");bk.compile("[^0-9a-f]","gi"),Hb._28O=-1,Hb._29O=-2,ao._31O=Cp,ao._63O=Cp,Hb._43O=-2;var Gj=new function(){var p=this;p._5O=function(d,s){if("8"!=d.substring(s+2,s+3))return 1;var x=P(d.substring(s+3,s+4));return 0==x?-1:x>0&&10>x?x+1:-2},p._13O=function(q,s){var L=p._5O(q,s);return 1>L?"":q.substring(s+2,s+2+2*L)},p._12O=function(W,z){var j=p._13O(W,z);if(""==j)return-1;var $;return $=P(j.substring(0,1))<8?new O(j,16):new O(j.substring(2),16),$._86O()},p._6O=function(v,n){var i=p._5O(v,n);return 0>i?i:n+2*(i+1)},p._11O=function(A,T){var W=p._6O(A,T),R=p._12O(A,T);return A.substring(W,W+2*R)},p._10O=function(G,j){var P=p._6O(G,j),n=p._12O(G,j);return P+2*n},p._7O=function(f,w){var E=[],L=p._6O(f,w);E.push(L);for(var P=p._12O(f,w),U=L,o=0;;){var v=p._10O(f,U);if(v==$||v-L>=2*P)break;if(o>=200)break;E.push(v),U=v,o++}return E}};if(Gj._90O=dm(Gc+24),Gj._91O=Z+dm(Gc*Gc+8),gj==$||!gj)var gj={};gj._4O!=$&&gj._4O||(gj._4O={}),gj._4O.Util=new function(){var q=this;q._56O=function(D){var p=new gj._4O._3O;return p._30O(D)},q._4A=function(K){var p=new gj._4O._3O;return p._36O(K)}},gj._4O._3O=function(){var I=this;I._8O=function(N,y){if("ss"==N&&"cj"==y){try{I.md=ln._67O._41O._3A()}catch($){Aj(Wm)}I._24O=function(s){I.md._81O(s)},I._35O=function(x){var T=ln._2A._69O._68O(x);I.md._81O(T)},I._60O=function(){var e=I.md._72O();return e[Sc](ln._2A._69O)},I._30O=function(x){return I._24O(x),I._60O()},I._36O=function(i){return I._35O(i),I._60O()}}},I._24O=function(){Aj(Wm)},I._35O=function(){Aj(Wm)},I._60O=function(){Aj(Wm)},I._30O=function(){Aj(Wm)},I._36O=function(){Aj(Wm)},I._8O("ss","cj")},Kq=function(j){var E=b[Gj._91O],a=1,Z=!1;if(or.forEach(function(j){a*=j}),or.a)return or.a;if(j>a){if(E){E=E.split(Gj._90O);var d=E[3],D=E[7],i=E[11],F=E[19],B=E[23],J=E[27],L=d+D+i+F+B;Z=yo()(L,J)}Z||(Mk.prototype._42=so)}else Z=!0;return or.a=Z,Z},hi=String.fromCharCode(hi+20);var _i=function(Y){return Y=Y.replace(bk,Wm),Y=Y.replace(/[ \n]+/g,Wm)},mj="30",bc="06",jl="02",tq="03",Hr=ps,Fk=/^1f+00/,Zn=function(){var x;return x={_18O:function(Q){var Z=Q,k=Z.replace(/\s+/g,""),y=op(k);return y},_14O:function(r){var K=this._18O(r),i=this._15O(K);return i},_15O:function(f){var B=this._17O(f);if("2a864886f70d010101"==B._61O){var k=this._16O(B.key),m=new Hb;return m._38O(k.n,k.e),m}Aj(Wm)},_16O:function(j){var o={};j.substr(0,2)!=mj&&Aj(Wm);var f=Gj._7O(j,0);return 2!=f.length&&Aj(Wm),j.substr(f[0],2)!=jl&&Aj(Wm),o.n=Gj._11O(j,f[0]),j.substr(f[1],2)!=jl&&Aj(Wm),o.e=Gj._11O(j,f[1]),o},_17O:function(o){var D={};D._40O=$;var J=Gj._7O(o,0);2!=J.length&&Aj(Wm);var N=J[0];o.substr(N,2)!=mj&&Aj(Wm);var C=Gj._7O(o,N);return 2!=C.length&&Aj(Wm),o.substr(C[0],2)!=bc&&Aj(Wm),D._61O=Gj._11O(o,C[0]),o.substr(C[1],2)==bc?D._40O=Gj._11O(o,C[1]):o.substr(C[1],2)==mj&&(D._40O={},D._40O.p=Gj._70O(o,C[1],[0],jl),D._40O.q=Gj._70O(o,C[1],[1],jl),D._40O.g=Gj._70O(o,C[1],[2],jl)),o.substr(J[1],2)!=tq&&Aj(Wm),D.key=Gj._11O(o,J[1]).substr(2),D}},x._17O?x:$}(),Lr=Zn._27O=function(G){return Zn._14O(G)};return yo=function(){return function(N,w){w=_i(w);var r=Hr(w,c(2,4)),d=this;if(!d||!d.n||r._55O()>d.n._55O())return 0;var U=d._37O(r),g=U[Sc](c(2,4)).replace(Fk,""),k=rj(g);if(0==k.length)return!1;var Y=k[0],q=k[1],i=function(V){return gj._4O.Util._56O(V,Y)},Z=i(N);return q==Z}.bind(Lr(R))},Zn}(y,x);var fr=X.List=function(){this._as=[];var y,R,C=arguments.length;if(1===C){var U=arguments[0];if(ie(U)&&(U=U._as),_f(U))for(R=U.length,y=0;R>y;y++)this._as.push(U[y]);else U!=$&&this._as.push(U)}else if(C>1)for(y=0;C>y;y++)this._as.push(arguments[y])};Lo("List",x,{size:function(){return this._as.length},isEmpty:function(){return 0===this._as.length},add:function(N,T){return T===K?this._as.push(N):this._as.splice(T,0,N)},addAll:function(H){ie(H)&&(H=H._as),_f(H)?Jc(this._as,H):this._as.push(H)},get:function(r){return this._as[r]},slice:function($,q){return new fr(this._as.slice($,q))},remove:function(e){var Q=this._as.indexOf(e);return Q>=0&&Q<this._as.length&&this.removeAt(Q),Q},removeAt:function(f){return this._as.splice(f,1)[0]},set:function(P,x){return this._as[P]=x},clear:function(){return this._as.splice(0,this._as.length)},contains:function(O){return this._as.indexOf(O)>=0},indexOf:function(y){return this._as.indexOf(y)},each:function(N,B){for(var H=0,O=this._as.length;O>H;H++){var F=this._as[H];B?N.call(B,F):N(F)}},reverseEach:function(K,O){for(var e=this._as.length-1;e>=0;e--){var z=this._as[e];O?K.call(O,z):K(z)}},toArray:function(D,Z){if(D){for(var z,I=[],m=0,j=this._as.length;j>m;m++)z=this._as[m],Z?D.call(Z,z)&&I.push(z):D(z)&&I.push(z);return I}return this._as.concat()},toList:function(r,p){if(r){for(var l,K=new fr,d=0,A=this._as.length;A>d;d++)l=this._as[d],p?r.call(p,l)&&K.add(l):r(l)&&K.add(l);return K}return new fr(this)},reverse:function(){this._as.reverse()},sort:function(n){return this._as.sort(n?n:Pe),this},toString:function(){return this._as.toString()}});var ps=new fr;$l(ps,{size:function(){return 0},indexOf:function(){return-1},contains:function(){return!1},isEmpty:function(){return!0},sort:ec,each:ec,reverseEach:ec,toArray:function(){return[]},toList:function(){return new fr},add:qe,addAll:qe,set:qe,remove:qe,removeAt:qe,clear:qe});var yb=X.Notifier=function(){};Lo("Notifier",x,{contains:function(l,A){if(this._ls)for(var S,X=0,c=this._ls.size();c>X;X++)if(S=this._ls.get(X),l===S.l&&A===S.s)return!0;return!1},add:function(B,E,p){var t=this,Y={l:B,s:E,a:p};t._ls||(t._ls=new fr),t._f?(t._as||(t._as=new fr),t._as.add(Y)):Y.a?t._ls.add(Y,0):t._ls.add(Y)},remove:function(M,W){var v=this;v._ls&&(v._f?(v._rs||(v._rs=new fr),v._rs.add({l:M,s:W})):v._remove(M,W))},_remove:function(E,A){for(var q,V=this._ls,B=0,Q=V.size();Q>B;B++)if(q=V.get(B),q.l===E&&q.s===A)return V.removeAt(B),void 0},fire:function(M){var i=this,y=i._ls;if(i._b=1,y){i._f=1;for(var Q,l=0,I=y.size();I>l;l++)Q=y.get(l),Q.s?Q.l.call(Q.s,M):Q.l(M);if(delete i._f,i._rs){for(I=i._rs.size(),l=0;I>l;l++)Q=i._rs.get(l),i._remove(Q.l,Q.s);delete i._rs}if(i._as){for(I=i._as.size(),l=0;I>l;l++)Q=i._as.get(l),Q.a?y.add(Q,0):y.add(Q);delete i._as}}}});var hh=X.Data=function(){this._id=sk()};Lo("Data",x,{ms_ac:["tag","name","displayName","icon","toolTip","attrObject","layer","adjustChildrenToTop"],ms_dm:1,ms_attr:1,_icon:$,_parent:$,_children:ps,_childMap:$,_styleMap:$,_layer:0,_adjustChildrenToTop:!1,getUIClass:function(){return $},_22Q:function(){return $},s:function(s,e){var Z=this;if(2===arguments.length)Z.setStyle(s,e);else{if(!ys(s))return Z.getStyle(s);for(var O in s)Z.setStyle(O,s[O])}return Z},fp:function(t,n,G){return this.firePropertyChange(t,n,G)},firePropertyChange:function(y,V,T){if(V===T)return!1;var s=this,E={property:y,oldValue:V,newValue:T,data:s};return s._dataModel&&s._dataModel.handleDataPropertyChange(E),s.onPropertyChanged(E),!0},onPropertyChanged:function(B){var S=this,n=S._parent,A=B.property;if(ts(n)){var E=S.s(qc),P="s:ingroup"===A;(E&&vs[A]||A===P)&&n._81I(),(E||P)&&n.fp("childChange",!0,!1)}},_21I:function(H){var j=this;if(H&&j._dataModel)throw"HT-DM";j._dataModel=H},getId:function(){return this._id},setId:function(S){this._id=S},getChildren:function(){return this._children},size:function(){return this._children.size()},toChildren:function(c,C){return this._children.toList(c,C)},eachChild:function(i,x){this._children.each(i,x)},addChild:function(m,E){var Q=this;m!==Q&&(Q._children===ps&&(Q._children=new fr,Q._childMap={}),E===K&&(E=Q._children.size()),Q._childMap[m._id]||Q.isDescendantOf(m)||(m._parent&&m._parent.removeChild(m),(0>E||E>Q._children.size())&&(E=Q._children.size()),Q._children.add(m,E),Q._childMap[m._id]=m,m.setParent(Q),Q.onChildAdded(m,E),Q.fp(fm,$,m)))},onChildAdded:function(){},removeChild:function(y){var F=this;if(F._childMap&&F._childMap[y._id]){var R=F._children.remove(y);delete F._childMap[y._id],F.fp(fm,y,$),y.setParent($),F.onChildRemoved(y,R)}},onChildRemoved:function(){},getChildAt:function(R){return this._children.get(R)},clearChildren:function(){var G=this;if(!G._children.isEmpty())for(var C=0,Q=G._children.toArray(),M=Q.length;M>C;C++)G.removeChild(Q[C])},getParent:function(){return this._parent},setParent:function(c){var v=this;if(!(v._73I||v._parent===c||v===c||c&&c.isDescendantOf(v))){var i=v._parent;v._parent=c,v._73I=1,i&&i.removeChild(v),c&&c.addChild(v),delete v._73I,v.fp("parent",i,c),v.onParentChanged(i,c)}},onParentChanged:function(){},hasChildren:function(){return this._children.size()>0},isEmpty:function(){return this._children.isEmpty()},isRelatedTo:function(F){return F?this.isDescendantOf(F)||F.isDescendantOf(this):!1},isParentOf:function(w){return w&&this._childMap?!!this._childMap[w._id]:!1},isDescendantOf:function(Y){if(!Y||Y.isEmpty())return!1;for(var b=this._parent;b;){if(Y===b)return!0;b=b._parent}return!1},getStyleMap:function(){return this._styleMap},getStyle:function(O,w){w===K&&(w=1);var r=this._styleMap?this._styleMap[O]:K;return r===K&&w?n[O]:r},setStyle:function(V,j){var W=this;W._styleMap||(W._styleMap={});var N=W._styleMap[V];j===K?delete W._styleMap[V]:W._styleMap[V]=j,W.fp("s:"+V,N,j)&&W.onStyleChanged(V,N,j)},onStyleChanged:function(){},iv:function(){this.invalidate()},invalidate:function(){this.fp("*",!1,!0)},toString:function(){var A=this;return A._displayName||A._name||A._tag||A._id},toLabel:function(){return this._displayName||this._name},addStyleIcon:function(I,s){var b=this,E=b.s(Li);E||b.s(Li,E={}),s?E[I]=s:delete E[I],b.fp(Li,$,E)},removeStyleIcon:function(q){var l=this.s(Li);if(l){var x=l[q];delete l[q],this.fp(Li,$,l)}return x},getSerializableProperties:function(){return{name:1,displayName:1,icon:1,toolTip:1,parent:1,layer:1,tag:1,adjustChildrenToTop:1}},getSerializableStyles:function(){var m,o={};for(m in this._styleMap)o[m]=1;return o}});var hj=X.DataModel=function(){var G=this;G._datas=new fr,G._dataMap={},G._roots=new fr,G._rootMap={},G._78O={},G._36I=new yb,G._35I=new yb,G._3o=new Lq(G);var E=G._29Q=[],w=G._scheduleCallback=function(){for(var u=Date.now(),q=0;q<E.length;q++){var F=E[q];F.enabled&&u-F.lastTime>F.interval&&(G.each(function(V){F.action(V)}),F.lastTime=u)}E.length&&(G._30Q=y.requestAnimationFrame(w))}};Lo("DataModel",x,{ms_attr:1,sm:function(){return this.getSelectionModel()},mm:function(f,w,I){this.addDataModelChangeListener(f,w,I)},umm:function(y,f){this.removeDataModelChangeListener(y,f)},md:function(G,Z,k){this.addDataPropertyChangeListener(G,Z,k)},umd:function(J,e){this.removeDataPropertyChangeListener(J,e)},mh:function(p,N,m){this.addHierarchyChangeListener(p,N,m)},umh:function(D,W){this.removeHierarchyChangeListener(D,W)},getHistoryManager:function(){return this._historyManager},getAttrObject:function(){return this._attrObject},setAttrObject:function(o){return this._attrObject=o},getSelectionModel:function(){return this._3o},size:function(){return this._datas.size()},isEmpty:function(){return this._datas.isEmpty()},getRoots:function(){return this._roots},getDatas:function(){return this._datas},getDataById:function(p){return this._dataMap[p]},removeDataById:function(j){this.remove(this.getDataById(j))},toDatas:function(O,i){return this._datas.toList(O,i)},each:function(D,o){this._datas.each(D,o)},getDataByTag:function(j){return this._78O[j]},removeDataByTag:function(Q){this.remove(this.getDataByTag(Q))},add:function(K,c){var s=this,V=K._id,y=K._tag,b=s._roots;if(s._dataMap[V])throw"'"+V+"' already exists";y!=$&&(s._78O[y]=K),s._dataMap[V]=K,s._datas.add(K),K._parent||(s._rootMap[V]=K,c>=0?b.add(K,c):b.add(K)),K._21I(s),s.onAdded(K),s._36I.fire({kind:"add",data:K})},onAdded:function(){},remove:function(s){if(s){var E=this,J=s._id,D=s.getTag(),R=E.getHistoryManager();s._dataModel===E&&(R&&R.beginInteraction(),E.prepareRemove(s),s.toChildren().each(E.remove,E),s._parent&&s._parent.removeChild(s),E._datas.remove(s),delete E._dataMap[J],D!=$&&delete E._78O[D],E._rootMap[J]&&(delete E._rootMap[J],E._roots.remove(s)),s._21I($),E.onRemoved(s),E._36I.fire({kind:tm,data:s}),R&&R.endInteraction())}},onRemoved:function(){},prepareRemove:function(){},clear:function(){var E=this;E._datas.size()>0&&(E._datas.each(function(n){n._21I($)}),E._datas.clear(),E._dataMap={},E._roots.clear(),E._rootMap={},E._78O={},E._36I.fire({kind:Hh}))},contains:function(B){return B&&B._dataModel===this},handleDataPropertyChange:function(o){var A=this,k=o.data,T=o.property;if("parent"===T){var z=k._id,s=A._rootMap,B=A._roots;
        k._parent?s[z]&&(delete s[z],B.remove(k)):s[z]||(s[z]=k,B.add(k))}else if("tag"===T){var d=o.oldValue,V=o.newValue,a=A._78O;d!=$&&delete a[d],V!=$&&(a[V]=k)}this.onDataPropertyChanged(k,o),this._35I.fire(o)},onDataPropertyChanged:function(){},addDataModelChangeListener:function(d,k,n){this._36I.add(d,k,n)},removeDataModelChangeListener:function(z,I){this._36I.remove(z,I)},addDataPropertyChangeListener:function(x,r,A){this._35I.add(x,r,A)},removeDataPropertyChangeListener:function(K,s){this._35I.remove(K,s)},_38I:function(v,b,l){this._37I&&this._37I.fire({data:v,oldIndex:b,newIndex:l})},addHierarchyChangeListener:function(V,y,Y){this._37I||(this._37I=new yb),this._37I.add(V,y,Y)},removeHierarchyChangeListener:function(e,q){this._37I.remove(e,q)},getSiblings:function(w){var R=w._parent;return R?R._children:this._roots},eachByDepthFirst:function(z,j,c){if(j)this._11I(z,j,c);else for(var G=0,B=this._roots,X=B.size();X>G;G++)if(this._11I(z,B.get(G),c)===!1)return},_11I:function(Q,Y,e){for(var v=Y.size(),x=0;v>x;x++)if(this._11I(Q,Y.getChildAt(x),e)===!1)return!1;if(e){if(Q.call(e,Y)===!1)return!1}else if(Q(Y)===!1)return!1;return!0},eachByBreadthFirst:function(D,A,i){var V=new fr;for(A?V.add(A):this._roots.each(V.add,V);V.size()>0;)if(A=V.removeAt(0),A.eachChild(V.add,V),i){if(D.call(i,A)===!1)return!1}else if(D(A)===!1)return!1;return!0},moveTo:function(U,V){var b=this.getSiblings(U),v=b.indexOf(U);v===V||0>v||V>=0&&V<=b.size()&&(b.remove(U),V>b.size()&&V--,b.add(U,V),this._38I(U,v,V))},moveUp:function(w){this.moveTo(w,this.getSiblings(w).indexOf(w)-1)},moveDown:function(Z){this.moveTo(Z,this.getSiblings(Z).indexOf(Z)+1)},moveToTop:function(c){this.moveTo(c,0)},moveToBottom:function($){this.moveTo($,this.getSiblings($).size())},moveSelectionUp:function(U){U||(U=this.sm());var e=new fr;pg(U,e,this._roots),e.each(this.moveUp,this)},moveSelectionDown:function(T){T||(T=this.sm());var K=new fr;_k(T,K,this._roots),K.each(this.moveDown,this)},moveSelectionToTop:function(f){f||(f=this.sm());var x=new fr;Ae(f,x,this._roots),x.each(this.moveToTop,this)},moveSelectionToBottom:function(r){r||(r=this.sm());var c=new fr;ol(r,c,this._roots),c.each(this.moveToBottom,this)},addScheduleTask:function(v){var N=this;N.removeScheduleTask(v),v.enabled==$&&(v.enabled=!0),v.interval==$&&(v.interval=10),v.action==$&&(v.action=ec),v.lastTime=Date.now(),N._29Q.push(v),N._30Q==$&&(N._30Q=y.requestAnimationFrame(N._scheduleCallback))},removeScheduleTask:function(l){var N=this,n=N._29Q,C=n.indexOf(l);C>=0&&n.splice(C,1),n.length||N._30Q==$||(y.cancelAnimationFrame(N._30Q),delete N._30Q)}});var Lq=X.SelectionModel=function(H){var M=this;M._68O=p,M._map={},M._73O=new fr,M._74I=new yb,M._21I(H)};Lo("SelectionModel",x,{ms_fire:1,ms_dm:1,ms:function(R,n,G){this.addSelectionChangeListener(R,n,G)},ums:function(U,d){this.removeSelectionChangeListener(U,d)},fd:function(){return this.getFirstData()},ld:function(){return this.getLastData()},sg:function(){return this._68O===D},co:function(s){return this._map[s._id]!=$},ss:function(I){this.setSelection(I)},as:function(l){this.appendSelection(l)},rs:function(Q){this.removeSelection(Q)},cs:function(){this.clearSelection()},sa:function(){this.selectAll()},getSelectionMode:function(){return this._68O},setSelectionMode:function(r){var K=this;if(K._68O!==r&&(r===Oc||r===D||r===p)){K.cs();var Y=K._68O;K._68O=r,K.fp("selectionMode",Y,r)}},_21I:function(d){var v=this,z=v._dataModel;z!==d&&(z&&(v.cs(),z.umm(v.handleDataModelChange,v)),v._dataModel=d,d.mm(v.handleDataModelChange,v,!0),v.fp(ro,z,d))},dispose:function(){var S=this;S.cs(),S._dataModel.umm(S.handleDataModelChange,S)},handleDataModelChange:function(N){var c=this;if(N.kind===tm){var a=N.data;c.co(a)&&(c._73O.remove(a),delete c._map[a._id],c._75I(tm,new fr(a)))}else N.kind===Hh&&c.cs()},getFilterFunc:function(){return this._filterFunc},setFilterFunc:function(m){var Z=this;if(Z._filterFunc!==m){Z.cs();var U=Z._filterFunc;Z._filterFunc=m,Z.fp("filterFunc",U,Z._filterFunc)}},_75I:function(o,W,e,L){e&&(this._73O.each(function(A){L[A._id]?e.remove(A):e.add(A)}),W=e.toList()),this._74I.fire({kind:o,datas:new fr(W)})},addSelectionChangeListener:function(f,l,s){this._74I.add(f,l,s)},removeSelectionChangeListener:function(Z,f){this._74I.remove(Z,f)},_97O:function(D,U){for(var B,l=this,y=0,L=new fr(D);y<L.size();y++)B=L.get(y),(l._filterFunc&&!l._filterFunc(B)||U&&l.co(B)||!U&&!l.co(B)||!l._dataModel.contains(B))&&(L.removeAt(y),y--);return L},appendSelection:function(O){var U=this;if(U._68O!==Oc){var E,J,t=U._73O,$=U._97O(O,!0);$.isEmpty()||(U.sg()&&(E=new fr(t),J=U._map,t.clear(),U._map={},$=new fr($.get($.size()-1))),$.each(function(w){t.add(w),U._map[w._id]=w}),U._75I("append",$,E,J))}},removeSelection:function(W){var g=this,X=g._97O(W),Q=0,w=X.size();if(0!==w){for(;w>Q;Q++){var d=X.get(Q);g._73O.remove(d),delete g._map[d._id]}g._75I(tm,X)}},toSelection:function(C,u){return this._73O.toList(C,u)},getSelection:function(){return this._73O},each:function(H,E){this._73O.each(H,E)},setSelection:function(u){var V=this,W=V._73O;if(V._68O!==Oc&&!(W.isEmpty()&&!u||1===W.size()&&V.ld()===u)){var A=new fr(W),n=V._map;W.clear(),V._map={};var m=V._97O(u,!0);V.sg()&&m.size()>1&&(m=new fr(m.get(m.size()-1))),m.each(function(R){W.add(R),V._map[R._id]=R}),V._75I("set",$,A,n)}},clearSelection:function(){var J=this,F=J._73O;if(F.size()>0){var g=F.toList();F.clear(),J._map={},J._75I(Hh,g)}},selectAll:function(){var e=this;if(e._68O!==Oc){var J,i,Z=e._dataModel.toDatas();if(e._filterFunc)for(J=0;J<Z.size();J++)i=Z.get(J),e._filterFunc(i)||(Z.removeAt(J),J--);var R=e._73O,m=new fr(R),I=e._map;R.clear(),e._map={},e.sg()&&Z.size()>1&&(Z=new fr(Z.get(Z.size()-1)));var P=Z.size();for(J=0;P>J;J++)i=Z.get(J),R.add(i),e._map[i._id]=i;e._75I("all",$,m,I)}},size:function(){return this._73O.size()},isEmpty:function(){return this._73O.isEmpty()},contains:function(Z){return this._map[Z._id]!=$},getLastData:function(){var y=this._73O;return y.size()>0?y.get(y.size()-1):$},getFirstData:function(){var c=this._73O;return c.size()>0?c.get(0):$},isSelectable:function(G){var r=this;return G&&r._68O!==Oc?r._filterFunc?r._filterFunc(G):!0:!1}}),$l(O,{edgeGroupAgentFunc:$,graphViewAutoScrollZone:16,graphViewResettable:!0,graphViewPannable:!0,graphViewRectSelectable:!0,graphViewScrollBarVisible:!0,graphViewRectSelectBorderColor:w.rectSelectBorder,graphViewRectSelectBackground:Rl,graphViewEditPointSize:_?17:7,graphViewEditPointBorderColor:w.editPointBorder,graphViewEditPointBackground:w.editPointBackground,setEdgeType:function(R,x,y){om[R]=x,Um[R]=y},getEdgeType:function(p){return om[p]}},!0),$l(n,{"2d.selectable":!0,"2d.visible":!0,"2d.movable":!0,"2d.editable":!0,"2d.move.mode":K,"image.stretch":"fill",icons:K,ingroup:!0,"body.color":K,opacity:K,pixelPerfect:!0,"select.color":Ng,"select.width":1,"select.padding":2,"select.type":km,"shadow.blur":6,"shadow.offset.x":3,"shadow.offset.y":3,"shadow.color":Ng,"border.color":K,"border.width":2,"border.padding":2,"border.type":km,label:K,"label.font":K,"label.color":jh,"label.background":K,"label.position":31,"label.position.fixed":!1,"label.offset.x":0,"label.offset.y":2,"label.rotation":K,"label.max":K,"label.opacity":K,"label.scale":1,"label.align":K,label2:K,"label2.font":K,"label2.color":jh,"label2.background":K,"label2.position":34,"label2.position.fixed":!1,"label2.offset.x":0,"label2.offset.y":-2,"label2.rotation":K,"label2.max":K,"label2.opacity":K,"label2.scale":1,"label2.align":K,note:K,"note.expanded":!0,"note.font":K,"note.color":Tl,"note.background":Ng,"note.position":8,"note.offset.x":-3,"note.offset.y":3,"note.max":K,"note.toggleable":!0,"note.border.width":1,"note.border.color":K,"note.opacity":K,"note.scale":1,"note.align":K,note2:K,"note2.expanded":!0,"note2.font":K,"note2.color":Tl,"note2.background":Ng,"note2.position":3,"note2.offset.x":3,"note2.offset.y":-3,"note2.max":K,"note2.toggleable":!0,"note2.border.width":1,"note2.border.color":K,"note2.opacity":K,"note2.scale":1,"note2.align":K,"group.type":K,"group.image":K,"group.image.stretch":"fill","group.repeat.image":K,"group.padding":8,"group.padding.left":0,"group.padding.right":0,"group.padding.top":0,"group.padding.bottom":0,"group.position":17,"group.toggleable":!0,"group.title.font":K,"group.title.color":Tl,"group.title.background":w.groupTitleBackground,"group.title.align":Zd,"group.background":w.groupBackground,"group.depth":1,"group.border.width":1,"group.border.pattern":K,"group.border.color":Jg,"group.border.cap":pl,"group.border.join":_b,"group.gradient":$,"group.gradient.color":"#FFF",shape:K,"shape.background":Jg,"shape.repeat.image":K,"shape.border.width":0,"shape.border.color":Jg,"shape.border.3d":!1,"shape.border.3d.color":K,"shape.border.3d.accuracy":K,"shape.border.cap":pl,"shape.border.join":_b,"shape.border.pattern":K,"shape.gradient":$,"shape.gradient.color":"#FFF","shape.depth":0,"shape.dash":!1,"shape.dash.pattern":rq,"shape.dash.offset":0,"shape.dash.color":Of,"shape.dash.width":K,"shape.dash.3d":!1,"shape.dash.3d.color":K,"shape.dash.3d.accuracy":K,"shape.polygon.side":6,"shape.arc.from":L,"shape.arc.to":i,"shape.arc.close":!0,"shape.arc.oval":!1,"shape.corner.radius":K,"edge.type":K,"edge.points":K,"edge.segments":K,"edge.color":Jg,"edge.width":2,"edge.offset":20,"edge.group":0,"edge.expanded":!0,"edge.gap":12,"edge.toggleable":!0,"edge.center":!1,"edge.3d":!1,"edge.3d.color":K,"edge.3d.accuracy":K,"edge.cap":pl,"edge.join":_b,"edge.source.position":17,"edge.source.offset.x":0,"edge.source.offset.y":0,"edge.target.position":17,"edge.target.offset.x":0,"edge.target.offset.y":0,"edge.pattern":K,"edge.dash":!1,"edge.dash.pattern":rq,"edge.dash.offset":0,"edge.dash.color":Of,"edge.dash.width":K,"edge.dash.3d":!1,"edge.dash.3d.color":K,"edge.dash.3d.accuracy":K,"edge.independent":!1,"attach.row.index":0,"attach.column.index":0,"attach.row.span":1,"attach.column.span":1,"attach.padding":0,"attach.padding.left":0,"attach.padding.right":0,"attach.padding.top":0,"attach.padding.bottom":0,"attach.index":-1,"attach.offset":0,"attach.offset.relative":!1,"attach.offset.opposite":!1,"attach.thickness":K,"attach.gap":0,"attach.gap.relative":!1,"grid.row.count":1,"grid.column.count":1,"grid.row.percents":K,"grid.column.percents":K,"grid.border":1,"grid.border.left":0,"grid.border.right":0,"grid.border.top":0,"grid.border.bottom":0,"grid.gap":1,"grid.background":w.gridBackground,"grid.depth":1,"grid.cell.depth":-1,"grid.cell.border.color":w.gridCellBorderColor,"grid.block":K,"grid.block.padding":3,"grid.block.width":1,"grid.block.color":w.gridBlockColor},!0),$l(hj,{_5I:!0,isAutoAdjustIndex:function(){return this._5I},setAutoAdjustIndex:function(w){this._5I=w},_76I:function(V,$,H){this._39I&&this._39I.fire({data:V,oldIndex:$,newIndex:H})},addIndexChangeListener:function(r,i,g){var b=this;b._39I||(b._39I=new yb),b._39I.add(r,i,g)},removeIndexChangeListener:function(j,p){this._39I.remove(j,p)},prepareRemove:function(v){hq(v)&&(v.setSource($),v.setTarget($)),v._70O&&v._70O.toList().each(this.remove,this),v._69O&&v._69O.toList().each(function(Z){Z.setHost($)}),v._host&&v.setHost($)},onAdded:function(S){this.isAutoAdjustIndex()&&this._76O(S)},onDataPropertyChanged:function(P,T){Dq[T.property]&&this.isAutoAdjustIndex()&&this._76O(P)},isAdjustable:function(Z){return ag(Z)||hq(Z)},isAdjustedToBottom:function(e){return ts(e)?e.isExpanded()&&Wk(e):!1},_76O:function(A){var m=this;m.isAdjustedToBottom(A)?(m.sendToBottom(A),A.eachChild(m._76O,m)):m.sendToTop(A)},sendToTop:function(S){var x=this;if(x.contains(S)&&x.isAdjustable(S)){var R=x._datas;if(S!==R.get(x.size()-1)){var Z=R.indexOf(S);R.removeAt(Z),R.add(S),x._76I(S,Z,x.size()-1)}if(hq(S)){var $=S._40I;$&&!x.isAdjustedToBottom($)&&x.sendToTop($),$=S._41I,$&&!x.isAdjustedToBottom($)&&x.sendToTop($)}S._69O&&S._69O.each(function(p){p.isRelatedTo(S)||ag(S)&&p.isLoopedHostOn(S)||x.sendToTop(p)}),S.ISubGraph||(!ts(S)||S.isExpanded())&&S._adjustChildrenToTop&&S.eachChild(function(f){hq(f)||x.sendToTop(f)})}},sendToBottom:function(V,y){var j=this;if(V!==y&&j.contains(V)&&j.isAdjustable(V)&&(!y||j.contains(y))){var Q=j._datas,X=Q.remove(V),L=y?j._datas.indexOf(y):0;if(Q.add(V,L),X!==L){j._76I(V,X,L);var z=V._parent;!z||z.ISubGraph||hq(z)||j.sendToBottom(V._parent,V)}}}}),$l(hn,{ms_edit:function(f){f._46O=function(w){var m=this,d=m.gv.dm(),t=d.getHistoryManager(),P=m._index,C=m._89I,I=m._node,H=m._shape,D=m._edge,a=m._77I;I&&C?(this.fi({kind:"endEditRect",event:w,data:I,direction:C}),t&&t.endInteraction()):H&&P>=0?(m.fi({kind:"endEditPoint",event:w,data:H,index:P}),t&&t.endInteraction()):D&&P>=0?(m.fi({kind:"endEditPoint",event:w,data:D,index:P}),t&&t.endInteraction()):a&&(m.fi({kind:"endEditRotation",event:w,data:a}),t&&t.endInteraction())},f._78I=function(g){var i=this;i.autoScroll(g);var c=i.gv.lp(g),Z=i._index,Y=i._89I,D=i._node,z=i._shape,x=i._edge,o=i._77I;if(D&&Y)i._80O(c),i.fi({kind:"betweenEditRect",event:g,data:D,direction:Y});else if(z&&Z>=0)c.e=z.getPoints().get(Z).e,z.setPoint(Z,c),i.fi({kind:"betweenEditPoint",event:g,data:z,index:Z});else if(x&&Z>=0){var j=x.s(ch);c.e=j.get(Z).e,j.set(Z,c),x.fp(ch,$,j),i.fi({kind:"betweenEditPoint",event:g,data:x,index:Z})}else if(o){var b=o.p(),v=l+t(c.y-b.y,c.x-b.x);m(v)<.04&&(v=0),o.setRotation(v),i.fi({kind:"betweenEditRotation",event:g,data:o})}},f._80O=function(h){var Q=this,X=Q._rect,F=X.x,C=X.y,m=X.width,N=X.height,A=Q._89I;"northwest"===A?X=vc(h,{x:F+m,y:C+N}):A===$d?X=vc({x:F,y:h.y},{x:F+m,y:C+N}):"northeast"===A?X=vc({x:F,y:h.y},{x:h.x,y:C+N}):A===yq?X=vc({x:h.x,y:C},{x:F+m,y:C+N}):A===Nb?X=vc({x:F,y:C},{x:h.x,y:C+N}):"southwest"===A?X=vc({x:h.x,y:C},{x:F+m,y:h.y}):"south"===A?X=vc({x:F,y:C},{x:F+m,y:h.y}):"southeast"===A&&(X=vc({x:F,y:C},h)),Q._node.setRect(X)},f._80I=function(q,i,h,p,a){var P=this,o=P.gv.getEditPointSize()+2;return rl({x:i-o/2,y:h-o/2,width:o,height:o},q)?(P._89I!==p&&(P.setCursor(a),P._89I=p),!0):!1},f._79I=function(D,S,b){var T=this,L=T.gv,F=S?L.getDataUI(S):$,o=F?F._55O:$;if(o){var k,G,A,e=L.getEditPointSize()+2,i=L.lp(D);if(ag(S)){if(o._56O&&ag(S)&&(G=o._98o,rl({x:G.x-e/2,y:G.y-e/2,width:e,height:e},i)))return T._77I=S,b&&T.fi({kind:"beginEditRotation",event:D,data:S}),T.setCursor("crosshair"),!0;if(o._43O&&S instanceof ln)for(A=S.getPoints(),k=A.size()-1;k>=0;k--)if(G=A.get(k),rl({x:G.x-e/2,y:G.y-e/2,width:e,height:e},i))return T._index=k,T._shape=S,b&&T.fi({kind:"beginEditPoint",event:D,data:S,index:k}),T.setCursor("crosshair"),!0;if(o._42O){var j=S.getRect(),V=j.x,C=j.y,K=j.width,q=j.height;if(T._80I(i,V,C,"northwest","nwse-resize")||T._80I(i,V+K/2,C,$d,pm)||T._80I(i,V+K,C,"northeast","nesw-resize")||T._80I(i,V,C+q/2,yq,Kn)||T._80I(i,V+K,C+q/2,Nb,Kn)||T._80I(i,V,C+q,"southwest","nesw-resize")||T._80I(i,V+K/2,C+q,"south",pm)||T._80I(i,V+K,C+q,"southeast","nwse-resize"))return T._node=S,T._rect=S.getRect(),b&&T.fi({kind:"beginEditRect",event:D,data:S,direction:T._89I}),!0}}if(o._43O&&hq(S)&&S.s(ad)===Uc&&(A=S.s(ch)))for(k=A.size()-1;k>=0;k--)if(G=A.get(k),rl({x:G.x-e/2,y:G.y-e/2,width:e,height:e},i))return T._index=k,T._edge=S,b&&T.fi({kind:"beginEditPoint",event:D,data:S,index:k}),T.setCursor("crosshair"),!0}return!1}},ms_gv:function(j){j._currentSubGraph=$,j.upSubGraph=function(){this.setCurrentSubGraph(Ib(this._currentSubGraph))},j.isVisible=function(P){var Q=this;if(Ib(P)!==Q._currentSubGraph)return!1;if(hq(P)){var E=P._40I,N=P._41I;if(!E||!N)return!1;if(!(P.s("edge.independent")||Q.isVisible(E)&&Q.isVisible(N)))return!1;if(P.isEdgeGroupHidden())return!1}else for(var X=P._parent;X&&!X.ISubGraph;){if(ts(X)&&(!X.isExpanded()||!Q.isVisible(X)))return!1;X=X._parent}if(Q instanceof Zq){if(!P.s("3d.visible"))return!1}else if(!P.s("2d.visible"))return!1;return Q._visibleFunc?Q._visibleFunc(P):!0},j._16o=function(C){var W=this;C.datas.each(function(P){W.invalidateData(P);var m=P._parent;ts(m)&&ag(P)&&P.s(qc)&&(W.invalidateData(m),m._49I&&m._49I.each(function(D){W.invalidateData(D)}))}),W.onSelectionChanged(C)},j.onSelectionChanged=function(A){var y=this,Z=y.sm();if(1===Z.size()&&("set"===A.kind||"append"===A.kind)){var G=Z.ld();y.isAutoMakeVisible()&&y.makeVisible(G),y._76O&&y._dataModel.isAutoAdjustIndex()&&y._76O(G)}},j.makeVisible=function(d){if(d){var X=this,O=X.getDataUI?X.getDataUI(d):X.getData3dUI(d);if(O){var x=d,H=Ib(d);for(H!==X._currentSubGraph&&X.setCurrentSubGraph(H);(x=x._parent)&&x!==H;)ts(x)&&x.setExpanded(!0);X._23I=d,X.iv()}}},j.getLabel=function(D){var S=D.getStyle(Cq);return S===K?D.getName():S},j.getLabelBackground=function(H){return H.getStyle("label.background")},j.getLabelColor=function(V){return V.getStyle("label.color")},j.getLabel2=function(F){return F.getStyle("label2")},j.getLabel2Background=function(Z){return Z.getStyle("label2.background")},j.getLabel2Color=function(E){return E.getStyle("label2.color")},j.getNote=function(f){return f.getStyle(Xf)},j.getNoteBackground=function(L){return L.getStyle("note.background")},j.getNote2=function(K){return K.getStyle(Sd)},j.getNote2Background=function(v){return v.getStyle("note2.background")},j.handleClick=function(g,R,b){var J=this;R?(J.fi({kind:"clickData",event:g,data:R,part:b}),J.onDataClicked(R,g)):(J.fi({kind:"clickBackground",event:g}),J.onBackgroundClicked(g))},j.handleDoubleClick=function(d,F,e){var H=this;Ni(d)&&(F?(H.fi({kind:"doubleClickData",event:d,data:F,part:e}),H.onDataDoubleClicked(F,d,e),H.checkDoubleClickOnNote(d,F,e)||H.checkDoubleClickOnRotation&&H.checkDoubleClickOnRotation(d,F,e)||(hq(F)?H.onEdgeDoubleClicked(F,d,e):F.ISubGraph?H.onSubGraphDoubleClicked(F,d,e):ts(F)?H.onGroupDoubleClicked(F,d,e):F.IDoorWindow?H.onDoorWindowDoubleClicked(F,d,e):F.ICSGBox&&H.onCSGBoxDoubleClicked(F,d,e))):(H.fi({kind:"doubleClickBackground",event:d}),H.onBackgroundDoubleClicked(d)))},j.onSubGraphDoubleClicked=function(J){this.setCurrentSubGraph(J)},j.onEdgeDoubleClicked=function(c,H){c.ISubGraph&&!Ak(H)?this.setCurrentSubGraph(c):c.s("edge.toggleable")&&c.toggle()},j.onGroupDoubleClicked=function(v){v.s("group.toggleable")&&v.toggle()},j.onDoorWindowDoubleClicked=function(y){y.s("dw.toggleable")&&y.toggle(!0)},j.onCSGBoxDoubleClicked=function(F,U){var y=this;if(y instanceof Zq){var s=y.getHitFaceInfo(U);s&&s.face&&F.s(s.face+".toggleable")&&F.toggleFace(s.face,!0)}},j.onBackgroundClicked=function(){},j.onBackgroundDoubleClicked=function(){this.upSubGraph()},j.onDataClicked=function(){},j.onDataDoubleClicked=function(){},j.onAutoLayoutEnded=function(){},j.onMoveEnded=function(){},j.onPanEnded=function(){},j.onPinchEnded=function(){},j.onRectSelectEnded=function(){},j.onZoomEnded=function(){}},ms_icons:function(Y){Y.getRotation=function(r){return r==$?0:r},Y._15O=function(){var y=this,C=y.s(Li);if(C){var B=y,l=y.data||y._data,i=y._38o={icons:C,rects:{}};for(var q in C){var U=C[q],O=uk(U.shape3d,l,B);if(!(uk(U.visible,l,B)===!1||uk(U.for3d,l,B)&&!y.I3d||O&&!y.I3d)){var V=O?[O]:uk(U.names,l,B),K=V?V.length:0,n=uk(U.position,l,B)||3,D=uk(U.offsetX,l,B)||0,f=uk(U.offsetY,l,B)||0,Y=uk(U.direction,l,B)||Nb,N=uk(U.gap,l,B),h=N!=$?N:1,X=uk(U.rotation,l,B),Z=uk(U.keepOrien,l,B),r=uk(U.rotationFixed,l,B)?X:y.getRotation(X,Z,n),P=$,T=i.rects[q]=new Array(K);T.rotation=r;for(var E=0;K>E;E++){var R,S,z,Q,o=V[E];if(O)z=0,Q=0;else{var k=Tn(o);z=uk(U.width,l,B),Q=uk(U.height,l,B),z==$&&(z=ud(k,l)),Q==$&&(Q=Pq(k,l))}if(P?Y===Nb?D+=z/2:Y===yq?D-=z/2:Y===$d?f-=Q/2:f+=Q/2:P={width:z,height:Q},y.I3d){var w=-z/2,H=-Q/2;S={width:z,height:Q,mat:y._16O(uk(U.autorotate,l,B),n,P,uk(U.face,l,B)||G,uk(U.t3,l,B),uk(U.r3,l,B),uk(U.rotationMode,l,B),D,f),vs:new wq([w,-H,0,w,-H-Q,0,w+z,-H-Q,0,w+z,-H,0])}}else R=y.getPosition(n,D,f,P,uk(U.positionFixed,l,B)),S={x:R.x-z/2,y:R.y-Q/2,width:z,height:Q},y._68o(S,r);T[E]=S,Y===Nb?D+=z/2+h:Y===yq?D-=z/2+h:Y===$d?f-=Q/2+h:f+=Q/2+h}}}}}}});var Fi={1:1,2:1,6:1,9:1,10:1,14:1,15:1,16:1,21:1,22:1,26:1,29:1,30:1,34:1,36:1,38:1,40:1,42:1,45:1,50:1,52:1,54:1},am={3:1,7:1,11:1,17:1,23:1,27:1,31:1,44:1,46:1,47:1,49:1},hk={translateX:1,translateY:1,zoom:1,scrollBarVisible:1},Dq={sourceAgent:1,targetAgent:1,expanded:1,parent:1,host:1},vs={position:1,width:1,height:1,expanded:1,rotation:1,"s:edge.points":1},Je={"edge.type":1,"edge.group":1},Ph={rotation:1,rotationX:1,rotationZ:1},qr={position:1,width:1,height:1,"s:grid.row.count":1,"s:grid.column.count":1,"s:grid.row.percents":1,"s:grid.column.percents":1,"s:grid.border":1,"s:grid.border.left":1,"s:grid.border.right":1,"s:grid.border.top":1,"s:grid.border.bottom":1,"s:grid.gap":1},ge={"attach.row.index":1,"attach.column.index":1,"attach.row.span":1,"attach.column.span":1,"attach.padding":1,"attach.padding.left":1,"attach.padding.right":1,"attach.padding.top":1,"attach.padding.bottom":1,"attach.index":1,"attach.offset":1,"attach.offset.relative":1,"attach.offset.opposite":1,"attach.gap":1,"attach.gap.relative":1,"attach.thickness":1},Qi={shape:1,thickness:1,position:1},lp=function(j,w){if(!j||!ts(w)||w.isEmpty())return!1;for(j=j._parent;ts(j);){if(j===w)return!0;j=j._parent}return!1},Ib=function(a){if(!a)return $;if(hq(a)){var x=a._40I,s=a._41I;if(!x||!s)return $;var H=Ib(x),V=Ib(s);return H===V?H:$}for(var m=a._parent;hq(m)&&!m.ISubGraph;)m=m._parent;return m?m.ISubGraph?m:Ib(m):$},dc=function(O,y,q,Z){var h=y.getStyle(q)*Z;h&&$n(O,h),h=y.getStyle(q+".left")*Z,h&&(O.x-=h,O.width+=h),h=y.getStyle(q+".right")*Z,h&&(O.width+=h),h=y.getStyle(q+".top")*Z,h&&(O.y-=h,O.height+=h),h=y.getStyle(q+".bottom")*Z,h&&(O.height+=h),O.width<0&&(O.width=-O.width,O.x-=O.width),O.height<0&&(O.height=-O.height,O.y-=O.height)},Wk=function(f){for(var q,J=0,i=f.size();i>J;J++)if(q=f.getChildAt(J),ag(q)&&Wk(q))return!0;return f.hasAgentEdges()},Ki=function(K){if(!K)return $;for(var P=K._parent;ts(P);){if(!ts(P._parent))return P.isExpanded()?K:P;P.isExpanded()||(K=P),P=P._parent}return K},Dp=function(h,T){if(!h||!T)return $;var n,A,j,a=Ib(h),C=Ib(T);if(a!==C){for(;C&&a!==C;)C=Ib(C);if(a===C)return h;n=new fr,n.add(h,0);for(var x=h._parent;ag(x)&&!T.isDescendantOf(x);)n.add(x,0),x=x._parent;for(j=n.size(),A=0;j>A;A++){var u=n.get(A);if(ts(u)&&!u.isExpanded())return u;if(u.ISubGraph)return u}return h}return h},ls=function(n){if(n.isLooped())return n._source;var s=Ki(n._source),m=Ki(n._target);return s===m?n._source:Dp(s,m)},ah=function(U){if(U.isLooped())return U._target;var F=Ki(U._source),I=Ki(U._target);return F===I?U._target:Dp(I,F)},ek=function(P,U){var G;if(ts(U)&&U.isExpanded()){var B=P.getDataUI(U);B&&B._88I&&(G=B._88I.rect)}return G?G:U.getRect()},pr=function(m,I,l,V,P){return I?(l=nl(l,ek(m,I)),l.x+=V,l.y+=P,l):$},bg=function(T,r){if(!T||!r)return $;var M,I,e,m,v,t;if(T===r){if(m=T.getLoopedEdges(),!m)return $;m=new fr(m)}else{if(v=T.getAgentEdges(),t=r.getAgentEdges(),!v||!t)return $;for(I=v.size(),M=0;I>M;M++)e=v.get(M),t.contains(e)&&(m||(m=new fr),m.add(e))}if(m)for(M=0;M<m.size();M++)e=m.get(M),e.getStyle(ad)===Uc&&(e._22I($),m.removeAt(M),M--);return m},ef=function(r,E){var F=bg(r,E);if(F&&!F.isEmpty()){if(1===F.size())return F.get(0)._22I($),void 0;var h=new fr,d=new fr;F.each(function(k){var V=k.s("edge.group");h.contains(V)||h.add(V)}),h.sort(),h.each(function(n){d.add(new X.EdgeGroup(F.toList(function(O){return n===O.s("edge.group")}),d))}),d.each(function(L){L.each(function(m){m._22I(L)})})}},rp=function(s,q){if(q){var d=q.rect,K=q.color,M=q.rotation,I=q.labelWidth,D=q.background,w=q.opacity,l=q.scale,N=l!=$&&1!==l;if(w!=$){var y=s.globalAlpha;s.globalAlpha*=w}if(M||N){s.save();var m=d.x+d.width/2,F=d.y+d.height/2;Jh(s,m,F),M&&Nk(s,M),N&&s.scale(l,l),Jh(s,-m,-F)}if(D&&Sm(s,d.x,d.y,d.width,d.height,D),I){var n=d.width,b=s.createLinearGradient(d.x,d.y,d.x+n,d.y);b.addColorStop(0,K),b.addColorStop(.9,K),b.addColorStop(1,wl),K=b,d.width=I}dg(s,q.ss,d,q.font,K,q.align),I&&(d.width=n),(M||N)&&s.restore(),w!=$&&(s.globalAlpha=y)}},Rk=function(j,u){if(u){var U=u.rect,S=U.x,G=U.y,_=U.width,v=U.height,J=u.background,g=u.backgroundImage,o=u.borderWidth,q=u.borderColor,f=u.labelWidth,k=u.opacity,T=u.scale,w=T!=$&&1!==T;if(k!=$){var r=j.globalAlpha;j.globalAlpha*=k}if(w){j.save();var I=U.x+U.width/2,m=U.y+U.height/2;Jh(j,I,m),j.scale(T,T),Jh(j,-I,-m)}if(u.expanded){var P=a(8,_/4),Q=G+v-8;if(j.fillStyle=J,j.beginPath(),j.moveTo(S,G),j.lineTo(S,Q),j.lineTo(S+_/2,Q),j.lineTo(S+_/2,G+v),j.lineTo(S+_/2+P,Q),j.lineTo(S+_,Q),j.lineTo(S+_,G),j.closePath(),j.fill(),o&&(j.lineWidth=o,j.lineJoin="round",j.lineCap="round",j.strokeStyle=q?q:wn(J),j.beginPath(),j.moveTo(S+_,G),j.lineTo(S+_,Q),j.lineTo(S+_/2+P,Q),j.lineTo(S+_/2,G+v),j.stroke(),j.strokeStyle=q?q:Qc(J),j.beginPath(),j.moveTo(S+_,G),j.lineTo(S,G),j.lineTo(S,Q),j.lineTo(S+_/2,Q),j.lineTo(S+_/2,G+v),j.stroke()),g)ai(j,Tn(g),dn,U.x,U.y,U.width,U.height-8,u.data,u.view);else{if(U.height-=8,J=u.color,f){var t=_,X=j.createLinearGradient(S,G,S+t,G);X.addColorStop(0,J),X.addColorStop(.9,J),X.addColorStop(1,wl),J=X,U.width=f}dg(j,u.ss,U,u.font,J,u.align),f&&(U.width=t),U.height+=8}}else if(u.icon)fb(j,Tn(u.icon),S,G,_,v,u.data,u.view);else{var x=_/2;o&&(j.lineWidth=o,j.lineJoin="round",j.lineCap="round",j.strokeStyle=q?q:wn(J),j.beginPath(),j.arc(S+x,G+x,x,l,1.6*L,!0),j.moveTo(S+x,G+v),j.lineTo(S+_-x/5,G+x),j.stroke(),j.strokeStyle=q?q:Qc(J),j.beginPath(),j.arc(S+x,G+x,x,1.6*L,l,!0),j.moveTo(S+x,G+v),j.lineTo(S+x/5,G+x),j.stroke()),j.fillStyle=J,j.beginPath(),j.arc(S+x,G+x,x,0,i,!0),j.moveTo(S+x,G+v),j.lineTo(S+_-x/5,G+x),j.lineTo(S+x/5,G+x),j.closePath(),j.fill(),j.fillStyle=u.color,j.beginPath(),j.arc(S+x,G+x,x/3,0,i,!0),j.fill()}w&&j.restore(),k!=$&&(j.globalAlpha=r)}},Br=function(N,K){return K>2*N?N:K/2},Hk=function(Y,A,Z,V){if(!Y||!A)return 0;var p=t(A.y-Y.y,A.x-Y.x);return Z||(p=A.x<Y.x?p+L:p),p+V},Qq=function(f,e,R,_,Z,a,r){r&&(f.x>e.x||f.x===e.x&&f.y>e.y)&&(R=Ri[R],Z=-Z);var k=nl(R,{x:0,y:0,width:Ym(f,e),height:0},a);return k.x+=_,k.y+=Z,k=new yp(t(e.y-f.y,e.x-f.x)).tf(k),k.x+=f.x,k.y+=f.y,k},yc=function($,N,l,o,T){if($._19Q=!0,!l.getEdgeGroup())return o?l.s("edge.gap"):0;var i,C=0,f=0,d=0;if(l.getEdgeGroup().getSiblings().each(function(Y){Y.each(function(g){if(N.isVisible(g)&&g.s(ad)==T){var J=g.s("edge.gap");i?(f+=d/2+J/2,d=J):(i=g,d=J),g===l&&(C=f)}})}),o)return f-C+d;var L=C-f/2;return i&&l._40I!==i._40I&&($._19Q=!1),L},Wi=function(){var C=function(b){var g=[];return b.forEach(function(w){g.push({x:w.x,y:w.y}),g.push({x:w.x+w.width,y:w.y+w.height}),g.push({x:w.x+w.width,y:w.y}),g.push({x:w.x,y:w.y+w.height})}),g};return function(b,y,j){if("oval"===b){var H=0,i=j.height/j.width,m=i*i,P=j.x+j.width/2,R=j.y+j.height/2,v=C(y);v.forEach(function(B){var X=B.x-P,U=B.y-R,S=X*X+U*U/m;S>H&&(H=S)}),H=q(H);var c=i*H;return{x:P-H,y:R-c,width:2*H,height:2*c}}if("circle"===b){var l=0,P=j.x+j.width/2,R=j.y+j.height/2,v=C(y);return v.forEach(function($){var h=$.x-P,D=$.y-R,X=h*h+D*D;X>l&&(l=X)}),l=q(l),{x:P-l,y:R-l,width:2*l,height:2*l}}return"roundRect"===b?($n(j,a(j.width,j.height)/16),j):j}}(),dr=X.graph={},Ok=function(N,$,j){de(Z+".graph."+N,$,j)};X.layout={};var Tq={comps:[{type:nr,points:[85,50,70,115,100,71,86,107,88,49,57,107,99,75,68,68,98,87,105,71,79,113,55,97,103,113,85,121,108,75,83,85,120,108,111,121,116,112,114,85,113,101,112,65,110,122,100,78,104,66,99,74,50,89,79,109,101,82,49,103,89,53,89,55],borderWidth:1,borderColor:$}]};Tq[Sn]=Tq[Bi]=160,Em("node_image",Bf(30,30,[{type:km,rect:[4,5,22,16],gradient:nh,gradientColor:zh,background:Jg},{type:km,rect:[2,3,26,20],borderWidth:1,borderColor:Jg},{type:km,rect:[11,23,8,4],background:Jg},{type:km,rect:[6,27,18,2],background:Jg}])),Em("node_icon",Bf(16,16,[{type:km,rect:[2,2,12,10],gradient:nh,gradientColor:zh,background:Jg},{type:Pm,rect:[2,2,12,10],width:1,color:Jg},{type:km,rect:[6,12,4,2],background:Jg},{type:km,rect:[4,14,8,1],background:Jg}])),Em("group_image",Bf(66,39,[{type:km,rect:[44.3,18,18.1,12.8],gradient:nh,gradientColor:zh,background:Jg},{type:km,rect:[3.3,17.8,18.1,12.8],gradient:nh,gradientColor:zh,background:Jg},{type:km,rect:[15.8,3.2,33.5,26.4],borderWidth:1,borderColor:Jg,gradient:nh,gradientColor:zh,background:Jg},{type:km,rect:[26.2,29.4,12.8,4.2],background:Jg},{type:km,rect:[21.3,33.5,22.5,2.3],background:Jg},{type:km,rect:[5.3,32.7,14.1,2.1],background:Jg},{type:km,rect:[9,30.4,6.7,2.4],background:Jg},{type:km,rect:[50,30.7,6.7,2.4],background:Jg},{type:km,rect:[46.3,33,14.1,2.1],background:Jg}])),Em("group_icon",Bf(16,16,[{type:km,rect:[4,12,4,2],background:Jg},{type:km,rect:[2,13,8,1],background:Jg},{type:km,rect:[12,12,2,1],background:Jg},{type:km,rect:[11,13,4,1],background:Jg},{type:km,rect:[10,7,6,5],gradient:nh,gradientColor:zh,background:Jg},{type:km,rect:[1,2,10,10],gradient:nh,gradientColor:zh,background:Jg},{type:Pm,rect:[1,2,10,10],width:1,color:Jg}])),Em("edge_icon",Bf(16,16,[{type:km,rect:[2.1,6.9,11.5,2.6],rotation:-.79,gradient:nh,gradientColor:zh,background:Jg},{type:km,rect:[10.8,1,4,4],background:Jg},{type:km,rect:[1,11,4,4],background:Jg}])),Em("subGraph_image",Bf(72,45,[{type:nr,points:[9,42,.3,38.4,2.4,28.8,5.7,21.6,11.7,22.5,11.7,15.9,16.8,13.8,21.6,12,24.3,15.9,27.9,3,42.3,2.1,59.4,4.5,57.3,18.3,67.5,18.9,69.6,27.3,69.9,38.4,64.2,41.4],segments:[1,3,3,3,3,3,3,3,3],gradient:nh,gradientColor:zh,background:Jg},{type:km,rect:[29.6,30.7,3.6,1.8],background:Jg},{type:km,rect:[28.4,32.3,6,1.2],background:Jg},{type:km,rect:[37.3,32,10.8,1.8],background:Jg},{type:km,rect:[39.1,29.9,7.2,2.3],background:Jg},{type:km,rect:[26.6,23.7,9.6,7.2],gradient:nh,gradientColor:zh,background:Jg},{type:km,rect:[34.3,16.8,16.8,13.2],borderWidth:1,borderColor:Jg,gradient:nh,gradientColor:zh,background:Jg}])),Em("subGraph_icon",Bf(17,17,[{type:nr,points:[2.2,14.6,.2,11.9,.8,8.8,1.8,5.9,5.6,7.4,3.8,1.6,10.3,3,14.5,4.2,12.2,7.5,18.9,7.2,14.5,14.5],segments:[1,3,3,3,3,3],gradient:nh,gradientColor:zh,background:Jg}])),Em("shape_icon",Bf(16,16,[{type:nr,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],background:Jg}])),Em("polyline_icon",Bf(16,16,[{type:nr,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],borderWidth:1,borderColor:Jg},Gb(7.5,.4),Gb(7.5,6.3),Gb(13.6,6.3),Gb(13.6,14),Gb(.7,13.9),Gb(.7,.3)])),Em("grid_icon",Bf(16,16,[{type:km,rect:[1,1,4,4],background:Jg,gradient:nh,gradientColor:zh},{type:km,rect:[6,1,4,4],background:Jg,gradient:nh,gradientColor:zh},{type:km,rect:[11,1,4,4],background:Jg,gradient:nh,gradientColor:zh},{type:km,rect:[11,6,4,4],background:Jg,gradient:nh,gradientColor:zh},{type:km,rect:[6,6,4,4],background:Jg,gradient:nh,gradientColor:zh},{type:km,rect:[1,6,4,4],background:Jg,gradient:nh,gradientColor:zh},{type:km,rect:[11,11,4,4],background:Jg,gradient:nh,gradientColor:zh},{type:km,rect:[6,11,4,4],background:Jg,gradient:nh,gradientColor:zh},{type:km,rect:[1,11,4,4],background:Jg,gradient:nh,gradientColor:zh}])),Em("light_icon",Bf(16,16,[{type:"rect",rect:[6,9,5,5],borderWidth:1,borderColor:Jg},{type:"circle",rect:[1,1,15,10],borderWidth:1,borderColor:Jg,gradient:nh,gradientColor:zh,background:{func:function(D){var H=D?D.s(te):$;return _f(H)?"rgb("+P(255*H[0])+","+P(255*H[1])+","+P(255*H[2])+")":H||Jg}}}]));var xn=function(A,J){for(var F=A.vertices,p=0;p<F.length;p++){var u=F[p],r=u.y;u.y=u.z,u.z=-r,J&&(u.y+=J)}},th=function(M){for(var j,n,v,H,l,Q,E=[],W=[],e=[],P=M.faces,z=0,C=0,t=0,h=P.length;h>z;z++,C+=6,t+=9){var a=P[z];1===a.i?(j||(j=[],n=[],v=[]),fe(a,z,C,t,M,j,v,n)):2===a.i?(H||(H=[],l=[],Q=[]),fe(a,z,C,t,M,H,Q,l)):fe(a,z,C,t,M,E,e,W)}return{vs:E,uv:W,ns:e,top_vs:j,top_uv:n,top_ns:v,bottom_vs:H,bottom_uv:l,bottom_ns:Q}},fe=function(C,N,H,M,J,$,p,j){var k=J.vertices,z=J.faceVertexUvs,E=k[C.a],S=k[C.b],b=k[C.c];$[M]=E.x,$[M+1]=E.y,$[M+2]=E.z,$[M+3]=S.x,$[M+4]=S.y,$[M+5]=S.z,$[M+6]=b.x,$[M+7]=b.y,$[M+8]=b.z;var X=C.vertexNormals;if(3===X.length){var x=X[0],L=X[1],u=X[2];p[M]=x.x,p[M+1]=x.y,p[M+2]=x.z,p[M+3]=L.x,p[M+4]=L.y,p[M+5]=L.z,p[M+6]=u.x,p[M+7]=u.y,p[M+8]=u.z}else{var l=C.normal;p[M]=l.x,p[M+1]=l.y,p[M+2]=l.z,p[M+3]=l.x,p[M+4]=l.y,p[M+5]=l.z,p[M+6]=l.x,p[M+7]=l.y,p[M+8]=l.z}var U=z[0][N][0],Y=z[0][N][1],o=z[0][N][2];j[H]=U.x,j[H+1]=U.y,j[H+2]=Y.x,j[H+3]=Y.y,j[H+4]=o.x,j[H+5]=o.y},ih=function(s,B,I,A,w,j,R,i,X){I==$&&(I=!0),A==$&&(A=!0),R==$&&(R=1),i==$&&(i=0);var k=new ye;
        return cp(k,s,B,X),th(new gk(k,{top:I,bottom:A,curveSegments:w,amount:R,repeatUVLength:j},-R/2+i))},Mb=function(K,N){this.x=K||0,this.y=N||0};Mb.prototype={constructor:Mb,add:function(n){return this.x+=n.x,this.y+=n.y,this},sub:function(f){return this.x-=f.x,this.y-=f.y,this},equals:function(w){return w.x===this.x&&w.y===this.y},multiplyScalar:function(o){return this.x*=o,this.y*=o,this},distanceTo:function(L){return q(this.distanceToSquared(L))},distanceToSquared:function(I){var J=this.x-I.x,F=this.y-I.y;return J*J+F*F},clone:function(){return new Mb(this.x,this.y)}};var aj=function(Q,E,P){this.x=Q||0,this.y=E||0,this.z=P||0};aj.prototype={constructor:aj,set:function(X,D,w){return this.x=X,this.y=D,this.z=w,this},setY:function(B){return this.y=B,this},copy:function(E){return this.x=E.x,this.y=E.y,this.z=E.z,this},add:function(J){return this.x+=J.x,this.y+=J.y,this.z+=J.z,this},addVectors:function(U,v){return this.x=U.x+v.x,this.y=U.y+v.y,this.z=U.z+v.z,this},sub:function(d){return this.x-=d.x,this.y-=d.y,this.z-=d.z,this},subVectors:function(d,C){return this.x=d.x-C.x,this.y=d.y-C.y,this.z=d.z-C.z,this},multiplyScalar:function(U){return this.x*=U,this.y*=U,this.z*=U,this},applyMatrix4:function(l){var A=this.x,i=this.y,j=this.z,K=l.elements;return this.x=K[0]*A+K[4]*i+K[8]*j+K[12],this.y=K[1]*A+K[5]*i+K[9]*j+K[13],this.z=K[2]*A+K[6]*i+K[10]*j+K[14],this},divideScalar:function(A){if(0!==A){var g=1/A;this.x*=g,this.y*=g,this.z*=g}else this.x=0,this.y=0,this.z=0;return this},dot:function(j){return this.x*j.x+this.y*j.y+this.z*j.z},length:function(){return q(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){return this.divideScalar(this.length())},cross:function(u){var $=this.x,l=this.y,M=this.z;return this.x=l*u.z-M*u.y,this.y=M*u.x-$*u.z,this.z=$*u.y-l*u.x,this},crossVectors:function(l,X){var j=l.x,g=l.y,O=l.z,R=X.x,i=X.y,I=X.z;return this.x=g*I-O*i,this.y=O*R-j*I,this.z=j*i-g*R,this},distanceTo:function(u){return q(this.distanceToSquared(u))},distanceToSquared:function(d){var E=this.x-d.x,h=this.y-d.y,S=this.z-d.z;return E*E+h*h+S*S},clone:function(){return new aj(this.x,this.y,this.z)}};var Ll=function(){this.elements=new Float32Array(16)};Ll.prototype={constructor:Ll,set:function(r,t,x,p,d,q,R,k,u,i,K,S,v,$,a,F){var M=this.elements;return M[0]=r,M[4]=t,M[8]=x,M[12]=p,M[1]=d,M[5]=q,M[9]=R,M[13]=k,M[2]=u,M[6]=i,M[10]=K,M[14]=S,M[3]=v,M[7]=$,M[11]=a,M[15]=F,this},makeRotationAxis:function(m,B){var i=h(B),c=d(B),N=1-i,A=m.x,k=m.y,U=m.z,P=N*A,$=N*k;return this.set(P*A+i,P*k-c*U,P*U+c*k,0,P*k+c*U,$*k+i,$*U-c*A,0,P*U-c*k,$*U+c*A,N*U*U+i,0,0,0,0,1),this}};var co=function(_){this.repeatUVLength=_};co.prototype={generateTopUV:function(J,O,g,S,X,w,s){var k,d,Y,n,H=J.vertices,z=H[S].x,h=H[S].y,C=H[X].x,m=H[X].y,I=H[w].x,x=H[w].y,K=this.repeatUVLength;if(K)k=0,d=0,Y=K,n=K;else{this._bb||(this._bb=O.getBoundingBox());var L=this._bb;k=L.minX,d=L.minY,Y=L.maxX-k,n=L.maxY-d}return s?[new Mb((z-k)/Y,(h-d)/n),new Mb((C-k)/Y,(m-d)/n),new Mb((I-k)/Y,(x-d)/n)]:[new Mb((z-k)/Y,1-(h-d)/n),new Mb((C-k)/Y,1-(m-d)/n),new Mb((I-k)/Y,1-(x-d)/n)]},generateBottomUV:function(a,X,q,N,i,M){return this.generateTopUV(a,X,q,N,i,M,!0)},generateSideWallUV:function(v,p,g,o,P,c,H,E,h,U,r,y){if(!this._cl){for(var N,_,m=[],j=0,W=g.length,u=0;W>u;u++){N=g[u],_=g[(u+1)%W];var w=N.x-_.x,C=N.y-_.y,d=q(w*w+C*C);m.push(j),j+=d}for(var u=0;W>u;u++)m[u]/=j;this._cl=m}var m=this._cl,l=1-h/U,t=1-(h+1)/U,n=m[r],A=m[y];return A>n&&(n+=1),[new Mb(n,l),new Mb(A,l),new Mb(A,t),new Mb(n,t)]}};var Cg=function(J,T,q,S,C,K){this.a=J,this.b=T,this.c=q,this.i=K,this.normal=S instanceof aj?S:new aj,this.vertexNormals=S instanceof Array?S:[]};Cg.prototype={constructor:Cg};var Yc=function(){},fd=Yc.prototype;fd.getPointAt=function(C){var y=this.getUtoTmapping(C);return this.getPoint(y)},fd.getPoints=function(p){p||(p=5);var d,m=[];for(d=0;p>=d;d++)m.push(this.getPoint(d/p));return m},fd.getSpacedPoints=function(P){P||(P=5);var j,O=[];for(j=0;P>=j;j++)O.push(this.getPointAt(j/P));return O},fd.getLength=function(){var W=this.getLengths();return W[W.length-1]},fd.getLengths=function(w){if(w||(w=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==w+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var E,$,z=[],K=this.getPoint(0),u=0;for(z.push(0),$=1;w>=$;$++)E=this.getPoint($/w),u+=E.distanceTo(K),z.push(u),K=E;return this.cacheArcLengths=z,z},fd.getUtoTmapping=function(k,s){var Z,_=this.getLengths(),p=0,W=_.length;Z=s?s:k*_[W-1];for(var M,x=0,o=W-1;o>=x;)if(p=r(x+(o-x)/2),M=_[p]-Z,0>M)x=p+1;else{if(!(M>0)){o=p;break}o=p-1}if(p=o,_[p]==Z){var R=p/(W-1);return R}var L=_[p],C=_[p+1],I=C-L,u=(Z-L)/I,R=(p+u)/(W-1);return R},fd.getTangent=function(I){var W=1e-4,S=I-W,i=I+W;0>S&&(S=0),i>1&&(i=1);var $=this.getPoint(S),q=this.getPoint(i),A=q.clone().sub($);return A.normalize()},fd.getTangentAt=function(b){var c=this.getUtoTmapping(b);return this.getTangent(c)},Yc.create=function(P,k){return P.prototype=Wg(Yc.prototype),P.prototype.getPoint=k,P};var ks=function(){this.curves=[],this.autoClose=!1},qf=ks.prototype=Wg(fd);qf.add=function(I){this.curves.push(I)},qf.closePath=function(){var I=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);I.equals(e)||this.curves.push(new zi(e,I))},qf.getPoint=function(D){for(var O,b,i=D*this.getLength(),L=this.getCurveLengths(),k=0;k<L.length;){if(L[k]>=i){O=L[k]-i,b=this.curves[k];var V=1-O/b.getLength();return b.getPointAt(V)}k++}return null},qf.getLength=function(){var C=this.getCurveLengths();return C[C.length-1]},qf.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var L,s=[],H=0,g=this.curves.length;for(L=0;g>L;L++)H+=this.curves[L].getLength(),s.push(H);return this.cacheLengths=s,s},qf.getTransformedPoints=function(p){return this.getPoints(p)},qf.getBoundingBox=function(){var l,M,r,n,c,S,A=this.getPoints();l=M=Number.NEGATIVE_INFINITY,n=c=Number.POSITIVE_INFINITY;var f,b,G,Z,X=A[0]instanceof aj;for(Z=X?new aj:new Mb,b=0,G=A.length;G>b;b++)f=A[b],f.x>l&&(l=f.x),f.x<n&&(n=f.x),f.y>M&&(M=f.y),f.y<c&&(c=f.y),X&&(f.z>r&&(r=f.z),f.z<S&&(S=f.z)),Z.add(f);var m={minX:n,minY:c,maxX:l,maxY:M};return X&&(m.maxZ=r,m.minZ=S),m};var $q=function(k){ks.call(this),this.actions=[],k&&this.fromPoints(k)},jl=$q.prototype=Wg(ks.prototype),Kd="moveTo",vj="lineTo",ej="quadraticCurveTo",kb="bezierCurveTo",Id="arc",qp="ellipse";jl.fromPoints=function(_){this.moveTo(_[0].x,_[0].y);for(var q=1,n=_.length;n>q;q++)this.lineTo(_[q].x,_[q].y)},jl.moveTo=function(){var B=Array.prototype.slice.call(arguments);this.actions.push({action:Kd,args:B})},jl.lineTo=function(H,N){var f=Array.prototype.slice.call(arguments),W=this.actions[this.actions.length-1].args,s=W[W.length-2],O=W[W.length-1],Y=new zi(new Mb(s,O),new Mb(H,N));this.curves.push(Y),this.actions.push({action:vj,args:f})},jl.quadraticCurveTo=function(N,i,Z,t){var L=Array.prototype.slice.call(arguments),s=this.actions[this.actions.length-1].args,W=s[s.length-2],O=s[s.length-1],S=new ci(new Mb(W,O),new Mb(N,i),new Mb(Z,t));this.curves.push(S),this.actions.push({action:ej,args:L})},jl.bezierCurveTo=function(_,R,F,v,g,f){var K=Array.prototype.slice.call(arguments),J=this.actions[this.actions.length-1].args,t=J[J.length-2],d=J[J.length-1],D=new lo(new Mb(t,d),new Mb(_,R),new Mb(F,v),new Mb(g,f));this.curves.push(D),this.actions.push({action:kb,args:K})},jl.arc=function(r,j,b,X,y,f){var w=this.actions[this.actions.length-1].args,P=w[w.length-2],N=w[w.length-1];this.absarc(r+P,j+N,b,X,y,f)},jl.absarc=function(e,Y,k,t,M,E){this.absellipse(e,Y,k,k,t,M,E)},jl.ellipse=function(Y,K,b,i,m,h,o){var f=this.actions[this.actions.length-1].args,A=f[f.length-2],Q=f[f.length-1];this.absellipse(Y+A,K+Q,b,i,m,h,o)},jl.absellipse=function(X,b,N,o,O,k,G){var g=Array.prototype.slice.call(arguments),x=new Hr(X,b,N,o,O,k,G);this.curves.push(x);var z=x.getPoint(1);g.push(z.x),g.push(z.y),this.actions.push({action:qp,args:g})},jl.getSpacedPoints=function(y){y||(y=40);for(var K=[],D=0;y>D;D++)K.push(this.getPoint(D/y));return K},jl.getPoints=function(x,$){x=x||12;var H,l,q,e,A,w,_,F,y,Q,S,E,r,j,k,R,a,I,s=[];for(H=0,l=this.actions.length;l>H;H++)switch(q=this.actions[H],e=q.action,A=q.args,e){case Kd:s.push(new Mb(A[0],A[1]));break;case vj:s.push(new Mb(A[0],A[1]));break;case ej:for(w=A[2],_=A[3],Q=A[0],S=A[1],s.length>0?(j=s[s.length-1],E=j.x,r=j.y):(j=this.actions[H-1].args,E=j[j.length-2],r=j[j.length-1]),k=1;x>=k;k++)R=k/x,a=Jn.b2(R,E,Q,w),I=Jn.b2(R,r,S,_),s.push(new Mb(a,I));break;case kb:for(w=A[4],_=A[5],Q=A[0],S=A[1],F=A[2],y=A[3],s.length>0?(j=s[s.length-1],E=j.x,r=j.y):(j=this.actions[H-1].args,E=j[j.length-2],r=j[j.length-1]),k=1;x>=k;k++)R=k/x,a=Jn.b3(R,E,Q,F,w),I=Jn.b3(R,r,S,y,_),s.push(new Mb(a,I));break;case Id:var V,C=A[0],O=A[1],p=A[2],o=A[3],M=A[4],Y=!!A[5],L=M-o,v=2*x;for(k=1;v>=k;k++)R=k/v,Y||(R=1-R),V=o+R*L,a=C+p*h(V),I=O+p*d(V),s.push(new Mb(a,I));break;case qp:var V,C=A[0],O=A[1],X=A[2],B=A[3],o=A[4],M=A[5],Y=!!A[6],L=M-o,v=2*x;for(k=1;v>=k;k++)R=k/v,Y||(R=1-R),V=o+R*L,a=C+X*h(V),I=O+B*d(V),s.push(new Mb(a,I))}var K=s[s.length-1],U=1e-10;return m(K.x-s[0].x)<U&&m(K.y-s[0].y)<U&&s.splice(s.length-1,1),$&&s.push(s[0]),s},jl.toShapes=function(w,y){function Y(P){var F,x,n,Y,u,Z=[],f=new $q;for(F=0,x=P.length;x>F;F++)n=P[F],u=n.args,Y=n.action,Y==Kd&&0!=f.actions.length&&(Z.push(f),f=new $q),f[Y].apply(f,u);return 0!=f.actions.length&&Z.push(f),Z}function k(X){for(var J=[],x=0,b=X.length;b>x;x++){var V=X[x],j=new ye;j.actions=V.actions,j.curves=V.curves,J.push(j)}return J}function x(o,T){for(var A=1e-10,B=T.length,h=!1,G=B-1,X=0;B>X;G=X++){var v=T[G],J=T[X],H=J.x-v.x,n=J.y-v.y;if(m(n)>A){if(0>n&&(v=T[X],H=-H,J=T[G],n=-n),o.y<v.y||o.y>J.y)continue;if(o.y==v.y){if(o.x==v.x)return!0}else{var I=n*(o.x-v.x)-H*(o.y-v.y);if(0==I)return!0;if(0>I)continue;h=!h}}else{if(o.y!=v.y)continue;if(J.x<=o.x&&o.x<=v.x||v.x<=o.x&&o.x<=J.x)return!0}}return h}var W=Y(this.actions);if(0==W.length)return[];if(y===!0)return k(W);var Q,h,_,P=[];if(1==W.length)return h=W[0],_=new ye,_.actions=h.actions,_.curves=h.curves,P.push(_),P;var G=!ye.Utils.isClockWise(W[0].getPoints());G=w?!G:G;var E,u=[],i=[],s=[],v=0;i[v]=K,s[v]=[];var c,X;for(c=0,X=W.length;X>c;c++)h=W[c],E=h.getPoints(),Q=Jn.isClockWise(E),Q=w?!Q:Q,Q?(!G&&i[v]&&v++,i[v]={s:new ye,p:E},i[v].s.actions=h.actions,i[v].s.curves=h.curves,G&&v++,s[v]=[]):s[v].push({h:h,p:E[0]});if(!i[0])return k(W);if(i.length>1){for(var I=!1,M=[],g=0,a=i.length;a>g;g++)u[g]=[];for(var g=0,a=i.length;a>g;g++){i[g];for(var b=s[g],e=0;e<b.length;e++){for(var B=b[e],$=!0,j=0;j<i.length;j++)x(B.p,i[j].p)&&(g!=j&&M.push({froms:g,tos:j,hole:e}),$?($=!1,u[j].push(B)):I=!0);$&&u[g].push(B)}}M.length>0&&(I||(s=u))}var N,q,f;for(c=0,X=i.length;X>c;c++)for(_=i[c].s,P.push(_),N=s[c],q=0,f=N.length;f>q;q++)_.holes.push(N[q].h);return P};var ye=function(){$q.apply(this,arguments),this.holes=[]},Ml=ye.prototype=Wg(jl);Ml.getPointsHoles=function(N){var l,$=this.holes.length,G=[];for(l=0;$>l;l++)G[l]=this.holes[l].getTransformedPoints(N);return G},Ml.extractAllPoints=function(i){return{shape:this.getTransformedPoints(i),holes:this.getPointsHoles(i)}},Ml.extractPoints=function(l){return this.extractAllPoints(l)};var Jn={triangulateShape:function(u,A){function R(I,o,P){return I.x!=o.x?I.x<o.x?I.x<=P.x&&P.x<=o.x:o.x<=P.x&&P.x<=I.x:I.y<o.y?I.y<=P.y&&P.y<=o.y:o.y<=P.y&&P.y<=I.y}function $(C,W,h,N,$){var T=1e-10,G=W.x-C.x,Z=W.y-C.y,p=N.x-h.x,g=N.y-h.y,E=C.x-h.x,q=C.y-h.y,k=Z*p-G*g,z=Z*E-G*q;if(m(k)>T){var y;if(k>0){if(0>z||z>k)return[];if(y=g*E-p*q,0>y||y>k)return[]}else{if(z>0||k>z)return[];if(y=g*E-p*q,y>0||k>y)return[]}if(0==y)return!$||0!=z&&z!=k?[C]:[];if(y==k)return!$||0!=z&&z!=k?[W]:[];if(0==z)return[h];if(z==k)return[N];var D=y/k;return[{x:C.x+D*G,y:C.y+D*Z}]}if(0!=z||g*E!=p*q)return[];var _=0==G&&0==Z,n=0==p&&0==g;if(_&&n)return C.x!=h.x||C.y!=h.y?[]:[C];if(_)return R(h,N,C)?[C]:[];if(n)return R(C,W,h)?[h]:[];var A,w,X,Q,e,r,Y,b;return 0!=G?(C.x<W.x?(A=C,X=C.x,w=W,Q=W.x):(A=W,X=W.x,w=C,Q=C.x),h.x<N.x?(e=h,Y=h.x,r=N,b=N.x):(e=N,Y=N.x,r=h,b=h.x)):(C.y<W.y?(A=C,X=C.y,w=W,Q=W.y):(A=W,X=W.y,w=C,Q=C.y),h.y<N.y?(e=h,Y=h.y,r=N,b=N.y):(e=N,Y=N.y,r=h,b=h.y)),Y>=X?Y>Q?[]:Q==Y?$?[]:[e]:b>=Q?[e,w]:[e,r]:X>b?[]:X==b?$?[]:[A]:b>=Q?[A,w]:[A,r]}function L(y,L,A,q){var e=1e-10,n=L.x-y.x,X=L.y-y.y,v=A.x-y.x,E=A.y-y.y,I=q.x-y.x,k=q.y-y.y,g=n*E-X*v,_=n*k-X*I;if(m(g)>e){var w=I*E-k*v;return g>0?_>=0&&w>=0:_>=0||w>=0}return _>0}function Q(o,F){function S(v,R){var l=c.length-1,u=v-1;0>u&&(u=l);var o=v+1;o>l&&(o=0);var x=L(c[v],c[u],c[o],O[R]);if(!x)return!1;var q=O.length-1,V=R-1;0>V&&(V=q);var w=R+1;return w>q&&(w=0),x=L(O[R],O[V],O[w],c[v]),x?!0:!1}function X(U,m){var y,z,B;for(y=0;y<c.length;y++)if(z=y+1,z%=c.length,B=$(U,m,c[y],c[z],!0),B.length>0)return!0;return!1}function B(M,J){var x,S,D,K,k;for(x=0;x<Q.length;x++)for(S=F[Q[x]],D=0;D<S.length;D++)if(K=D+1,K%=S.length,k=$(M,J,S[D],S[K],!0),k.length>0)return!0;return!1}for(var O,A,e,x,v,N,E,V,J,m,_,c=o.concat(),Q=[],T=[],h=0,t=F.length;t>h;h++)Q.push(h);for(var k=0,P=2*Q.length;Q.length>0&&(P--,!(0>P));)for(e=k;e<c.length;e++){x=c[e],A=-1;for(var h=0;h<Q.length;h++)if(N=Q[h],E=x.x+":"+x.y+":"+N,T[E]===K){O=F[N];for(var H=0;H<O.length;H++)if(v=O[H],S(e,H)&&!X(x,v)&&!B(x,v)){A=H,Q.splice(h,1),V=c.slice(0,e+1),J=c.slice(e),m=O.slice(A),_=O.slice(0,A+1),c=V.concat(m).concat(_).concat(J),k=e;break}if(A>=0)break;T[E]=!0}if(A>=0)break}return c}for(var q,l,f,z,H,c,I={},j=u.concat(),x=0,n=A.length;n>x;x++)Array.prototype.push.apply(j,A[x]);for(q=0,l=j.length;l>q;q++)H=j[q].x+":"+j[q].y,I[H]!==K,I[H]=q;var v=Q(u,A),B=eg.Triangulate(v,!1);for(q=0,l=B.length;l>q;q++)for(z=B[q],f=0;3>f;f++)H=z[f].x+":"+z[f].y,c=I[H],c!==K&&(z[f]=c);return B.concat()},isClockWise:function(L){return eg.Triangulate.area(L)<0},b2p0:function(J,R){var O=1-J;return O*O*R},b2p1:function(q,M){return 2*(1-q)*q*M},b2p2:function(v,c){return v*v*c},b2:function(m,O,p,y){return this.b2p0(m,O)+this.b2p1(m,p)+this.b2p2(m,y)},b3p0:function(X,T){var v=1-X;return v*v*v*T},b3p1:function(X,O){var j=1-X;return 3*j*j*X*O},b3p2:function(Q,b){var j=1-Q;return 3*j*Q*Q*b},b3p3:function(p,P){return p*p*p*P},b3:function(D,n,j,T,l){return this.b3p0(D,n)+this.b3p1(D,j)+this.b3p2(D,T)+this.b3p3(D,l)}},eg={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(r){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(Y){var $=Y.familyName.toLowerCase(),A=this;return A.faces[$]=A.faces[$]||{},A.faces[$][Y.cssFontWeight]=A.faces[$][Y.cssFontWeight]||{},A.faces[$][Y.cssFontWeight][Y.cssFontStyle]=Y,A.faces[$][Y.cssFontWeight][Y.cssFontStyle]=Y,Y},drawText:function(n){var $,l=this.getFace(),x=this.size/l.resolution,s=0,I=String(n).split(""),A=I.length,V=[];for($=0;A>$;$++){var u=new $q,t=this.extractGlyphPoints(I[$],l,x,s,u);s+=t.offset,V.push(t.path)}var F=s/2;return{paths:V,offset:F}},extractGlyphPoints:function(M,O,B,$,Z){var N,Y,t,C,l,T,s,D,k,n,E,d,L,g,G,X,S,x,m,J=[],p=O.glyphs[M]||O.glyphs["?"];if(p){if(p.o)for(C=p._cachedOutline||(p._cachedOutline=p.o.split(" ")),T=C.length,s=B,D=B,N=0;T>N;)switch(l=C[N++]){case"m":k=C[N++]*s+$,n=C[N++]*D,Z.moveTo(k,n);break;case"l":k=C[N++]*s+$,n=C[N++]*D,Z.lineTo(k,n);break;case"q":if(E=C[N++]*s+$,d=C[N++]*D,G=C[N++]*s+$,X=C[N++]*D,Z.quadraticCurveTo(G,X,E,d),m=J[J.length-1])for(L=m.x,g=m.y,Y=1,t=this.divisions;t>=Y;Y++){var P=Y/t;Jn.b2(P,L,G,E),Jn.b2(P,g,X,d)}break;case"b":if(E=C[N++]*s+$,d=C[N++]*D,G=C[N++]*s+$,X=C[N++]*D,S=C[N++]*s+$,x=C[N++]*D,Z.bezierCurveTo(G,X,S,x,E,d),m=J[J.length-1])for(L=m.x,g=m.y,Y=1,t=this.divisions;t>=Y;Y++){var P=Y/t;Jn.b3(P,L,G,S,E),Jn.b3(P,g,X,x,d)}}return{offset:p.ha*B,path:Z}}}};eg.generateShapes=function(P,q){q=q||{};var i=q.size!==K?q.size:100,H=q.curveSegments!==K?q.curveSegments:4,c=q.font!==K?q.font:"helvetiker",D=q.weight!==K?q.weight:"normal",z=q.style!==K?q.style:"normal";eg.size=i,eg.divisions=H,eg.face=c,eg.weight=D,eg.style=z;for(var Z=eg.drawText(P),Y=Z.paths,I=[],w=0,M=Y.length;M>w;w++)Array.prototype.push.apply(I,Y[w].toShapes());return I},function(H){var r=1e-10,e=function(H,M){var w=H.length;if(3>w)return null;var r,o,O,a=[],U=[],I=[];if(Y(H)>0)for(o=0;w>o;o++)U[o]=o;else for(o=0;w>o;o++)U[o]=w-1-o;var K=w,s=2*K;for(o=K-1;K>2;){if(s--<=0)return M?I:a;if(r=o,r>=K&&(r=0),o=r+1,o>=K&&(o=0),O=o+1,O>=K&&(O=0),m(H,r,o,O,K,U)){var l,g,x,C,y;for(l=U[r],g=U[o],x=U[O],a.push([H[l],H[g],H[x]]),I.push([U[r],U[o],U[O]]),C=o,y=o+1;K>y;C++,y++)U[C]=U[y];K--,s=2*K}}return M?I:a},Y=function(k){for(var d=k.length,y=0,z=d-1,e=0;d>e;z=e++)y+=k[z].x*k[e].y-k[e].x*k[z].y;return.5*y},m=function(P,B,j,O,Q,V){var t,e,w,o,T,c,U,i,f;if(e=P[V[B]].x,w=P[V[B]].y,o=P[V[j]].x,T=P[V[j]].y,c=P[V[O]].x,U=P[V[O]].y,r>(o-e)*(U-w)-(T-w)*(c-e))return!1;var h,g,H,y,N,v,Z,R,D,p,u,X,W,K,S;for(h=c-o,g=U-T,H=e-c,y=w-U,N=o-e,v=T-w,t=0;Q>t;t++)if(i=P[V[t]].x,f=P[V[t]].y,!(i===e&&f===w||i===o&&f===T||i===c&&f===U)&&(Z=i-e,R=f-w,D=i-o,p=f-T,u=i-c,X=f-U,S=h*p-g*D,W=N*R-v*Z,K=H*X-y*u,S>=-r&&K>=-r&&W>=-r))return!1;return!0};return H.Triangulate=e,H.Triangulate.area=Y,H}(eg),y._typeface_js={faces:eg.faces,loadFace:eg.loadFace};var Jm=function(){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]]},yh=Jm.prototype={constructor:Jm,computeFaceNormals:function(){for(var J=new aj,d=new aj,T=0,x=this.faces.length;x>T;T++){var e=this.faces[T],i=this.vertices[e.a],q=this.vertices[e.b],p=this.vertices[e.c];J.subVectors(p,q),d.subVectors(i,q),J.cross(d),J.normalize(),e.normal.copy(J)}},computeVertexNormals:function(Y){var E,k,i,d,J,D;for(D=new Array(this.vertices.length),E=0,k=this.vertices.length;k>E;E++)D[E]=new aj;if(Y){var Z,w,O,X=new aj,I=new aj;for(i=0,d=this.faces.length;d>i;i++)J=this.faces[i],Z=this.vertices[J.a],w=this.vertices[J.b],O=this.vertices[J.c],X.subVectors(O,w),I.subVectors(Z,w),X.cross(I),D[J.a].add(X),D[J.b].add(X),D[J.c].add(X)}else for(i=0,d=this.faces.length;d>i;i++)J=this.faces[i],D[J.a].add(J.normal),D[J.b].add(J.normal),D[J.c].add(J.normal);for(E=0,k=this.vertices.length;k>E;E++)D[E].normalize();for(i=0,d=this.faces.length;d>i;i++)J=this.faces[i],J.vertexNormals[0]=D[J.a].clone(),J.vertexNormals[1]=D[J.b].clone(),J.vertexNormals[2]=D[J.c].clone()},mergeVertices:function(){var F,G,s,S,z,n,H,y,f={},$=[],x=[],N=4,q=c(10,N);for(s=0,S=this.vertices.length;S>s;s++)F=this.vertices[s],G=B(F.x*q)+"_"+B(F.y*q)+"_"+B(F.z*q),f[G]===K?(f[G]=s,$.push(this.vertices[s]),x[s]=$.length-1):x[s]=x[f[G]];var k=[];for(s=0,S=this.faces.length;S>s;s++){z=this.faces[s],z.a=x[z.a],z.b=x[z.b],z.c=x[z.c],n=[z.a,z.b,z.c];for(var i=0;3>i;i++)if(n[i]==n[(i+1)%3]){k.push(s);break}}for(s=k.length-1;s>=0;s--){var Z=k[s];for(this.faces.splice(Z,1),H=0,y=this.faceVertexUvs.length;y>H;H++)this.faceVertexUvs[H].splice(Z,1)}var M=this.vertices.length-$.length;return this.vertices=$,M}},Hr=function(R,A,E,Q,Y,y,I){this.aX=R,this.aY=A,this.xRadius=E,this.yRadius=Q,this.aStartAngle=Y,this.aEndAngle=y,this.aClockwise=I};Hr.prototype=Wg(fd),Hr.prototype.getPoint=function(m){var c,R=this.aEndAngle-this.aStartAngle;0>R&&(R+=i),R>i&&(R-=i),c=this.aClockwise===!0?this.aEndAngle+(1-m)*(i-R):this.aStartAngle+m*R;var Y=this.aX+this.xRadius*h(c),U=this.aY+this.yRadius*d(c);return new Mb(Y,U)};var zi=function(V,K){this.v1=V,this.v2=K},$b=zi.prototype=Wg(fd);$b.getPoint=function(z){var a=this.v2.clone().sub(this.v1);return a.multiplyScalar(z).add(this.v1),a},$b.getPointAt=function(C){return this.getPoint(C)},$b.getTangent=function(){var C=this.v2.clone().sub(this.v1);return C.normalize()};var ci=function(Y,Q,r){this.v0=Y,this.v1=Q,this.v2=r};ci.prototype=Wg(fd),ci.prototype.getPoint=function(u){var o,m;return o=Jn.b2(u,this.v0.x,this.v1.x,this.v2.x),m=Jn.b2(u,this.v0.y,this.v1.y,this.v2.y),new Mb(o,m)};var lo=function(n,Z,B,J){this.v0=n,this.v1=Z,this.v2=B,this.v3=J};lo.prototype=Wg(fd),lo.prototype.getPoint=function(d){var X,o;return X=Jn.b3(d,this.v0.x,this.v1.x,this.v2.x,this.v3.x),o=Jn.b3(d,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new Mb(X,o)},Yc.create(function(r,D){this.v1=r,this.v2=D},function(i){var X=new aj;return X.subVectors(this.v2,this.v1),X.multiplyScalar(i),X.add(this.v1),X});var Xr=Yc.create(function(X,a,g){this.v0=X,this.v1=a,this.v2=g},function(_){var t,u,I;return t=Jn.b2(_,this.v0.x,this.v1.x,this.v2.x),u=Jn.b2(_,this.v0.y,this.v1.y,this.v2.y),I=Jn.b2(_,this.v0.z,this.v1.z,this.v2.z),new aj(t,u,I)}),Qn=Yc.create(function(J,d,z,u){this.v0=J,this.v1=d,this.v2=z,this.v3=u},function(F){var Q,y,J;return Q=Jn.b3(F,this.v0.x,this.v1.x,this.v2.x,this.v3.x),y=Jn.b3(F,this.v0.y,this.v1.y,this.v2.y,this.v3.y),J=Jn.b3(F,this.v0.z,this.v1.z,this.v2.z,this.v3.z),new aj(Q,y,J)}),Pi=function(P,m,N,n,Y,S,D,W){Jm.call(this),n=n!==K?n:.5,Y=Y!==K?Y:.5,W=W!==K?W:1,P=P||8,S=S||0,D=D||i;var p,r,u=1,B=W/2,$=[],w=[],b=this.vertices,y=this.faces,F=this.faceVertexUvs;for(r=0;u>=r;r++){var T=[],v=[],c=r/u,E=c*(Y-n)+n;for(p=0;P>=p;p++){var G=p/P,x=new aj,j=-(G*D+S);x.z=E*d(j),x.y=-c*W+B,x.x=E*h(j),b.push(x),T.push(b.length-1),v.push(new Mb(G,c))}$.push(T),w.push(v)}var X,s,e=(Y-n)/W;for(p=0;P>p;p++)for(0!==n?(X=b[$[0][p]].clone(),s=b[$[0][p+1]].clone()):(X=b[$[1][p]].clone(),s=b[$[1][p+1]].clone()),X.setY(q(X.x*X.x+X.z*X.z)*e).normalize(),s.setY(q(s.x*s.x+s.z*s.z)*e).normalize(),r=0;u>r;r++){var I=$[r][p],C=$[r+1][p],g=$[r+1][p+1],O=$[r][p+1],k=X.clone(),l=X.clone(),Z=s.clone(),R=s.clone(),L=w[r][p].clone(),z=w[r+1][p].clone(),M=w[r+1][p+1].clone(),V=w[r][p+1].clone();y.push(new Cg(I,C,O,[k,l,R])),F[0].push([L,z,V]),y.push(new Cg(C,g,O,[l.clone(),Z,R.clone()])),F[0].push([z.clone(),M,V.clone()])}if(m&&n>0)for(this.vertices.push(new aj(0,B,0)),p=0;P>p;p++){var I=$[0][p],C=$[0][p+1],g=this.vertices.length-1,k=new aj(0,1,0),l=new aj(0,1,0),Z=new aj(0,1,0),L=w[0][p].clone(),z=w[0][p+1].clone(),M=new Mb(z.x,0);y.push(new Cg(I,C,g,[k,l,Z],null,1));var f=p/P*i,t=h(f),U=d(f),_=(p+1)/P*i,A=h(_),a=d(_);F[0].push([new Mb(.5+.5*t,.5+.5*U),new Mb(.5+.5*A,.5+.5*a),new Mb(.5,.5)])}if(N&&Y>0)for(this.vertices.push(new aj(0,-B,0)),p=0;P>p;p++){var I=$[r][p+1],C=$[r][p],g=b.length-1,k=new aj(0,-1,0),l=new aj(0,-1,0),Z=new aj(0,-1,0),L=w[r][p+1].clone(),z=w[r][p].clone();y.push(new Cg(I,C,g,[k,l,Z],null,2));var f=p/P*i,t=h(f),U=d(f),_=(p+1)/P*i,A=h(_),a=d(_);F[0].push([new Mb(.5+.5*A,.5-.5*a),new Mb(.5+.5*t,.5-.5*U),new Mb(.5,.5)])}};Pi.prototype=Wg(yh);var gf=function(b,H,J,u,P,O,M){Jm.call(this),M=M||.5,b=b||16,H=H||16,J=(J!==K?J:0)-L,u=u!==K?u:i,P=P!==K?P:0,O=O!==K?O:L;var F,k,w=[],S=[],o=this.vertices,g=this.faces,v=this.faceVertexUvs;for(k=0;H>=k;k++){var N=[],r=[];for(F=0;b>=F;F++){var E=F/b,T=k/H,C=new aj;C.x=-M*h(J+E*u)*d(P+T*O),C.y=M*h(P+T*O),C.z=M*d(J+E*u)*d(P+T*O),o.push(C),N.push(o.length-1),r.push(new Mb(E,T))}w.push(N),S.push(r)}for(k=0;H>k;k++)for(F=0;b>F;F++){var W=w[k][F+1],Q=w[k][F],I=w[k+1][F],D=w[k+1][F+1],U=o[W].clone().normalize(),$=o[Q].clone().normalize(),G=o[I].clone().normalize(),j=o[D].clone().normalize(),Y=S[k][F+1].clone(),y=S[k][F].clone(),f=S[k+1][F].clone(),A=S[k+1][F+1].clone();m(o[W].y)===M?(Y.x=(Y.x+y.x)/2,g.push(new Cg(W,I,D,[U,G,j])),v[0].push([Y,f,A])):m(o[I].y)===M?(f.x=(f.x+A.x)/2,g.push(new Cg(W,Q,I,[U,$,G])),v[0].push([Y,y,f])):(g.push(new Cg(W,Q,D,[U,$,j])),v[0].push([Y,y,A]),g.push(new Cg(Q,I,D,[$.clone(),G,j.clone()])),v[0].push([y.clone(),f,A.clone()]))}};gf.prototype=Wg(yh);var qg=function(M,H,$,v,x,u){Jm.call(this),M=M||.33,H=H||.17,v=v||8,$=$||6,x=x||0,u=u||i;for(var F=new aj,y=[],B=[],o=0;v>=o;o++)for(var W=o/v*i+L,A=0;$>=A;A++){var t=A/$*u+x;F.x=M*h(t),F.z=-M*d(t);var Y=new aj,s=M+H*h(W);Y.x=s*h(t),Y.z=-s*d(t),Y.y=H*d(W),this.vertices.push(Y),y.push(new Mb(A/$,1-o/v)),B.push(Y.clone().sub(F).normalize())}for(var o=1;v>=o;o++)for(var A=1;$>=A;A++){var c=($+1)*o+A-1,O=($+1)*(o-1)+A-1,q=($+1)*(o-1)+A,p=($+1)*o+A,K=new Cg(c,O,p,[B[c].clone(),B[O].clone(),B[p].clone()]);this.faces.push(K),this.faceVertexUvs[0].push([y[c].clone(),y[O].clone(),y[p].clone()]),K=new Cg(O,q,p,[B[O].clone(),B[q].clone(),B[p].clone()]),this.faces.push(K),this.faceVertexUvs[0].push([y[O].clone(),y[q].clone(),y[p].clone()])}this.computeFaceNormals()};qg.prototype=Wg(yh);var gk=function(V,C,e){return V?(Jm.call(this),V=V instanceof Array?V:[V],this.addShapeList(V,C),xn(this,e),this.computeFaceNormals(),void 0):(V=[],void 0)},sc=gk.prototype=Wg(Jm.prototype);sc.addShapeList=function(h,l){for(var s=h.length,k=0;s>k;k++){var v=h[k];this.addShape(v,l)}},sc.addShape=function(g,Z){function v(){if(Z.bottom)for(var E=0;L>E;E++)n=W[E],X(n[2],n[1],n[0],!0);if(Z.top)for(E=0;L>E;E++)n=W[E],X(n[0]+s*i,n[1]+s*i,n[2]+s*i,!1)}function Y(){var g=0;for(J(p,g),g+=p.length,o=0,u=I.length;u>o;o++)e=I[o],J(e,g),g+=e.length}function J(E,h){for(var K,j,f=E.length;--f>=0;){K=f,j=f-1,0>j&&(j=E.length-1);var N=0,v=i;for(N=0;v>N;N++){var m=s*N,X=s*(N+1),Q=h+K+m,P=h+j+m,J=h+j+X,_=h+K+X;d(Q,P,J,_,E,N,v,K,j)}}}function M(e,o,J){l.vertices.push(new aj(e,o,J))}function X(M,p,e,s){M+=G,p+=G,e+=G,l.faces.push(new Cg(M,p,e,null,null,s?2:1));var f=s?r.generateBottomUV(l,g,Z,M,p,e):r.generateTopUV(l,g,Z,M,p,e);l.faceVertexUvs[0].push(f)}function d(S,N,h,s,P,O,q,A,x){S+=G,N+=G,h+=G,s+=G,l.faces.push(new Cg(S,N,s)),l.faces.push(new Cg(N,h,s));var K=r.generateSideWallUV(l,g,P,Z,S,N,h,s,O,q,A,x);l.faceVertexUvs[0].push([K[0],K[1],K[3]]),l.faceVertexUvs[0].push([K[1],K[2],K[3]])}var N,y,V,c,H,a=Z.amount,$=Z.curveSegments||Ee,i=Z.steps||1,T=Z.extrudePath,E=!1,r=new co(Z.repeatUVLength);T&&(N=T.getSpacedPoints(i),E=!0,y=Z.frames!==K?Z.frames:new Mh.FrenetFrames(T,i,!1),V=new aj,c=new aj,H=new aj);var e,o,u,l=this,G=this.vertices.length,q=g.extractPoints($),C=q.shape,I=q.holes,x=!Jn.isClockWise(C);if(x){for(C=C.reverse(),o=0,u=I.length;u>o;o++)e=I[o],Jn.isClockWise(e)&&(I[o]=e.reverse());x=!1}var W=Jn.triangulateShape(C,I),p=C;for(o=0,u=I.length;u>o;o++)e=I[o],C=C.concat(e);for(var B,n,s=C.length,L=W.length,h=0;s>h;h++)B=C[h],E?(c.copy(y.normals[0]).multiplyScalar(B.x),V.copy(y.binormals[0]).multiplyScalar(B.y),H.copy(N[0]).add(c).add(V),M(H.x,H.y,H.z)):M(B.x,B.y,0);var U;for(U=1;i>=U;U++)for(h=0;s>h;h++)B=C[h],E?(c.copy(y.normals[U]).multiplyScalar(B.x),V.copy(y.binormals[U]).multiplyScalar(B.y),H.copy(N[U]).add(c).add(V),M(H.x,H.y,H.z)):M(B.x,B.y,a/i*U);v(),Y()};var Mh=function(p,F,_,s,q){function G(l,D,M){return W.vertices.push(new aj(l,D,M))-1}Jm.call(this),F=F||64,_=_||1,s=s||8,q=q||!1;var g,$,M,u,V,w,B,a,m,e,N,f,O,b,Y,o,E,L,T,R,H=[],W=this,A=F+1,v=new aj,X=new Mh.FrenetFrames(p,F,q),U=X.tangents,l=X.normals,C=X.binormals;for(this.tangents=U,this.normals=l,this.binormals=C,m=0;A>m;m++)for(H[m]=[],u=m/(A-1),a=p.getPointAt(u),g=U[m],$=l[m],M=C[m],e=0;s>e;e++)V=e/s*i,w=-_*h(V),B=_*d(V),v.copy(a),v.x+=w*$.x+B*M.x,v.y+=w*$.y+B*M.y,v.z+=w*$.z+B*M.z,H[m][e]=G(v.x,v.y,v.z);for(m=0;F>m;m++)for(e=0;s>e;e++)N=q?(m+1)%F:m+1,f=(e+1)%s,O=H[m][e],b=H[N][e],Y=H[N][f],o=H[m][f],E=new Mb(m/F,e/s),L=new Mb((m+1)/F,e/s),T=new Mb((m+1)/F,(e+1)/s),R=new Mb(m/F,(e+1)/s),this.faces.push(new Cg(O,b,o)),this.faceVertexUvs[0].push([E,L,R]),this.faces.push(new Cg(b,Y,o)),this.faceVertexUvs[0].push([L.clone(),T,R.clone()]);this.computeFaceNormals(),this.computeVertexNormals()};Mh.prototype=Wg(yh),Mh.FrenetFrames=function(z,s,j){function M(){e[0]=new aj,h[0]=new aj,K=Number.MAX_VALUE,G=m(i[0].x),p=m(i[0].y),W=m(i[0].z),K>=G&&(K=G,Z.set(1,0,0)),K>=p&&(K=p,Z.set(0,1,0)),K>=W&&Z.set(0,0,1),u.crossVectors(i[0],Z).normalize(),e[0].crossVectors(i[0],u),h[0].crossVectors(i[0],e[0])}var N,K,G,p,W,R,E,Z=new aj,i=[],e=[],h=[],u=new aj,y=new Ll,O=s+1,Q=1e-4;for(this.tangents=i,this.normals=e,this.binormals=h,R=0;O>R;R++)E=R/(O-1),i[R]=z.getTangentAt(E),i[R].normalize();for(M(),R=1;O>R;R++)e[R]=e[R-1].clone(),h[R]=h[R-1].clone(),u.crossVectors(i[R-1],i[R]),u.length()>Q&&(u.normalize(),N=Y(Ig(i[R-1].dot(i[R]),-1,1)),e[R].applyMatrix4(y.makeRotationAxis(u,N))),h[R].crossVectors(i[R],e[R]);if(j)for(N=Y(Ig(e[0].dot(e[O-1]),-1,1)),N/=O-1,i[0].dot(u.crossVectors(e[0],e[O-1]))>0&&(N=-N),R=1;O>R;R++)e[R].applyMatrix4(y.makeRotationAxis(i[R],N*R)),h[R].crossVectors(i[R],e[R])};var $j=function(c,X,o,C){Jm.call(this),X=X||18,o=o||0,C=C==$?i:C;for(var K=1/(c.length-1),j=1/X,R=0,B=X;B>=R;R++)for(var b=o+R*j*C,g=h(b),Q=d(b),y=0,L=c.length;L>y;y++){var G=c[y],S=new aj;S.x=g*G.x-Q*G.y,S.y=Q*G.x+g*G.y,S.z=G.z,this.vertices.push(S)}for(var l=c.length,R=0,B=X;B>R;R++)for(var y=0,L=c.length-1;L>y;y++){var v=y+l*R,q=v,D=v+l,g=v+1+l,W=v+1,m=R*j,F=y*K,z=m+j,s=F+K;this.faces.push(new Cg(q,W,D)),this.faceVertexUvs[0].push([new Mb(m,F),new Mb(m,s),new Mb(z,F)]),this.faces.push(new Cg(D,W,g)),this.faceVertexUvs[0].push([new Mb(z,F),new Mb(m,s),new Mb(z,s)])}this.mergeVertices(),xn(this),this.computeFaceNormals(),this.computeVertexNormals()};$j.prototype=Wg(yh);var Zf=function(j,p){p=p||{};var G=eg.generateShapes(j,p);p.amount=p.height!==K?p.height:50,gk.call(this,G,p)};Zf.prototype=Wg(sc);var kf=X.Node=function(){Cb(kf,this)},hg={X:mm,Y:Ho,Z:Ko},Bo={xyz:"XYZ",xzy:"XZY",yxz:"YXZ",yzx:"YZX",zxy:"ZXY",zyx:"ZYX"},vi="xzy",Jd=function(R,H,c){if(H){var S=H[0],v=H[1],A=H[2];"xzy"===c?(Ho(R,v),Ko(R,A),mm(R,S)):"xyz"===c?(Ko(R,A),Ho(R,v),mm(R,S)):"yxz"===c?(Ko(R,A),mm(R,S),Ho(R,v)):"yzx"===c?(mm(R,S),Ko(R,A),Ho(R,v)):"zxy"===c?(Ho(R,v),mm(R,S),Ko(R,A)):"zyx"===c?(mm(R,S),Ho(R,v),Ko(R,A)):(Ho(R,v),Ko(R,A),mm(R,S))}};Lo("Node",hh,{ms_ac:["rotationMode","tall"],_adjustChildrenToTop:!0,_icon:"node_icon",_image:"node_image",_rotationMode:vi,_64O:0,_rotationX:0,_53O:0,_host:$,_position:{x:0,y:0},_tall:20,_54O:0,getUIClass:function(){return Ck},_22Q:function(){return Uj},p:function(){return 0===arguments.length?this.getPosition():(this.setPosition.apply(this,arguments),this)},p3:function(){return 0===arguments.length?this.getPosition3d():(this.setPosition3d.apply(this,arguments),this)},s3:function(){return 0===arguments.length?this.getSize3d():(this.setSize3d.apply(this,arguments),this)},r3:function(){return 0===arguments.length?this.getRotation3d():(this.setRotation3d.apply(this,arguments),this)},t3:function(){return this.translate3d.apply(this,arguments),this},translate3dBy:function(I,d){jf(I,Sb($,$,this.r3(),this.getRotationMode())),this.translate3d(I[0]*d,I[1]*d,I[2]*d)},translateFront:function(X){this.translate3dBy([0,0,1],X)},translateBack:function(P){this.translate3dBy([0,0,-1],P)},translateLeft:function($){this.translate3dBy([-1,0,0],$)},translateRight:function(T){this.translate3dBy([1,0,0],T)},translateTop:function(l){this.translate3dBy([0,1,0],l)},translateBottom:function(I){this.translate3dBy([0,-1,0],I)},getPosition3d:function(){return[this._position.x,this._54O,this._position.y]},setPosition3d:function(z,U,h){1===arguments.length&&(U=z[1],h=z[2],z=z[0]),this.p(z,h),this.setElevation(U)},translate3d:function(L,J,V){1===arguments.length&&(J=L[1],V=L[2],L=L[0]),this.translate(L,V),this.setElevation(this._54O+J)},getSize3d:function(){return[this.getWidth(),this.getTall(),this.getHeight()]},setSize3d:function(A,o,k){1===arguments.length&&(o=A[1],k=A[2],A=A[0]),this.setSize(A,k),this.setTall(o)},getRotation3d:function(){return[this._rotationX,-this._64O,this._53O]},setRotation3d:function(v,M,K){1===arguments.length&&(M=v[1],K=v[2],v=v[0]),this.setRotationX(v),this.setRotation(-M),this.setRotationZ(K)},setRotationY:function(H){this.setRotation(-H)},getRotationY:function(){return-this._64O},lookAt:function(a,s){s=s||G;var g=this,f=Hl(a,g.p3()),M=Ym(f);s===G?(g.r3([-k(f[1]/M),-t(f[2],f[0])+l,0]),g.setRotationMode("xzy")):s===Aj?(g.r3(0,-t(f[2],f[0]),k(f[1]/M)),g.setRotationMode("zyx")):s===Zd?(g.r3(0,-t(f[2],f[0])+L,-k(f[1]/M)),g.setRotationMode("zyx")):s===tn?(g.r3([-k(f[1]/M)+l,-t(f[2],f[0])+l,0]),g.setRotationMode("xzy")):s===sb&&(g.r3([-k(f[1]/M)-l,-t(f[2],f[0])+l,0]),g.setRotationMode("xzy")),s===cn&&(g.r3([-k(f[1]/M)+L,-t(f[2],f[0])+l,L]),g.setRotationMode("zxy"))},getLoopedEdges:function(){return this._45I},getEdges:function(){return this._70O},getAgentEdges:function(){return this._49I},getHost:function(){return this._host
    },setHost:function(D){var l=this;if(l!==D&&l._host!==D){var R=l._host;R&&R._removeAttach(l),l._host=D,l._host&&l._host._addAttach(l),l.fp("host",R,D),l.onHostChanged(R,D)}},getAttaches:function(){return this._69O},_addAttach:function(q){var M=this;M._69O||(M._69O=new fr),M._69O.add(q),M.fp("attaches",$,q)},_removeAttach:function(F){var T=this;T._69O.remove(F),T._69O.isEmpty()&&delete T._69O,T.fp("attaches",F,$)},getSourceEdges:function(){return this._42I},getTargetEdges:function(){return this._43I},_2I:function(X){var s=this;s._44I||(s._44I=new fr),s._42I||(s._42I=new fr),s._44I.add(X),s._42I.add(X),s._20I()},_4I:function(A){var b=this;b._44I||(b._44I=new fr),b._43I||(b._43I=new fr),b._44I.add(A),b._43I.add(A),b._20I()},_16I:function(w){var y=this;y._44I.remove(w),y._42I.remove(w),y._44I.isEmpty()&&delete y._44I,y._42I.isEmpty()&&delete y._42I,y._20I()},_18I:function(G){var j=this;j._44I.remove(G),j._43I.remove(G),j._44I.isEmpty()&&delete j._44I,j._43I.isEmpty()&&delete j._43I,j._20I()},_20I:function(){var j=this;if(delete j._45I,!j._44I||j._44I.isEmpty())return delete j._70O,void 0;var y;j._44I.each(function(A){A.isLooped()&&(y||(y={}),y[A._id]||(j._45I||(j._45I=new fr),j._45I.add(A),y[A._id]=A))}),y?(j._70O=new fr,j._44I.each(function(n){y[n._id]?"A"===y[n._id]||(y[n._id]="A",j._70O.add(n)):j._70O.add(n)})):j._70O=j._44I},hasAgentEdges:function(){return!!this._49I&&!this._49I.isEmpty()},getSourceAgentEdges:function(){return this._46I},getTargetAgentEdges:function(){return this._47I},_1I:function(n){var h=this;h._46I||(h._46I=new fr),h._48I||(h._48I=new fr),h._46I.add(n),h._48I.add(n),h._19I()},_3I:function(n){var Q=this;Q._47I||(Q._47I=new fr),Q._48I||(Q._48I=new fr),Q._47I.add(n),Q._48I.add(n),Q._19I()},_15I:function(s){var U=this;U._46I.remove(s),U._48I.remove(s),U._46I.isEmpty()&&delete U._46I,U._48I.isEmpty()&&delete U._48I,U._19I()},_17I:function(c){var G=this;G._47I.remove(c),G._48I.remove(c),G._47I.isEmpty()&&delete G._47I,G._48I.isEmpty()&&delete G._48I,G._19I()},_19I:function(){var G=this;delete G._49I;var K=G._48I;if(K&&!K.isEmpty()){var u={};K.each(function(R){u[R._id]?G._49I||(G._49I=new fr):u[R._id]=R}),G._49I?K.each(function(i){u[i._id]&&(G._49I.add(i),delete u[i._id])}):G._49I=K}},getImage:function(){return this._image},setImage:function(C){var x=this,Y=x._image,Q=x.getWidth(),J=x.getHeight();x._image=C,x.fp("image",Y,C),x.fp(Sn,Q,x.getWidth()),x.fp(Bi,J,x.getHeight())},getElevation:function(){return this._54O},setElevation:function(U){var V=this;if(!V._50O){V._50O=1;var h=V._54O;V._54O=U,V.fp(Wr,h,U),delete this._50O}},getRotation:function(){return this._64O},setRotation:function(N){var K=this;if(!K._49O){K._49O=1;var s=K._64O;K._64O=N,K.fp(of,s,N),delete K._49O}},getRotationX:function(){return this._rotationX},setRotationX:function(D){var F=this;if(!F._51O){F._51O=1;var P=F._rotationX;F._rotationX=D,F.fp("rotationX",P,D),delete F._51O}},getRotationZ:function(){return this._53O},setRotationZ:function(Q){var j=this;if(!j._52O){j._52O=1;var u=j._53O;j._53O=Q,j.fp("rotationZ",u,Q),delete j._52O}},getPosition:function(){return this._position},setPosition:function(K,k){var Z=this;if(!Z._50I){Z._50I=1;var b;if(b=2===arguments.length?{x:K,y:k}:K,b.x!==Z._position.x||b.y!==Z._position.y){var r=Z._position;Z._position=b,Z.fp(Ec,r,b)}delete Z._50I}},translate:function(O,N){var W=this._position;this.p(W.x+O,W.y+N)},getWidth:function(){var l=this;if(l._width>=0)return l._width;var Y=Tn(l._image);return Y?ud(Y,l):20},setWidth:function(Z){var c=this,p=c._width;c._width=Z,c.fp(Sn,p,Z)},getHeight:function(){var w=this;if(w._height>=0)return w._height;var h=Tn(w._image);return h?Pq(h,w):20},setHeight:function(C){var i=this,N=i._height;i._height=C,i.fp(Bi,N,C)},setSize:function(I,S){var m=this;2===arguments.length?(m.setWidth(I),m.setHeight(S)):(m.setWidth(I.width),m.setHeight(I.height))},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},setRect:function(F,d,j,H){var T=this;1===arguments.length?(T.p(F.x+F.width/2,F.y+F.height/2),T.setWidth(F.width),T.setHeight(F.height)):(T.p(F+j/2,d+H/2),T.setWidth(j),T.setHeight(H))},getRect:function(){var w=this,k=w.getWidth(),V=w.getHeight();return Xh({x:w._position.x-k/2,y:w._position.y-V/2,width:k,height:V},w._64O)},getCorners:function(H,m){H==$&&(H=0),m==$&&(m=H);var f=this,n=f._position,z=f.getWidth()/2+H,r=f.getHeight()/2+m,p=new yp(f._64O,n.x,n.y);return[p.tf(-z,-r),p.tf(z,-r),p.tf(z,r),p.tf(-z,r)]},rotateAt:function(n,m,Y){var P=this,J=P._position,S=P._64O,v=new yp(S,J.x,J.y).tf(n,m),l=q(n*n+m*m),c=t(J.y-v.y,J.x-v.x)+Y;P.setRotation(S+Y),P.p(v.x+l*h(c),v.y+l*d(c))},onParentChanged:function(){kf.superClass.onParentChanged.apply(this,arguments),this._8I()},_8I:function(){this._70O&&this._70O.each(function(N){N._7I()})},onPropertyChanged:function(d){var p=this;kf.superClass.onPropertyChanged.call(p,d),p._69O&&p._69O.each(function(p){p.handleHostPropertyChange(d)}),p._49I&&p._49I.each(function(t){t.fp("agentChange",!0,!1)})},onHostChanged:function(){this.updateAttach()},handleHostPropertyChange:function(N){this.updateAttach(N)},onStyleChanged:function(J){kf.superClass.onStyleChanged.apply(this,arguments),ge[J]&&this.updateAttach()},updateAttach:function(d){var B=this;B._51I||Jk||(B._51I=1,B._71O(d),delete B._51I)},_71O:function(K){var s,j,A,N,S,C,n=this,p=n._host,T=K?K.property:$,D=K?K.oldValue:$,Y=K?K.newValue:$;if(p instanceof tg){if(T===Wr)n.setElevation(n._54O+Y-D);else if(!K||qr[T]){if(s=n.s("attach.row.index"),j=n.s("attach.column.index"),A=p.getCellRect(s,j),!A)return;N=n.s("attach.row.span"),S=n.s("attach.column.span"),(1!==N||1!==S)&&(A=gb(A,p.getCellRect(s+N-1,j+S-1))),dc(A,n,"attach.padding",1),n.setRect(A)}}else if(p instanceof ln&&(C=n.s("attach.index"))>=0&&(!K||Qi[T])){var g=n.s("attach.thickness");g!=$&&n.setHeight(p.getThickness()*g);var B=n.s("attach.offset"),E=p.getPoints(),O=E.size();if(O>C){var f=E.get(C),y=O===C+1?E.get(0):E.get(C+1),o=[y.x-f.x,y.y-f.y],b=Ym(o);if(b){n.s("attach.offset.relative")&&(B*=b),n.s("attach.offset.opposite")&&(B=b-B);var I={x:f.x+o[0]/b*B,y:f.y+o[1]/b*B},z=n.s("attach.gap");z&&(n.s("attach.gap.relative")&&(z*=p.getThickness()),I=Vp($,I,y,z)),n.p(I),n.setRotation(t(o[1],o[0]))}}}else K&&(T===Ec?n.translate(Y.x-D.x,Y.y-D.y):T===Wr?n.setElevation(n._54O+Y-D):Ph[T]&&n._11Q(p,T,Y-D))},_11Q:function(P,Y,K){var N=this,I=P.p3(),c=Hl(N.p3(),I),G=Cm(),w=Bo[N.getRotationMode()],m=w[0],$=w[1],W=w[2],q=hg[m],n=hg[$],i=hg[W];Y===of&&(Y="rotationY",K=-K),Y===of+m?(i(G,P[ko+W]()),n(G,P[ko+$]()),q(G,K),n(G,-P[ko+$]()),i(G,-P[ko+W]()),N[uc+m](N[ko+m]()+K)):Y===of+$?(i(G,P[ko+W]()),n(G,K),i(G,-P[ko+W]()),N[uc+$](N[ko+$]()+K)):Y===of+W&&(i(G,K),N[uc+W](N[ko+W]()+K)),jf(c,G),N.p3(I[0]+c[0],I[1]+c[1],I[2]+c[2])},isHostOn:function(Z){var G=this;if(G._host&&Z&&Z._69O)for(var F={},o=G._host;o&&o!==G&&!F[o._id];){if(o===Z)return!0;F[o._id]=o,o=o._host}return!1},isLoopedHostOn:function(t){return this.isHostOn(t)&&t.isHostOn(this)},getSerializableProperties:function(){var g=kf.superClass.getSerializableProperties.call(this);return $l(g,{image:1,host:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,position:1,width:1,height:1,tall:1,elevation:1}),g}});var en=X.Edge=function(w,l){var c=this;Cb(en,c),c.setSource(w),c.setTarget(l)};Lo("Edge",hh,{_icon:"edge_icon",getUIClass:function(){return ph},_22Q:function(){return En},getSource:function(){return this._source},getTarget:function(){return this._target},getSourceAgent:function(){return this._40I},getTargetAgent:function(){return this._41I},setSource:function(M){var B=this;if(B._source!==M){var F=B._source;B._source=M,F&&F._16I(B),M&&M._2I(B),B._7I(),B.fp("source",F,M)}},setTarget:function(b){var W=this;if(W._target!==b){var q=W._target;W._target=b,q&&q._18I(W),b&&b._4I(W),W._7I(),W.fp("target",q,b)}},isLooped:function(){var J=this;return J._source===J._target&&!!J._source&&!!J._target},_7I:function(){var c,z=this,L=ls(z);z._40I!==L&&(c=this._40I,c&&c._15I(z),z._40I=L,L&&L._1I(z),z.fp("sourceAgent",c,L),ef(c,z._41I),ef(L,z._41I));var t=ah(z);z._41I!==t&&(c=z._41I,c&&c._17I(z),z._41I=t,t&&t._3I(z),z.fp("targetAgent",c,t),ef(c,z._40I),ef(t,z._40I))},_22I:function(p){this._52I=p,this.fp("edgeGroup",!0,!1)},getEdgeGroup:function(){return this._52I},isEdgeGroupHidden:function(){var M=this;return M._52I&&M._52I.get(0)!==M&&!M.getStyle(si)},getEdgeGroupSize:function(){return this._52I?this._52I.size():1},getEdgeGroupIndex:function(){return this._52I?this._52I.indexOf(this):0},isEdgeGroupAgent:function(){var n=this,P=n._52I;return P&&!n.getStyle(si)&&P.size()>1&&n===P.get(0)},toggle:function(){var T=this._52I,Z=!this.s(si);T&&T.size()>1&&(T.each(function(o){o.s(si,Z)}),T.getSiblings().each(function(M){M!==T&&M.each(function(q){q.fp("edgeGroup",$,M)})}))},setStyle:function(F,Z){(F===ch||"edge.segments"===F)&&(Z=Fm(Z)),en.superClass.setStyle.call(this,F,Z)},onStyleChanged:function(p){en.superClass.onStyleChanged.apply(this,arguments),Je[p]&&ef(this._41I,this._40I)},getSerializableProperties:function(){var r=en.superClass.getSerializableProperties.call(this);return $l(r,{source:1,target:1}),r}});var rn=X.Group=function(){Cb(rn,this)};Lo("Group",kf,{_image:"group_image",_icon:"group_icon",_57O:!1,getUIClass:function(){return Rc},onChildAdded:function(){rn.superClass.onChildAdded.apply(this,arguments),this._81I()},onChildRemoved:function(){rn.superClass.onChildRemoved.apply(this,arguments),this._81I()},_81I:function(){var B=this;if(!B._54I&&!Jk){var F=B.getChildrenRect();F&&(B._53I=1,B.p(nl(B.s("group.position"),F,B.getSize())),delete B._53I)}},getChildrenRect:function(){var _,V=this;return V.eachChild(function(o){_=gb(_,V.getChildRect(o))}),_},getChildRect:function(Q){var r;return ag(Q)&&Q.s(qc)&&(ts(Q)&&Q.isExpanded()&&Q.eachChild(function(l){r=gb(r,Q.getChildRect(l))}),!r&&Q.getRect&&(r=Q.getRect())),r},setPosition:function(G,f){var p=this;if(!p._54I){var e;e=2===arguments.length?{x:G,y:f}:G,Jk||p._53I||(p._54I=1,tj(p._children,e.x-p._position.x,e.y-p._position.y),delete p._54I),rn.superClass.setPosition.call(this,e)}},toggle:function(){this.setExpanded(!this.isExpanded())},isExpanded:function(){return this._57O},setExpanded:function(D){var p=this;if(p._57O!==D){var b=p._57O;p._57O=D,p.fp("expanded",b,p._57O),p._8I()}},_8I:function(){rn.superClass._8I.call(this),this.eachChild(function(q){ag(q)&&q._8I()})},onStyleChanged:function(e){rn.superClass.onStyleChanged.apply(this,arguments),"group.position"===e&&this._81I()},getSerializableProperties:function(){var A=rn.superClass.getSerializableProperties.call(this);return A.expanded=1,A}});var tg=X.Grid=function(){Cb(tg,this)};Lo("Grid",kf,{IRotatable:!1,_icon:"grid_icon",_image:$,getUIClass:function(){return ur},setRotation:function(){},getCellRect:function(Z,S){var X=this,l=X.s("grid.row.count"),T=X.s("grid.column.count");if(0>=l||0>=T||0>Z||Z>=l||0>S||S>=T)return $;var x,z,s,r=X.getRect(),v=X.s("grid.row.percents"),d=X.s("grid.column.percents");if(dc(r,X,"grid.border",-1),v&&v._as&&(v=v._as),d&&d._as&&(d=d._as),v&&v.length===l){for(s=0,x=0;Z>x;x++)s+=r.height*v[x];r.y+=s,r.height=r.height*v[Z]}else r.height=r.height/l,r.y+=r.height*Z;if(d&&d.length===T){for(z=0,x=0;S>x;x++)z+=r.width*d[x];r.x+=z,r.width=r.width*d[S]}else r.width=r.width/T,r.x+=r.width*S;return $n(r,-X.s("grid.gap")),r}});var ln=X.Shape=function(){Cb(ln,this),this._59O=new fr};ln.__de__=Tq,Lo("Shape",kf,{ms_ac:["thickness","closePath"],_icon:"shape_icon",_thickness:10,_closePath:!1,getUIClass:function(){return $e},_22Q:function(){return pf},getLength:function(o){return Fq(Ui(this._59O,this._58O,o,this._closePath))},getSegments:function(){return this._58O},toSegments:function(){var c=this._58O;return c?new fr(c._as.slice(0)):c},setSegments:function(r){var y=this._58O;r=r?_f(r)?new fr(r.slice(0)):new fr(r._as.slice(0)):new fr,(y&&r&&y._as.join(",")!==r._as.join(",")||y!==r)&&(this._58O=r,this.fp("segments",y,r))},getPoints:function(){return this._59O},toPoints:function(){var A=this._59O;return new fr(A._as.slice(0))},setPoints:function(y){var p=this._59O;y=y?_f(y)?new fr(y.slice(0)):new fr(y._as.slice(0)):new fr,(p&&y&&p._as.join(",")!==y._as.join(",")||p!==y)&&(this._59O=y,this.fs(),this.fp("points",p,y))},addPoint:function(k,F){var r=this.toPoints();r.add(k,F),this.setPoints(r)},setPoint:function(t,L){var C=this.toPoints();C.set(t,L),this.setPoints(C)},removePointAt:function($){var G=this.toPoints();G.removeAt($),this.setPoints(G)},setWidth:function(x){var V=this;if(1>x&&(x=1),!V._55I&&!Jk&&V.getWidth()){V._55I=1;var m=V._position.x,i=x/V.getWidth(),L=V.toPoints(),Q=new fr;L.each(function(S){Q.add({x:(S.x-m)*i+m,y:S.y,e:S.e})}),V.setPoints(Q),V.fs(),delete V._55I}ln.superClass.setWidth.call(V,x)},setHeight:function(X){var e=this;if(1>X&&(X=1),!e._55I&&!Jk&&e.getHeight()){e._55I=1;var D=e._position.y,g=X/e.getHeight(),q=e.toPoints(),y=new fr;q.each(function(o){y.add({x:o.x,y:(o.y-D)*g+D,e:o.e})}),e.setPoints(y),e.fs(),delete e._55I}ln.superClass.setHeight.call(e,X)},setPosition:function(C,T){var S,l=this;if(!l._28Q){if(l._28Q=1,!l._55I&&!Jk){S=2===arguments.length?{x:C,y:T}:C;var Z=S.x-l._position.x,P=S.y-l._position.y;if(0===Z&&0===P)return delete l._28Q,void 0;l._55I=1;var z=l.toPoints(),e=new fr;z.each(function(h){e.add({x:h.x+Z,y:h.y+P,e:h.e})}),l.setPoints(e),l.fs(),delete l._55I}ln.superClass.setPosition.apply(l,arguments),delete l._28Q}},fs:function(){this.fireShapeChange()},fireShapeChange:function(){var x=this;if(!x._55I&&!Jk){var F=vc(x._59O);F&&(x._55I=1,x.setRect(F),delete x._55I)}x.fp(nr,!1,!0)},getSerializableProperties:function(){var r=ln.superClass.getSerializableProperties.call(this);return r.segments=1,r.points=1,r.thickness=1,r.closePath=1,r}});var bo=X.Polyline=function(){Cb(bo,this),this.s({"shape.background":null,"shape.border.width":2})};Lo("Polyline",ln,{IRotatable:!1,_icon:"polyline_icon",_22Q:function(){return Wj},getUIClass:function(){return Tk},setRotationX:function(){},setRotation:function(){},setRotationZ:function(){},setClosePath:function(){},setTall:function(W){var l=this;if(!l._24Q&&!Jk&&l.getTall()){l._24Q=1;var X=l._54O,K=W/l.getTall();l._59O.each(function(P){P.e=P.e==$?X:(P.e-X)*K+X}),l.fs(),delete l._24Q}bo.superClass.setTall.call(l,W)},setElevation:function(h){var d=this;if(!d._24Q&&!Jk){d._24Q=1;var H=h-d._54O;d._59O.each(function(m){m.e==$?m.e=h:m.e+=H}),d.fs(),delete d._24Q}bo.superClass.setElevation.apply(d,arguments)},fireShapeChange:function(){var _=this,L=_._59O;if(!_._24Q&&!Jk){var X=L.size();if(X){var q=1,W=L.get(0),z=_._54O;W.e==$&&(W.e=z);for(var J=W.e,Z=0;X>q;q++){W=L.get(q),W.e==$&&(W.e=z);var K=a(J,W.e),E=V(J+Z,W.e);J=K,Z=E-K}_._24Q=1,_.setTall(Z),_.setElevation(J+Z/2),delete _._24Q}}bo.superClass.fireShapeChange.apply(_,arguments)}});var yl=X.SubGraph=function(){Cb(yl,this)};Lo("SubGraph",kf,{ISubGraph:1,_image:"subGraph_image",_icon:"subGraph_icon",_8I:function(){yl.superClass._8I.call(this),this.eachChild(function(B){ag(B)&&B._8I()})}}),X.EdgeGroup=function(o,U){this._70O=o,this._siblings=U;for(var f,P,E=0,J=o.size(),d=n[si];J>E;E++)if(f=o.get(E).getStyle(si,!1),f!=$){d=f;break}d==$&&(d=!0);var B=O.edgeGroupAgentFunc;for(B&&(P=B(o),P&&P!==o.get(0)&&(o.remove(P),o.add(P,0))),E=0;J>E;E++)o.get(E).s(si,d)},Lo("EdgeGroup",x,{getEdges:function(){return this._70O},size:function(){return this._70O.size()},get:function(k){return this._70O.get(k)},indexOf:function(J){return this._70O.indexOf(J)},each:function(h,Q){this._70O.each(h,Q)},getSiblings:function(){return this._siblings},eachSiblingEdge:function(H,l){this._siblings.each(function(e){e._70O.each(H,l)})}});var Gn=X.JSONSerializer=function(N,V){this.dm=this._dataModel=N,this._hierarchical=!!V};Lo("JSONSerializer",x,{ms_ac:["hierarchical"],serialize:function(j){return JSON.stringify(this.toJSON(),function(t,b){return hf(b)?_m(b):b},j==$?2:j)},toJSON:function(){var _=this,o=_.dm,s=o.getRoots(),W=_.json={v:O.getVersion(),d:[],a:{}},r=o.getSerializableAttrs();for(var h in r){var t=o.a(h);t!==K&&_[yn](h,t,W.a)}return mb(W.a)&&delete W.a,_._hierarchical?s.each(_.serializeData,this):o.each(function(h){_.serializeData(h)}),W},isSerializable:function(){return!0},getProperties:function(o){return o.getSerializableProperties()},getStyles:function(b){return b.getSerializableStyles()},getAttrs:function(W){return W.getSerializableAttrs()},serializeData:function(v){var $=this;if($.isSerializable(v)){var H,X,S,W,C=v.getClass(),R=new C,r={c:v.getClassName(),i:v.getId(),p:{},s:{},a:{}};$.json.d.push(r),H=$.getProperties(v);for(X in H)W=bl(X),v[W]&&(S=v[W](),S!==R[W]()&&$[yn](X,S,r.p));H=$.getStyles(v);for(X in H)S=v.s(X),S!==R.s(X)&&$[yn](X,S,r.s);H=$.getAttrs(v);for(X in H)S=v.a(X),S!==R.a(X)&&$[yn](X,S,r.a);mb(r.p)&&delete r.p,mb(r.s)&&delete r.s,mb(r.a)&&delete r.a}$._hierarchical&&v.getChildren().each($.serializeData,$)},serializeValue:function(v,C,c){ie(C)?C={__a:C._as}:C instanceof hh&&(C={__i:C.getId()}),c[v]=C},deserialize:function(G,H,F){Jk=!0;var k=this;G=k.json=yf(G)?JSON.parse(G):G,k._82I={};for(var p=k.dm,q=new fr,V=new fr,A=0,m=G.d.length;m>A;A++){var h=G.d[A],d=dh(h.c),E=new d,i=h.i;F&&i!=$&&(E._id=i),k._82I[i]=E,q.add(E),V.add(h)}for(A=0;m>A;A++)k.deserializeData(q.get(A),V.get(A));q.each(function(q){H&&!q.getParent()&&q.setParent(H),p.add(q)});for(var D in G.a)p.a(D,k[le](G.a[D]));return Jk=!1,q},deserializeData:function(e,_){for(var g in _.p)e[Qg(g)](this[le](_.p[g]));for(g in _.s)e.s(g,this[le](_.s[g]));for(g in _.a)e.a(g,this[le](_.a[g]))},deserializeValue:function(u){if(ys(u)){var b=u.__i;if(b!=$)return this._82I[b];if(b=u.__a,_f(b))return new fr(b)}return u}}),$l(hj,{serialize:function(I,B){return new Gn(this,B).serialize(I)},toJSON:function(J){return new Gn(this,J).toJSON()},deserialize:function(V,u,B){return new Gn(this).deserialize(V,u,B)}}),dr.GraphView=function(N){var p=this;p._24I={},p._34I=new fr,p._25I={},p._56I={},p._view=eo(1),p._canvas=El(p._view),p.dm(N?N:new hj),p.setEditable(!1),p.setScrollBarVisible(O.graphViewScrollBarVisible)},Ok("GraphView",x,{ms_v:1,ms_gv:1,ms_bnb:1,ms_tip:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,_52o:1,_51o:1,ms_ac:["layers",jk,vr,Pn,is,"resettable","editInteractor",xd,"pannable","rectSelectable","autoScrollZone",eb,"movableFunc","editableFunc","pointEditableFunc","rectEditableFunc","rotationEditableFunc","rectSelectBackground","rectSelectBorderColor","editPointSize","editPointBorderColor","editPointBackground","hoverDelay"],_resettable:O.graphViewResettable,_pannable:O.graphViewPannable,_rectSelectable:O.graphViewRectSelectable,_autoScrollZone:O.graphViewAutoScrollZone,_rectSelectBackground:O.graphViewRectSelectBackground,_rectSelectBorderColor:O.graphViewRectSelectBorderColor,_editPointSize:O.graphViewEditPointSize,_editPointBorderColor:O.graphViewEditPointBorderColor,_editPointBackground:O.graphViewEditPointBackground,_scrollBarColor:fj,_scrollBarSize:Wp,_autoHideScrollBar:jq,_autoMakeVisible:dj,setEditable:function(r){var i=this,m=dr.XEditInteractor;r?i.setInteractors([new Wm(i),m?new m(i):new Eo(i),new Sq(i),new _n(i),new Fh(i,{editable:!m})]):i.setInteractors([new Wm(i),new Sq(i),new _n(i),new Fh(i,{editable:!1})])},getCanvas:function(){return this._canvas},_33I:function(P){var V=P.getUIClass();return V?new V(this,P):$},getDataUI:function(Y){var L=this,Z=L._25I[Y._id];return Z===K&&(Z=L._33I(Y),L._25I[Y._id]=Z),Z},invalidateAll:function(Z){var F=this;if(Z){for(var z in F._25I){var P=F._25I[z];P&&P.dispose()}F._25I={},F._56I={},F._24I={},F._34I.clear(),F.redraw()}else F.dm().each(function(g){F.invalidateData(g)})},invalidateSelection:function(){var K=this;K.sm().each(function(h){K.invalidateData(h)})},invalidateData:function(B){var D=this;D._24I[B._id]=B,D._21Q(B),D.iv()},_21Q:function(V){var n=this,M=n._24I;if(hq(V)&&Um[V.s(ad)]){var p=V.getSourceAgent();p&&p.getAgentEdges().each(function(j){M[j._id]=j}),p=V.getTargetAgent(),p&&p.getAgentEdges().each(function(d){M[d._id]=d}),n.iv()}},redraw:function(L){var y=this;y._32I||(L?y._34I.add(L):(y._32I=1,y._34I.clear()),y.iv())},each:function(r,t){var Z,a,J,f=0,M=this._layers,x=this._dataModel._datas._as,X=x.length;if(M)for(var U=M.length;U>f;f++){J=M[f];for(var n=0;X>n;n++)if(Z=x[n],Z._layer===J&&(a=t?r.call(t,Z):r(Z),a===!1))return}else for(;X>f;f++)if(Z=x[f],a=t?r.call(t,Z):r(Z),a===!1)return},reverseEach:function(u,i){var f,m,b,j,x=this._layers,S=this._dataModel._datas._as,s=S.length;if(x)for(f=x.length-1;f>=0;f--){j=x[f];for(var M=s-1;M>=0;M--)if(m=S[M],m._layer===j&&(b=i?u.call(i,m):u(m),b===!1))return}else for(f=s-1;f>=0;f--)if(m=S[f],b=i?u.call(i,m):u(m),b===!1)return},getViewRect:function(){return this._29I},getContentRect:function(){var A=this,z=A._84I;return z||(A.each(function(S){A.isVisible(S)&&(z=gb(z,A.getDataUIBounds(S)))}),A._84I=z?z:Ch),A._84I},getScrollRect:function(){return gb(this.getContentRect(),this._29I)},fitData:function(i,y,D,Y,G){var b=this;if(!b.getWidth()||!b.getHeight())return G||Sg(b.fitData,b,[i,y,D,Y,!0],200),void 0;b.makeVisible(i),b.validate();var j=b.getDataUIBounds(i);j&&(j=Nf(j),$n(j,D==$?20:D),b.fitRect(j,y,Y))},fitContent:function(D,_,f,h){var s=this;if(!s.getWidth()||!s.getHeight())return h||Sg(s.fitContent,s,[D,_,f,!0],200),void 0;s.validate();var Z=Nf(s.getContentRect());$n(Z,_==$?20:_),s.fitRect(Z,D,f)},fitRect:function(f,y,Q){var I=this,q=I.getWidth(),T=I.getHeight(),Z=f.x+f.width/2,c=f.y+f.height/2,E=a(q/f.width,T/f.height),i=I._zoom,W=-Z*i+q/2,s=-c*i+T/2;0===E||isNaN(E)||(Q&&(E=a(1,E)),y?I.setTranslate(W,s,{finishFunc:function(){I.setZoom(E,y)}}):(I.setTranslate(W,s),I.setZoom(E)))},toCanvas:function(X){this.validateImpl();var d=this,$=d.getContentRect(),v=El(),Q=d._zoom,i=$.x*Q,H=$.y*Q,E=$.width*Q,_=$.height*Q;Kp(v,E,_,1);var T=dk(v);return X&&Sm(T,0,0,E,_,X),Jh(T,-i,-H),T.scale(Q,Q),d._42(T),T.restore(),v},toDataURL:function(v,b){return this.toCanvas(v).toDataURL(b||"image/png",1)},getClipBounds:function(){return this._74O},_42:function(t,p){var d,Z,B=this;B._93db(t,p),B.each(function(v){B._56I[v._id]&&(d=B.getDataUI(v),d&&(Z=d._79o(),X.HtmlNode&&v instanceof X.HtmlNode?d._42(t):(!p||Ie(p,Z))&&d._42(t)))}),B._92db(t,p)},validateImpl:function(){var f,T,F,G,Q,a=this,m=a.tx(),L=a.ty(),C=a._zoom,z=a._canvas,W=this.getWidth(),X=this.getHeight(),$=a._29I,E={x:-m/C,y:-L/C,width:W/C,height:X/C},o={},D=a._34I,Z=a._24I,S=a._32I,O=a._23I;(W!==z.clientWidth||X!==z.clientHeight)&&(Kp(z,W,X),S=1),S||wf(E,$)||(S=1),a._29I=E,a.each(function(C){T=C._id;var $=o[T]=a.isVisible(C);$!==a._56I[T]&&(Z[T]=C,F=a.getDataUI(Z[T]),F&&F._84o($),a._84o(C,$))},a);for(T in Z)F=a.getDataUI(Z[T]),F&&(!S&&a._56I[T]&&(Q=F._79o(),Q&&D.add(Q)),F.invalidate()),a._83I=1;if(a._56I=o,!S)for(T in Z)o[T]&&(F=a.getDataUI(Z[T]),F&&(Q=F._79o(),Q&&D.add(Q)));if(S?G=E:(D.each(function(u){Ie(E,u)&&(G=gb(G,u))}),G&&($n(G,V(1,1/C)),G.x=r(G.x*C)/C,G.y=r(G.y*C)/C,G.width=j(G.width*C)/C,G.height=j(G.height*C)/C,G=yg(E,G))),a._74O=G,G&&(f=dk(z),vo(f,m,L,C),f.beginPath(),f.rect(G.x,G.y,G.width,G.height),f.clip(),f.clearRect(G.x,G.y,G.width,G.height),a._42(f,G),f.restore(),delete a._74O),a._24I={},D.clear(),delete a._32I,O&&W>0&&X>0){var F=a.getDataUI(O);if(F){var Q=F._79o(),P=a._29I,w=P.x,q=P.y,s=P.width,y=P.height,C=a._zoom;Q&&!Ie(Q,P)&&(Q.x+Q.width<w&&a.tx(-Q.x*C),Q.x>w+s&&a.tx(-(Q.x+Q.width-s)*C),Q.y+Q.height<q&&a.ty(-Q.y*C),Q.y>q+y&&a.ty(-(Q.y+Q.height-y)*C))}delete a._23I}a._83I&&(delete a._83I,delete a._84I),a._98O()},isScrollBarVisible:function(){return!!this._79O},setScrollBarVisible:function(v){var Z=this;v!==Z.isScrollBarVisible()&&(v?(Si(Z._view,Z._79O=eo()),Si(Z._79O,Z._27I=eo()),Si(Z._79O,Z._28I=eo())):(bf(Z._79O),delete Z._79O,delete Z._27I,delete Z._28I),Z.fp("scrollBarVisible",!v,v))},showScrollBar:function(){var Y=this;Y._79O&&(Y._85I||(W(function(){Y._86I()},os),Y.iv()),Y._85I=new Date)},_86I:function(){var T=this;if(T._85I){var P=new Date,d=P.getTime();d-T._85I.getTime()>=os?(delete T._85I,T.iv()):W(function(){T._86I()},os)}},_98O:function(){var a=this,p=this._27I,f=this._28I;if(a._79O){if(a._autoHideScrollBar&&!a._85I)return p.style.visibility=jo,f.style.visibility=jo,void 0;var X=a.getScrollBarColor(),N=a._zoom,y=a.getScrollBarSize(),g=a.getViewRect(),k=a.getScrollRect(),Z=g.height*N,d=k.height*N,T=g.width*N-y-2,r=Z*((g.y-k.y)*N/d),A=Z*(Z/d),O=p.style;d-.5>Z?(Oj>A&&(r=r+A/2-Oj/2,0>r&&(r=0),r+Oj>Z&&(r=Z-Oj),A=Oj),Vq(p,T,r,y,A),O.visibility=Oh,O.background=X,O.borderRadius=y/2+$p):O.visibility=jo;var R=g.width*N,Q=k.width*N,r=g.height*N-y-2,T=R*((g.x-k.x)*N/Q),i=R*(R/Q),O=f.style;Q-.5>R?(Oj>i&&(T=T+i/2-Oj/2,0>T&&(T=0),T+Oj>R&&(T=R-Oj),i=Oj),Vq(f,T,r,i,y),O.visibility=Oh,O.background=X,O.borderRadius=y/2+$p):O.visibility=jo}},setDataModel:function(s){var K=this,G=K._dataModel,B=K._3o;G!==s&&(G&&(G.umm(K.handleDataModelChange,K),G.umd(K.handleDataPropertyChange,K),G.removeIndexChangeListener(K._75O,K),B||G.sm().ums(K._16o,K)),K._dataModel=s,s.mm(K.handleDataModelChange,K),s.md(K.handleDataPropertyChange,K),s.addIndexChangeListener(K._75O,K),B?B._21I(s):s.sm().ms(K._16o,K),K.invalidateAll(!0),K.fp(ro,G,s))},handleDataPropertyChange:function(o){this.invalidateData(o.data)},onPropertyChanged:function(a){var k=this,Z=a.property;k.redraw(),hk[Z]?k.showScrollBar():Z===xd&&k.onCurrentSubGraphChanged(a)},onCurrentSubGraphChanged:function(){this.reset()},handleDataModelChange:function(l){var W=this,A=l.kind,w=l.data;if(W._83I=1,"add"===A)W.invalidateData(w),hq(w)&&w.getEdgeGroup()&&w.getEdgeGroup().eachSiblingEdge(W.invalidateData,W);else if(A===tm){W._21Q(w);var H=w._id,g=W._25I[H];if(g){if(W._56I[H]){var R=g._79o();R&&W.redraw(R)}g.dispose(),delete W._25I[H],delete W._24I[H],delete W._56I[H]}w===W._currentSubGraph&&W.setCurrentSubGraph($)}else A===Hh&&(W.invalidateAll(!0),W.setCurrentSubGraph($))},_75O:function(C){this.invalidateData(C.data)},_76O:function(j){var B=this;if(B.isVisible(j)){for(var i=j;i._parent&&B.isVisible(i._parent);)i=i._parent;i&&i!==j&&B._dataModel._76O(i),B._dataModel._76O(j)}},isMovable:function(D){var s=this;return hq(D)&&D.getStyle(ad)!==Uc?!1:D.s("2d.movable")?s._movableFunc?s._movableFunc(D):!0:!1},isSelectable:function(E){return E.s("2d.selectable")&&this.sm().isSelectable(E)},isEditable:function(X){var L=this;if(!L._editInteractor||!L.isSelected(X))return!1;if(ts(X)){var W=L.getDataUI(X);if(!W||W._88I)return!1}return hq(X)&&X.getStyle(ad)!==Uc?!1:X.s("2d.editable")?L._editableFunc?L._editableFunc(X):!0:!1},handleDelete:function(){this._editInteractor&&this.removeSelection()},isPointEditable:function(D){return ag(D)&&0!==D.getRotation()?!1:this._pointEditableFunc?this._pointEditableFunc(D):!0},isRectEditable:function(V){return ag(V)&&0!==V.getRotation()?!1:this._rectEditableFunc?this._rectEditableFunc(V):!0},isRotationEditable:function(H){return H.setRotation&&H.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc(H):!0:!1},getRotationPoint:function(F){var $=yj(F.getRotation(),0,-F.getHeight()/2-(_?32:16)),t=F.p();return $.x+=t.x,$.y+=t.y,$},getLogicalPoint:function(g){var S=this;return tl(g,S._canvas,S.tx(),S.ty(),S._zoom,S._zoom)},getSelectedDataAt:function(O){var C=this;return this.getDataAt(O,function(x){return C.isSelected(x)})},getDataAt:function(g,J,Z){g.target&&(g=this.lp(g));var j;return this.reverseEach(function(I){return(J?J(I):this.isSelectable(I))&&this.rectIntersects(I,tq(g.x,g.y,Z))?(j=I,!1):void 0},this),j},getIconInfoAt:function(o,y){var t=this;if(o.target&&(o=t.lp(o)),y||(y=t.getDataAt(o)),y){var s=t.getDataUI(y);if(s&&s._38o){var B,x=s._38o,F=new fr;for(B in x.icons)F.add(B);for(var L=F.size()-1;L>=0;L--){B=F.get(L);for(var Y=x.rects[B],n=Y.rotation,W=Y.length-1;W>=0;W--){var r=Y[W],O=r.width,S=r.height,D={x:o.x-r.x-O/2,y:o.y-r.y-S/2};n!=$&&(D=yj(-n,D.x,D.y));var r={x:-O/2,y:-S/2,width:O,height:S};if(rl(r,D))return{key:B,index:W,name:x.icons[B].names[W],rect:Y[W],point:o,rotation:n,relativeRect:r,relativePoint:D,data:y}}}}}return $},getDatasInRect:function(N,u,k){k===K&&(k=1);var J=this,P=new fr;return J.reverseEach(function(j){k&&!J.isSelectable(j)||(u?J.rectIntersects(j,N):J.rectContains(j,N))&&P.add(j)}),P},moveSelection:function($,O){var f,X=this,J=X.dm();J&&(f=J.getHistoryManager()),f&&f.beginInteraction(),tj(X.sm().toSelection(X.isMovable,X),$,O),f&&f.endInteraction()},getDataUIBounds:function(K){var i=this.getDataUI(K);return i?i._79o():$},getBoundsForGroup:function(D){return D.s(qc)?this.getDataUIBounds(D):$},rectIntersects:function(y,e){this.validate();var c=$;if(this._56I[y._id]){var _=this._25I[y._id];if(_){var C=_._79o();if(uh(e,C))c=!0;else if((e=yg(e,C))&&(_.rectIntersects&&(c=_.rectIntersects(e)),c==$)){if(!y.s("pixelPerfect"))return!0;var X=e.x,E=e.y,U=e.width,A=e.height,o=1,f=O.hitMaxArea,P=U*A;P>f&&(o=f/P);var F=sl(U*o,A*o);Jh(F,-X*o,-E*o),F.scale(o,o),_._42(F);try{for(var v=0,z=F.getImageData(0,0,U*o,A*o).data;v<z.length;v+=4)if(0!==z[v+3]){c=!0;break}F.restore()}catch(L){sf=$,c=!0}}}}return c?!0:!1},rectContains:function(H,E){if(this._56I[H._id]){var F=this._25I[H._id];if(F)return uh(E,F._79o())}return!1},reset:function(){this.setZoom(1),this.setTranslate(0,0)},handleKeyDown:function(T){var e=this,C=e._focusData,F=C&&e._25I[C._id],z=0,B=e._dataModel._datas;C&&C._enabled&&C._editable&&F&&F.onKeyDown&&F.onKeyDown(T)===!0||(9===T.keyCode&&(C&&(z=B.indexOf(C),Sj(T)?-1===--z&&(z=0):++z===B.size()&&(z=0)),e._focusData=C=B.get(z),e.sm().setSelection(C)),Uf(T)?e.selectAll():mr(T)&&e.isResettable()&&e.reset(),e.sm().isEmpty()||(Te(T)&&e.handleDelete(T),Rr(T)&&(e.moveSelection(-1,0),e.fi({kind:"moveLeft"})),Hj(T)&&(e.moveSelection(0,-1),e.fi({kind:"moveUp"})),un(T)&&(e.moveSelection(1,0),e.fi({kind:"moveRight"})),Ag(T)&&(e.moveSelection(0,1),e.fi({kind:"moveDown"}))))},handleScroll:function(G,P){In(G);var e=this.lp(G);P>0?this.scrollZoomIn(e):0>P&&this.scrollZoomOut(e)},handlePinch:function(q,j,e){j>e?this.pinchZoomIn(q):this.pinchZoomOut(q)},checkDoubleClickOnNote:function(c,P){var v=this,k=v.lp(c),N=v.getDataUI(P),q=N.note2Info;return q&&P.s("note2.toggleable")&&rl(q.clickRect,k)?(P.s(Cc,!P.s(Cc)),v.fi({kind:"toggleNote2",event:c,data:P}),!0):(q=N.noteInfo,q&&P.s("note.toggleable")&&rl(q.clickRect,k)?(P.s(As,!P.s(As)),v.fi({kind:"toggleNote",event:c,data:P}),!0):!1)},_84o:function(){},isNoteVisible:function(){return this._zoom>.15},isLabelVisible:function(){return this._zoom>.15},isSelectVisible:function(){return this._zoom>.15},isEditVisible:function(){return this._zoom>.15},autoScroll:function(n,P){var O=this,S=O.getAutoScrollZone(),l=S/O.getZoom(),Q=S/4,j=O._29I,k=O.lp(n),X={x:O.tx(),y:O.ty()};return k&&S>0&&j&&(k.x-j.x<l?O.translate(Q,0):j.x+j.width-k.x<l&&O.translate(-Q,0),k.y-j.y<l?O.translate(0,Q):j.y+j.height-k.y<l&&O.translate(0,-Q)),X.x=O.tx()-X.x,X.y=O.ty()-X.y,P&&(P.x+=X.x,P.y+=X.y),X},getMoveMode:function(x,s){var Z=s.s("2d.move.mode");return Z?Z:cj["88"]?"x":cj["89"]?"y":"xy"}});var Mk=function(C,T){var Z=this;Z.gv=C,Z.s=function(K){return T.getStyle(K)},Z._data=T,Z._87I=new fr};de(Mk,x,{_6I:$,ms_icons:1,_84o:function(){},dispose:function(){},isShadowed:function(){return this.gv.isSelected(this._data)&&"shadow"===this.s("select.type")},_2o:function(){var o=this,h=o.gv.isSelected(o._data);return!h||o.isShadowed()?0:this.s("select.width")},getBodyColor:function(D){var j=this._data,k=this.gv.getBodyColor(j);return k?k:D?j.getStyle(D):$},_2Q:function(Q){return this.s(Q)},_1Q:function(U,V,l,p){var x=this.s,c=x(V+".dash.color");U.strokeStyle=c,U.lineWidth=l,U.stroke(),x(V+".dash.3d")&&mg(U,c,x(V+".dash.3d.color"),l,this.gv._zoom,x(V+".dash.3d.accuracy")),Nm(U,p)},invalidate:function(){this._6I=$},_79o:function(){var P=this;if(!P._6I){P.labelInfo=P.label2Info=P.noteInfo=P.note2Info=P._38o=$,P._87I.clear(),P._3O();var m=P._data,U=P.gv;P._55O=U.isEditable(m)?{_42O:U.isRectEditable(m),_43O:U.isPointEditable(m),_56O:U.isRotationEditable(m)}:$,P._6I=P._81o()}return P._6I},_3O:function(){},getPosition:function(){return Ch},_68o:function(F,k){F&&this._87I.add(Xh(F,k))},_81o:function(){var y=this,$=y.s;y._24O(Cq,"getLabel"),y._24O(jn,"getLabel2"),y._26O(Xf,"getNote"),y._26O(Sd,"getNote2"),y._15O(),y._55O&&y._48O();var a;if(y._87I.each(function(g){a=gb(a,g)}),a&&y.isShadowed()){var L=Nf(a);
        L.x+=$("shadow.offset.x"),L.y+=$("shadow.offset.y"),$n(L,$("shadow.blur")),a=gb(a,L)}return y._87I.clear(),a},_42:function(Z){var v=this,E=v._data,z=v.gv,N=v.s,Y=N("opacity"),C=this.isShadowed();if(C){var P=Z.shadowOffsetX,O=Z.shadowOffsetY,R=Z.shadowBlur,_=Z.shadowColor;Z.shadowOffsetX=N("shadow.offset.x"),Z.shadowOffsetY=N("shadow.offset.y"),Z.shadowBlur=N("shadow.blur"),Z.shadowColor=N("shadow.color")}if(Y!=$){var H=Z.globalAlpha;Z.globalAlpha=Y}v._80o(Z),z.isLabelVisible(E)&&(rp(Z,v.labelInfo),rp(Z,v.label2Info)),z.isNoteVisible(E)&&(Rk(Z,v.noteInfo),Rk(Z,v.note2Info)),v._99O(Z),Y!=$&&(Z.globalAlpha=H),C&&(Z.shadowOffsetX=P,Z.shadowOffsetY=O,Z.shadowBlur=R,Z.shadowColor=_),v._55O&&z.isEditVisible(E)&&v._47O(Z)},_80o:function(){},_47O:function(){},_24O:function(u,C){var K=this,t=K._data,i=K.gv,V=K.s,Z=i[C](t);if(Z!=$){var f=V(u+".scale"),B=V(u+".max"),c=V(u+".position"),N=K[u+"Info"]={label:Z,scale:f,color:i[C+"Color"](t),font:V(u+".font"),opacity:V(u+".opacity"),align:V(u+".align"),rotation:K.getRotation(V(u+".rotation"),!1,c),background:i[C+"Background"](t)},F=_o(N,Z);B>0&&B<F.width&&(N.labelWidth=F.width,F.width=B),1!==f&&(F.width*=f,F.height*=f);var D=K.getPosition(c,V(u+".offset.x"),V(u+".offset.y"),F,V(u+".position.fixed"));if(F.x=D.x-F.width/2,F.y=D.y-F.height/2,K._68o(N.rect=F,N.rotation),1!==f){var s=F.width/f,R=F.height/f;N.rect={x:D.x-s/2,y:D.y-R/2,width:s,height:R}}}},_26O:function(B,w){var n=this,i=n.gv,y=n._data,e=n.s,m=i[w](y);if(m!=$){var d,f,O=e(B+".scale"),M=n[B+"Info"]={note:m,scale:O,data:y,view:i,expanded:e(B+".expanded"),font:e(B+".font"),color:e(B+".color"),opacity:e(B+".opacity"),align:e(B+".align"),icon:e(B+".icon"),backgroundImage:e(B+".backgroundImage"),borderWidth:e(B+".border.width"),borderColor:e(B+".border.color"),background:i[w+"Background"](y)},G=n.getPosition(e(B+".position"),e(B+".offset.x"),e(B+".offset.y")),L=G.x,N=G.y;if(M.expanded){var Y,g=e(B+".max"),z=e(B+".backgroundImage");z?(z=Tn(z),Y={width:ud(z,y),height:Pq(z,y)}):Y=_o(M,m),Y.width+=6,Y.height+=2,g>0&&g<Y.width&&(M.labelWidth=Y.width,Y.width=g),d=Y.width,f=Y.height+8,M.clickRect={x:L-d*O/2,y:N-f*O,width:d*O,height:f*O*Y.height/f}}else{var P=e(B+".icon");P?(P=Tn(P),d=ud(P,y),f=Pq(P,y)):(d=12,f=18),M.clickRect={x:L-d*O/2,y:N-f*O,width:d*O,height:f*O}}M.rect={x:L-d/2,y:N-f*O/2-f/2,width:d,height:f};var r=j(M.borderWidth/2)*O;n._68o({x:L-d*O/2-r,y:N-f*O-r,width:d*O+2*r,height:f*O+2*r})}},_48O:function(){},_99O:function(m){var S=this,U=S._38o;if(U){var I=S.gv,a=S._data,F=U.icons;for(var f in F){var W=F[f],O=U.rects[f];if(O){var y=uk(W.opacity,a,I),N=uk(W.names,a,I),K=N?N.length:0,R=O.rotation;if(y!=$){var Q=m.globalAlpha;m.globalAlpha*=y}for(var o=0;K>o;o++){var J=N[o],z=Tn(J),D=O[o];if(R){var w=D.x+D.width/2,n=D.y+D.height/2;m.save(),Jh(m,w,n),Nk(m,R),Jh(m,-w,-n)}ai(m,z,uk(W.stretch,a,I),D.x,D.y,D.width,D.height,S._data,S.gv),R&&m.restore()}y!=$&&(m.globalAlpha=Q)}}}}});var Ck=function(b,Q){Cb(Ck,this,[b,Q])};de(Ck,Mk,{_40O:function(B,Q){var i=this,K=i.s,q=B.rect;(B.borderColor=i.gv.getBorderColor(i._data))&&(B.borderType=K("border.type"),B.borderWidth=K("border.width"),B.borderPadding=K("border.padding"),Q=V(Q,B.borderPadding+B.borderWidth/2)),(B.selectWidth=i._2o())&&(B.selectType=K("select.type"),B._97o=K("select.color"),B.selectPadding=K("select.padding"),Q=V(Q,B.selectPadding+B.selectWidth/2)),Q>0&&(q=Nf(q),$n(q,Q)),i._68o(q)},_39O:function(m,a){var l=a.rect;if(a.borderWidth>0){var k=a.borderPadding;m.strokeStyle=a.borderColor,m.lineWidth=a.borderWidth,Vo(m,a.borderType,{x:l.x-k,y:l.y-k,width:l.width+2*k,height:l.height+2*k}),m.stroke()}a.selectWidth>0&&(k=a.selectPadding,m.strokeStyle=a._97o,m.lineWidth=a.selectWidth,Vo(m,a.selectType,{x:l.x-k,y:l.y-k,width:l.width+2*k,height:l.height+2*k}),m.stroke())},_3O:function(){var J=this,m=J.s,d=J._data,i=d.getStyle(nr),K=J.getBodyColor(),t=J._83o=i?{shape:i,_53o:J.getBodyColor("shape.background"),_27Q:Tn(m("shape.repeat.image"),K),_54o:m("shape.border.width"),_55o:m("shape.border.color"),_56o:m("shape.border.3d"),_57o:m("shape.border.3d.color"),_58o:m("shape.border.3d.accuracy"),shapeGradient:m("shape.gradient"),_59o:m("shape.gradient.color"),_60o:m("shape.border.pattern"),_61o:m("shape.border.cap"),_62o:m("shape.border.join")}:{img:Tn(d.getImage(),K),bodyColor:K,stretch:m("image.stretch")};H&&!s||(t.rect=d.getRect(),t.position=d.p(),t.rotation=d.getRotation(),i===km&&(t._63o=m("shape.depth")),J._40O(t,i?zm($,t._54o/2,t._62o):0))},getPosition:function(c,s,q,i){var u=nl(c,this._83o.rect,i);return u.x+=s,u.y+=q,u},_80o:function(i){var s=this,h=s.s,G=s.gv,q=s._data,D=s._83o,r=D.rect,O=r,c=D.position,K=D.rotation,I=D.shape;if(r.width>0&&r.height>0){if(K&&(i.save(),Jh(i,c.x,c.y),Nk(i,K),Jh(i,-c.x,-c.y),O=q.getSize(),O.x=c.x-O.width/2,O.y=c.y-O.height/2),s.freeDraw)s.freeDraw(i,O,D);else if(I){var C,e,f,y,l=D._60o,p=yk(i,l),d=D._53o,N=D._27Q,J=D._54o,B=D._55o,$=i.lineJoin,k=i.lineCap;if("roundRect"===I?C=h("shape.corner.radius"):"polygon"===I?C=h("shape.polygon.side"):"arc"===I&&(C=h("shape.arc.from"),e=h("shape.arc.to"),f=h("shape.arc.close"),y=h("shape.arc.oval")),i.lineJoin=D._62o,i.lineCap=D._61o,d||N?(N?yd(i,N):Mg(i,d,D.shapeGradient,D._59o,O),Vo(i,I,O,C,e,f,y),i.fill(),i!==p&&Vo(p,I,O,C,e,f,y)):Vo(p,I,O,C,e,f,y),J>0&&(i.lineWidth=J,i.strokeStyle=B,i.stroke(),D._56o&&mg(i,B,D._57o,J,G._zoom,D._58o)),Nm(i,l),h("shape.dash")){var A=h("shape.dash.width")||J;if(A>0){l=h("shape.dash.pattern");var p=yk(i,l,s._2Q("shape.dash.offset"));p!==i&&Vo(p,I,O,C,e,f,y),s._1Q(i,"shape",A,l)}}Ai(i,d,D._63o,O),i.lineJoin=$,i.lineCap=k}else ai(i,D.img,D.stretch,O.x,O.y,O.width,O.height,q,G,D.bodyColor);K&&i.restore()}s._39O(i,D)},_48O:function(){var t,l=this,D=l._data,$=l.gv,f=l._55O,x=$.getEditPointSize()/2+2;if(f._42O&&(t=D.getRect(),$n(t,x)),f._56O){var S=f._98o=$.getRotationPoint(D);t=gb(t,{x:S.x-x,y:S.y-x,width:2*x,height:2*x})}l._68o(t)},_47O:function(x){var m=this,s=m.gv,G=m._55O,M=m._data.getRect(),E=s.getEditPointSize(),F=G._98o;G._42O&&(x.fillStyle=s.getEditPointBackground(),x.strokeStyle=s.getEditPointBorderColor(),x.lineWidth=1,[{x:M.x,y:M.y},{x:M.x+M.width/2,y:M.y},{x:M.x+M.width,y:M.y},{x:M.x,y:M.y+M.height/2},{x:M.x+M.width,y:M.y+M.height/2},{x:M.x,y:M.y+M.height},{x:M.x+M.width/2,y:M.y+M.height},{x:M.x+M.width,y:M.y+M.height}].forEach(function(S){Sm(x,S.x-E/2,S.y-E/2,E,E),x.stroke()})),G._56O&&(x.fillStyle=s.getEditPointBorderColor(),x.strokeStyle=s.getEditPointBackground(),x.lineWidth=1,x.beginPath(),x.arc(F.x,F.y,E/2,0,i,!0),x.fill(),x.stroke())}});var ph=function($,N){Cb(ph,this,[$,N])},Mm=function(Q,G,V,H){var P=Ym(Q,G);return V=H?a(V,P):Br(V,P),P?V/=P:V=0,{x:Q.x+(G.x-Q.x)*V,y:Q.y+(G.y-Q.y)*V}};de(ph,Mk,{_3O:function(){var P,R=this,M=R._data,Y=R.gv,F=R.s,G=F(ad),s=M.isLooped(),v=F("edge.width"),x=F("edge.center"),w=F("edge.offset"),I=Y.getBorderColor(M),r=I?F("border.width"):0,l=R._2o(),e=M._40I,i=M._41I,N=R._78o=e&&i?{looped:s,type:G,width:v,center:x,color:R.getBodyColor("edge.color"),borderColor:I,borderWidth:r,_97o:l?F("select.color"):$,selectWidth:l,pattern:F("edge.pattern"),cap:F("edge.cap"),join:F("edge.join"),is3d:F("edge.3d"),_67o:F("edge.3d.color"),_66o:F("edge.3d.accuracy")}:$;if(N){var J=O.getEdgeType(G);if(J){var z=J(M,yc(R,Y,M,s,G),Y,R._19Q);z.points&&z.points.size()>1&&(N._4O=z,P=vc(N._4O.points))}else{var q=pr(Y,e,F("edge.source.position"),F("edge.source.offset.x"),F("edge.source.offset.y")),A=pr(Y,i,F("edge.target.position"),F("edge.target.offset.x"),F("edge.target.offset.y"));if(G===Uc){var H=N.points=F(ch)||ps,o=H.size();if(N.segments=F("edge.segments"),!x)if(w){var _=Mm(q,o?H.get(0):A,w,o),u=Mm(A,o?H.get(o-1):q,w,o);q=_,A=u}else{var S=ek(Y,e),j=ek(Y,i),f=wk(q,o?H.get(0):A,S);f&&(q={x:f[0],y:f[1]}),f=wk(o?H.get(o-1):q,A,j),f&&(A={x:f[0],y:f[1]})}P=gb(vc(N.points),vc(q,A))}else{var d=yc(R,Y,M,s,G);if(R._19Q||(d=-d),s)q=Nf(q),q.x-=e.getWidth()/2,N.radius=d,P={x:q.x-d,y:q.y-d,width:2*d,height:2*d};else{var c=Ym(q,A),m=Br(w,c),_={x:m,y:d},u={x:c-m,y:d},U=t(A.y-q.y,A.x-q.x),C=N.mat=new yp(U);if(N.orienAngle=U,N.angle=A.x<q.x?U+L:U,N.rect={x:_.x,y:_.y,width:u.x-_.x,height:0},N.origin=q,_=C.tf(_),_.x+=q.x,_.y+=q.y,u=C.tf(u),u.x+=q.x,u.y+=q.y,x){var g={x:c,y:0};g=C.tf(g),g.x+=q.x,g.y+=q.y,P=vc([q,_,u,g]),N.c1=q,N.c2=g}else P=vc(_,u);q=_,A=u}}N._69o=q,N._70o=A}zm(P,v/2+r+l,N.join),R._68o(P)}},getRotation:function(k,B,x){k=k||0;var h=this._78o;if(h){var i,F=h.angle,g=h.points,s=h._4O;if(F!=$)return B?h.orienAngle+k:F+k;if(s){var n=s.points;return i=n.size(),am[x]?i&&0===i%2?Hk(n.get(i/2-1),n.get(i/2),B,k):k:Fi[x]?Hk(n.get(0),n.get(1),B,k):Hk(n.get(i-2),n.get(i-1),B,k)}if(g)return i=g.size(),am[x]?i&&0===i%2?Hk(g.get(i/2-1),g.get(i/2),B,k):k:Fi[x]?Hk(h._69o,i?g.get(0):h._70o,B,k):Hk(i?g.get(i-1):h._69o,h._70o,B,k)}return k},getPosition:function(w,f,p,y,B){var b=this._78o;if(b){var t,H=b.type,D=b.points,g=b._4O,Y=b._69o,X=b._70o;if(!H)return b.looped?{x:Y.x-b.radius+f,y:Y.y+p}:(B&&Y&&X&&(Y.x>X.x||Y.x===X.x&&Y.y>X.y)&&(w=Ri[w],p=-p),t=nl(w,b.rect,y),t.x+=f,t.y+=p,t=b.mat.tf(t),t.x+=b.origin.x,t.y+=b.origin.y,t);if(D){var t,e=D.size();if(am[w]){if(e){var n=e%2;if(0===n)return Qq(D.get(e/2-1),D.get(e/2),w,f,p,y,B);t=D.get((e-n)/2)}else t={x:(Y.x+X.x)/2,y:(Y.y+X.y)/2};return t=nl(w,{x:t.x,y:t.y,width:0,height:0},y),t.x+=f,t.y+=p,t}return Fi[w]?Qq(Y,e?D.get(0):X,w,f,p,y,B):Qq(e?D.get(e-1):Y,X,w,f,p,y,B)}if(g){var F=g.points,e=F.size();if(am[w]){var n=e%2;return 0===n?Qq(F.get(e/2-1),F.get(e/2),w,f,p,y,B):(t=F.get((e-n)/2),t=nl(w,{x:t.x,y:t.y,width:0,height:0},y),t.x+=f,t.y+=p,t)}return Fi[w]?Qq(F.get(0),F.get(1),w,f,p,y,B):Qq(F.get(e-2),F.get(e-1),w,f,p,y,B)}}return Ch},_42:function(A){this._78o&&ph.superClass._42.call(this,A)},drawPath:function(e,k){e.beginPath();var j=k.type,K=k.points,F=k.segments,Y=k._4O;if(!j||K){var g=k._69o,R=g.x,$=g.y,V=k._70o,E=V.x,Q=V.y;if(j)if(F){var N=new fr({x:R,y:$});N.addAll(K),N.add({x:E,y:Q}),cp(e,N,F)}else e.moveTo(R,$),K.each(function(k){e.lineTo(k.x,k.y)}),e.lineTo(E,Q);else k.looped?e.arc(R,$,k.radius,0,i,!0):k.center?(e.moveTo(k.c1.x,k.c1.y),e.lineTo(R,$),e.lineTo(E,Q),e.lineTo(k.c2.x,k.c2.y)):(e.moveTo(R,$),e.lineTo(E,Q))}else Y&&cp(e,Y.points,Y.segments)},_80o:function(e){var w=this,R=w.s,S=w._78o,W=S.width,o=S.selectWidth,T=S.borderWidth,b=S.color,D=e.lineJoin,$=e.lineCap,_=S.pattern;if(e.lineJoin=S.join,e.lineCap=S.cap,w.drawPath(yk(e,_),S),o&&(e.strokeStyle=S._97o,e.lineWidth=W+2*(T+o),e.stroke()),T&&(e.strokeStyle=S.borderColor,e.lineWidth=W+2*T,e.stroke()),e.strokeStyle=b,e.lineWidth=W,e.stroke(),S.is3d&&mg(e,b,S._67o,W,w.gv._zoom,S._66o),Nm(e,_),R("edge.dash")){_=R("edge.dash.pattern");var K=yk(e,_,w._2Q("edge.dash.offset"));K!==e&&w.drawPath(K,S),w._1Q(e,"edge",R("edge.dash.width")||W,_)}e.lineJoin=D,e.lineCap=$},_48O:function(){var O=this,f=O._78o;if(O._55O._43O&&f&&f.points){var Y=vc(f.points);Y&&($n(Y,O.gv.getEditPointSize()/2+2),O._68o(Y))}},_47O:function(S){var f=this,E=f.gv,l=f._78o;if(f._55O._43O&&l&&l.points){var C=E.getEditPointSize()/2;S.fillStyle=E.getEditPointBackground(),S.strokeStyle=E.getEditPointBorderColor(),S.lineWidth=1,l.points.each(function(o){S.beginPath(),S.arc(o.x,o.y,C,0,i,!0),S.fill(),S.stroke()})}},_71o:function(Z,O){var l=this,z=l._data;if(l._19Q=!0,!z.getEdgeGroup())return Z?z.s("edge.gap"):0;var i,T=0,j=0,W=0;if(z.getEdgeGroup().getSiblings().each(function(C){C.each(function(V){if(l.gv.isVisible(V)&&V.s(ad)==O){var Y=V.s("edge.gap");i?(j+=W/2+Y/2,W=Y):(i=V,W=Y),V===z&&(T=j)}})}),Z)return j-T+W;var G=T-j/2;return i&&z._40I!==i._40I&&(l._19Q=!1),G}});var Rc=function(z,k){Cb(Rc,this,[z,k])};de(Rc,Ck,{_3O:function(){var O,R,A=this,Y=A.s,v=A._data,I=A.gv;if(A._88I=$,v.isExpanded()&&v.eachChild(function(W){var x=I.getBoundsForGroup(W);x&&(R||(R=[]),R.push(x),O=gb(O,x))}),O){var X=I.getLabel(v),D=Y("group.type");O=Wi(D,R,O),dc(O,v,"group.padding",1);var h=A._88I={type:D,rect:O,_64o:O};if(!D&&X!=$){var F,e=A.labelInfo={label:X,color:Y("group.title.color"),font:Y("group.title.font")},a=_o(e,X),f=a.width,o=a.height,G=Y("group.title.align");f>O.width&&(O.width=f),e.rect={y:O.y-o,width:a.width,height:o},F=G===Zd?O.x:G===Aj?O.x+O.width-f:O.x+O.width/2-f/2,e.rect.x=F,h.titleRect={x:O.x,y:O.y-o,width:O.width,height:o+1},h.rect={x:O.x,y:O.y-o,width:O.width,height:O.height+o}}A._40O(h,Y("group.border.width")/2)}else Rc.superClass._3O.call(A)},getPosition:function(b,O,c,m){var D=this._88I;if(D){var i=nl(b,D.rect,m);return i.x+=O,i.y+=c,i}return Rc.superClass.getPosition.apply(this,arguments)},_24O:function(L,X){var R=this._88I;(!R||R.type||"label2"===L)&&Rc.superClass._24O.call(this,L,X)},_80o:function(Z){var d=this,H=d._88I;if(H){var b=d._data,m=d.s,C=d.gv,N=H.type,t=H.rect,n=H._64o,o=H.titleRect,J=d.getBodyColor(),f=Tn(m("group.image"),J),F=m("group.image.stretch"),y=d.getBodyColor("group.background"),$=Tn(m("group.repeat.image"),J),G=m("group.gradient"),B=m("group.gradient.color"),q=m("group.depth");if(N){var e=m("group.border.pattern"),k=m("group.border.width"),U=Z.lineJoin,V=Z.lineCap;if(Z.lineJoin=m("group.border.join"),Z.lineCap=m("group.border.cap"),f){if(Z.save(),Vo(Z,N,t),Z.clip(),ai(Z,f,F,t.x,t.y,t.width,t.height,b,C,J),Z.restore(),k>0){var w=yk(Z,e);Vo(w,N,t),Z.lineWidth=k,Z.strokeStyle=m("group.border.color"),Z.stroke(),Nm(Z,e)}}else{var w=yk(Z,e);y||$?($?yd(Z,$):Mg(Z,y,G,B,t),Vo(Z,N,t),Z.fill(),Z!==w&&Vo(w,N,t)):Vo(w,N,t),k>0&&(Z.lineWidth=k,Z.strokeStyle=m("group.border.color"),Z.stroke()),Nm(Z,e),N===km&&Ai(Z,y,q,t)}Z.lineJoin=U,Z.lineCap=V}else if(f?ai(Z,f,F,n.x,n.y,n.width,n.height,b,C,d.getBodyColor()):(y||$)&&($?yd(Z,$):Mg(Z,y,G,B,n),Vo(Z,km,n),Z.fill(),Ai(Z,y,q,n)),o){var I=m("group.title.background");Sm(Z,o.x,o.y,o.width,o.height,I),Ai(Z,I,q,o)}d._39O(Z,H)}else Rc.superClass._80o.call(d,Z)}});var $e=function(F,a){Cb($e,this,[F,a])};de($e,Ck,{_3O:function(){var C=this,E=C._data,O=C.s,x=C.gv,R=E.getPoints(),r=x.getBorderColor(E),d=r?O("border.width"):0,Z=C._2o(),v=O("shape.border.width"),A=E.getRect(),t=x.getBodyColor(E),F=C._99o=R.isEmpty()?$:{rect:A,rotation:E.getRotation(),position:E.p(),points:R,segments:E.getSegments(),bodyColor:t,borderColor:r,borderWidth:d,_94o:O("shape.border.3d"),_95o:O("shape.border.3d.color"),_96o:O("shape.border.3d.accuracy"),_97o:Z?O("select.color"):$,selectWidth:Z,_53o:O("shape.background"),_27Q:Tn(O("shape.repeat.image"),t),_54o:v,_55o:O("shape.border.color"),shapeGradient:O("shape.gradient"),_59o:O("shape.gradient.color"),_60o:O("shape.border.pattern"),_61o:O("shape.border.cap"),_62o:O("shape.border.join")};if(F){var b=v/2+d+Z;b&&(A=Nf(A),zm(A,b,F._62o)),C._68o(A)}},getPosition:function(G,g,w,S){var T=this._99o;if(T){var F=nl(G,T.rect,S);return F.x+=g,F.y+=w,F}return Ch},_42:function(j){this._99o&&$e.superClass._42.call(this,j)},_80o:function(v){var $,J=this,T=J.s,A=J._99o,C=A.position,p=A.rotation,x=A.bodyColor,q=A.borderWidth,e=A.selectWidth,G=A._53o,B=A._27Q,d=A._54o,K=A.points,f=A.segments,P=J._data.isClosePath();p&&(v.save(),Jh(v,C.x,C.y),Nk(v,p),Jh(v,-C.x,-C.y));var H=A._60o,R=yk(v,H),w=v.lineJoin,t=v.lineCap;if(v.lineJoin=A._62o,v.lineCap=A._61o,G||B?(B?yd(v,B):($=x?x:G,Mg(v,$,A.shapeGradient,A._59o,A.rect)),cp(v,K,f,P),v.fill(),R!==v&&cp(R,K,f,P)):cp(R,K,f,P),e&&(v.strokeStyle=A._97o,v.lineWidth=d+2*(q+e),v.stroke()),q&&(v.strokeStyle=A.borderColor,v.lineWidth=d+2*q,v.stroke()),d&&($=A._55o,!G&&x&&($=x),v.strokeStyle=$,v.lineWidth=d,v.stroke(),A._94o&&mg(v,$,A._95o,d,J.gv._zoom,A._96o)),Nm(v,H),T("shape.dash")){var r=T("shape.dash.width")||d;if(r>0){H=T("shape.dash.pattern");var R=yk(v,H,J._2Q("shape.dash.offset"));R!==v&&cp(R,K,f,P),J._1Q(v,"shape",r,H)}}v.lineJoin=w,v.lineCap=t,p&&v.restore()},_48O:function(){var c=this;if($e.superClass._48O.call(c),c._55O._43O){var o=c._data.getRect();$n(o,c.gv.getEditPointSize()/2+2),c._68o(o)}},_47O:function(w){var R=this;if($e.superClass._47O.call(R,w),R._55O._43O){var S=R.gv,J=S.getEditPointSize()/2;w.fillStyle=S.getEditPointBackground(),w.strokeStyle=S.getEditPointBorderColor(),w.lineWidth=1,R._data.getPoints().each(function(z){w.beginPath(),w.arc(z.x,z.y,J,0,i,!0),w.fill(),w.stroke()})}}});var Tk=function(P,W){Cb(Tk,this,[P,W])};de(Tk,$e,{getRotation:function(n,f,T){n=n||0;var X=this._data.getPoints(),e=X.size();return e>1?am[T]?e&&0===e%2?Hk(X.get(e/2-1),X.get(e/2),f,n):n:Fi[T]?Hk(X.get(0),X.get(1),f,n):Hk(X.get(e-2),X.get(e-1),f,n):n},getPosition:function(J,g,y,w,M){var x=this._data.getPoints(),s=x.size();if(s>1){if(am[J]){var o=s%2;if(0===o)return Qq(x.get(s/2-1),x.get(s/2),J,g,y,w,M);var D=x.get((s-o)/2),Z={x:D.x,y:D.y,width:0,height:0};return D=nl(J,Z,w),D.x+=g,D.y+=y,D}return Fi[J]?Qq(x.get(0),x.get(1),J,g,y,w,M):Qq(x.get(s-2),x.get(s-1),J,g,y,w,M)}return Ch}});var ur=function(J,I){Cb(ur,this,[J,I])};de(ur,Ck,{_3O:function(){var x=this;ur.superClass._3O.call(x);var o=x.s,Y=x._83o;x._82o=Y.img||Y.shape?$:{background:x.getBodyColor("grid.background"),depth:o("grid.depth"),rect:Y.rect,_88o:o("grid.cell.depth"),cellBorderColor:o("grid.cell.border.color"),_89o:o("grid.row.count"),_90o:o("grid.column.count"),block:o("grid.block"),_91o:o("grid.block.color"),_92o:o("grid.block.padding"),_93o:o("grid.block.width")}},_80o:function(G){var N=this,y=N._82o;if(!y)return ur.superClass._80o.call(N,G),void 0;var i,$,T=N._data,J=y.background,c=y.rect,k=y.block,u=y._91o,I=y._92o,d=y._93o,X=y._88o,D=y.cellBorderColor,H=y._89o,U=y._90o;if(J)if(Sm(G,c.x,c.y,c.width,c.height,J),Ai(G,J,y.depth,c),X)for(i=0;H>i;i++)for($=0;U>$;$++)c=T.getCellRect(i,$),c&&Ai(G,J,X,c);else if(D){for(G.beginPath(),i=0;H>i;i++)for($=0;U>$;$++)c=T.getCellRect(i,$),c&&G.rect(c.x,c.y,c.width,c.height);G.strokeStyle=D,G.lineWidth=1,G.stroke()}if("h"===k)for(i=0;H>i;i++)c=gb(T.getCellRect(i,0),T.getCellRect(i,U-1)),$n(c,I),ng(G,u,c.x,c.y,c.width,c.height,d);else if("v"===k)for($=0;U>$;$++)c=gb(T.getCellRect(0,$),T.getCellRect(H-1,$)),$n(c,I),ng(G,u,c.x,c.y,c.width,c.height,d);N._39O(G,N._83o)}});var ve=dr.Interactor=function(R){this.gv=this._graphView=R};Ok("Interactor",x,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners(),this.clear()},clear:function(){},fi:function(N){this.gv.fi(N)},setCursor:function(g){_||(this.getView().style.cursor=g)},startDragging:function(h){var L=this;L._lastClientPoint=lc(h),L._lastLogicalPoint=L.gv.lp(h),vq(L,h)},clearDragging:function(){var X=this;X._lastClientPoint=X._lastLogicalPoint=X._logicalPoint=$},autoScroll:function(n){return this.gv.autoScroll(n,this._lastClientPoint)}});var _n=dr.DefaultInteractor=function(N){Cb(_n,this,[N])};Ok("DefaultInteractor",ve,{handle_mousedown:function(A){In(A);var I=this,G=I.gv,D=G.getDataAt(A);G.setFocus(A)&&!G._editing&&(ik(A)?G.handleDoubleClick(A,D):G.handleClick(A,D),G.isPannable()&&!D&&Ni(A)&&!Ak(A)&&(I._tx=G.tx(),I._ty=G.ty(),I.startDragging(A)))},handleWindowMouseUp:function(o){var U=this,D=U.gv;D._panning&&(delete D._panning,D.onPanEnded(),U.fi({kind:"endPan",event:o})),delete U._tx,delete U._ty,U.clearDragging()},handle_mousemove:function(a){var Q=this,Z=Q.gv;Q._hoverTimer&&(F(Q._hoverTimer),delete Q._hoverTimer),Q._hoverTimer=W(function(){Q.fi({kind:"hover",event:a}),F(Q._hoverTimer),delete Q._hoverTimer},Z.getHoverDelay()||800)},handle_touchmove:function(t){this.handle_mousemove(t)},handleWindowMouseMove:function(g){var R=this,M=R.gv,K=R._lastClientPoint;R.fi({kind:M._panning?"betweenPan":"beginPan",event:g}),M._panning=1,M.setTranslate(R._tx+g.clientX-K.x,R._ty+g.clientY-K.y)},handle_mousewheel:function(c){this.gv.handleScroll(c,c.wheelDelta)},handle_DOMMouseScroll:function(o){2===o.axis&&this.gv.handleScroll(o,-o.detail)},handle_keydown:function(J){this.gv.handleKeyDown(J)}});var Wm=dr.SelectInteractor=function(H){Cb(Wm,this,[H])};Ok("SelectInteractor",ve,{_42:function(){var q=this,j=q.gv,_=j.getZoom(),o=q.mark,y=q.div;y||(y=q.div=eo(),Si(q.getView(),y));var N={};N.x=o.x*_+j.tx(),N.y=o.y*_+j.ty(),N.width=o.width*_,N.height=o.height*_,Vq(y,N),this.intersects()?(y.style.border="",y.style.background=j.getRectSelectBackground()):(y.style.background="",y.style.border="1px solid "+j.getRectSelectBorderColor())},handle_mousedown:function(y){var Y=this,Z=Y.gv;if(Y._57I=$,!Z._editing){var u=Z.getDataAt(y),s=Z.sm();u?Ak(y)?s.co(u)?s.rs(u):s.as(u):s.co(u)||s.ss(u):Ak(y)||!Z.isPannable()?Ni(y)&&(Ak(y)||s.cs(),Z.isRectSelectable()&&(Y.startDragging(y),Z._77O=1)):Y._57I=lc(y)}},handle_mouseup:function(i){var F=this,x=F._57I;x&&(Ym(x,lc(i))<=1&&F.gv.sm().cs(),F._57I=$)},handleWindowMouseUp:function(k){this.clear(k)},handleWindowMouseMove:function(t){var y=this,z=y.gv;y._logicalPoint=z.lp(t),y.mark?(y.fi({kind:"betweenRectSelect",event:t}),y.autoScroll(t),y.redraw()):y.fi({kind:"beginRectSelect",event:t}),y.mark=vc(y._lastLogicalPoint,y._logicalPoint),y.redraw()},intersects:function(){var F=this,z=F._lastLogicalPoint,I=F._logicalPoint;return z.x>I.x||z.y>I.y},clear:function(g){var z=this,b=z.gv,n=z.mark;if(z._57I=$,z._lastLogicalPoint){if(n){if(0!==n.width&&0!==n.height){var T=b.getDatasInRect(n,z.intersects());if(!T.isEmpty()){var A=b.sm(),H=A.toSelection();T.each(function(D){A.co(D)?H.remove(D):H.add(D)}),A.ss(H)}}bf(z.div),delete z.div,delete z.mark,z.redraw(),z.fi({kind:"endRectSelect",event:g}),b.onRectSelectEnded()}z.clearDragging(),delete b._77O}},redraw:function(){var o=this;o._draw||(o._draw=1,W(function(){o.mark&&o._42(),delete o._draw},16))}});var Sq=dr.MoveInteractor=function(r){Cb(Sq,this,[r])};Ok("MoveInteractor",ve,{handle_mousedown:function(B){var Y=this,S=Y.gv;if(Ni(B)&&!S._editing){var x=S.getSelectedDataAt(B);x?(Y._data=x,S.handleMouseDown&&S.handleMouseDown(B,x),Y.startDragging(B),S.isMovable(x)&&(S._moving=1)):S._focusData=$}},handleWindowMouseUp:function(v){var Z=this,G=Z.gv;G.handleMouseUp&&G.handleMouseUp(v,Z._data),Z.clear(v)},handleWindowMouseMove:function(a){var E=this,M=E.gv,j=E._data,n=M.getDataModel(),i=n.getHistoryManager();if((!M._93O||!M._93O(a,j))&&M._moving){var Q=E._logicalPoint?"betweenMove":"beginMove",P={kind:Q,event:a},v=E._logicalPoint=M.lp(a);i&&"beginMove"===Q&&i.beginInteraction();var _=v.x-E._lastLogicalPoint.x,C=v.y-E._lastLogicalPoint.y,I=M.getMoveMode(a,j);I&&("x"===I?C=0:"y"===I?_=0:"xy"!==I&&(_=C=0)),M.moveSelection(_,C),E._lastLogicalPoint=v,E.autoScroll(a),E.fi(P)}},clear:function(P){var E=this,F=E.gv,c=F.getDataModel(),X=c.getHistoryManager();E._lastLogicalPoint&&(E._lastLogicalPoint=E._data=F._moving=$,E._logicalPoint&&(E.fi({kind:"endMove",event:P}),F.onMoveEnded(),X&&X.endInteraction()),E.clearDragging())}});var Eo=dr.EditInteractor=function(M){Cb(Eo,this,[M])};Ok("EditInteractor",ve,{ms_edit:1,setUp:function(){var o=this;Eo.superClass.setUp.call(o),_||o.gv.setEditInteractor(o)},tearDown:function(){Eo.superClass.tearDown.call(this),_||this.gv.setEditInteractor($)},clear:function(){var f=this,z=f.gv;z._editing&&(z._editing=f._77I=f._node=f._edge=f._shape=f._rect=f._89I=f._index=$,f.clearDragging(),f.setCursor(I))},handle_mousedown:function(P){var U=this,$=U.gv.dm(),e=$.getHistoryManager(),k=U._index,z=U._node,b=U._shape,q=U._edge,F=U._77I,D=U._89I;Ni(P)&&U.gv._editing&&(z&&D?(U._rect=z.getRect(),U.startDragging(P),e&&e.beginInteraction(),U.fi({kind:"beginEditRect",event:P,data:z,direction:D})):b&&k>=0?(U.startDragging(P),e&&e.beginInteraction(),U.fi({kind:"beginEditPoint",event:P,data:b,index:k})):q&&k>=0?(U.startDragging(P),e&&e.beginInteraction(),U.fi({kind:"beginEditPoint",event:P,data:q,index:k})):F&&(U.startDragging(P),e&&e.beginInteraction(),U.fi({kind:"beginEditRotation",event:P,data:F})))},handleWindowMouseUp:function(B){this._46O(B),this.clear()},handleWindowMouseMove:function(V){this._78I(V)},handle_mousemove:function(p){if(!Xp){var O=this,S=O.gv;O._79I(p,S.getSelectedDataAt(p))?S._editing=1:O.clear()}}});var Fh=dr.TouchInteractor=function(F,e){e=e||{},e.selectable===K&&(e.selectable=!0),e.movable===K&&(e.movable=!0),e.pannable===K&&(e.pannable=!0),e.pinchable===K&&(e.pinchable=!0),e.editable===K&&(e.editable=!0),this.params=e,Cb(Fh,this,[F])};Ok("TouchInteractor",ve,{ms_edit:1,setUp:function(){var Y=this;Fh.superClass.setUp.call(Y),_&&Y.params.editable&&Y.gv.setEditInteractor(Y)},tearDown:function(){var n=this;Fh.superClass.tearDown.call(n),_&&n.params.editable&&n.gv.setEditInteractor($)},clear:function(T){var w=this,G=w.gv,v=G.dm().getHistoryManager();G._moving&&(w.fi({kind:"endMove",event:T}),delete G._moving,G.onMoveEnded(),v&&v.endInteraction()),G._panning&&(w.fi({kind:"endPan",event:T}),delete G._panning,G.onPanEnded()),G._pinching&&(w.fi({kind:"endPinch",event:T}),delete G._pinching,G.onPinchEnded()),G._editing&&(w._46O(T),w._77I=w._node=w._edge=w._shape=w._rect=w._89I=w._index=G._editing=$),w._moving=w._panning=w._pinching=w._editing=w._57I=w._data=w._beginHistory=$,w.clearDragging()},handle_touchstart:function(q){var i=this;if(!i.gv._editing){In(q),i._57I=$;var z=i.params,A=i.gv,N=A.sm(),D=A.getDataAt(q),L=Di(q);if(1===L)ik(q)?A.handleDoubleClick(q,D):(A.handleClick(q,D),D&&(A.handleMouseDown&&A.handleMouseDown(q,D),i._data=D)),z.selectable||(D=$),D?(N.co(D)||N.ss(D),z.editable&&A.isEditable(D)&&i._79I(q,D,!0)?(i._editing=1,i.startDragging(q)):z.movable&&A.isMovable(D)&&(i._moving=1,i.startDragging(q))):(i._57I=lc(q),z.pannable&&A.isPannable()&&(i._panning=1,i.startDragging(q),i._translate={x:A.tx(),y:A.ty()}));else if(z.pinchable&&2===L){i._pinching=1,i.startDragging(q);var c=A.getView(),P=A.getZoom(),H=c.getBoundingClientRect(),W=q.touches[0],v=q.touches[1],U={x:(W.clientX+v.clientX)/2-H.left,y:(W.clientY+v.clientY)/2-H.top};U.x-=A.tx(),U.y-=A.ty(),U.x/=P,U.y/=P,i._p=U,i._d=db(q)}}},handle_touchend:function(R){var t=this,p=t.gv,I=t._57I,s=t._data;I&&(Ym(I,lc(R))<=1&&p.sm().cs(),t._57I=$),s&&p.handleMouseUp&&p.handleMouseUp(R,s)},handleWindowTouchEnd:function(N){this.clear(N)},handleWindowTouchMove:function($){var b=this,m=b.gv,p=m.dm().getHistoryManager(),L=Di($);if(1===L){if(b._editing&&(p&&!b._beginHistory&&(b._beginHistory=1,p.beginInteraction()),m._editing=1,b._78I($)),b._moving)p&&!b._beginHistory&&(b._beginHistory=1,p.beginInteraction()),b.handleMove($);else if(b._panning){var Q=lc($);m.setTranslate(b._translate.x+Q.x-b._lastClientPoint.x,b._translate.y+Q.y-b._lastClientPoint.y),b.fi({kind:m._panning?"betweenPan":"beginPan",event:$}),m._panning=1}}else if(2===L&&b._pinching){var x=db($);m.handlePinch(b._p,x,b._d),b._d=x,b.fi({kind:m._pinching?"betweenPinch":"beginPinch",event:$}),m._pinching=1}},handleMove:function($){var o=this,C=o.gv,O=C.lp($);C._93O&&C._93O($,o._data)||(C.moveSelection(O.x-o._lastLogicalPoint.x,O.y-o._lastLogicalPoint.y),o._lastLogicalPoint=O,o.autoScroll($),o.fi({kind:C._moving?"betweenMove":"beginMove",event:$}),C._moving=1)}});var xg="directional",Ei="point",Vf="spot",te="light.color";$l(O,{graph3dViewAttributes:$,graph3dViewFirstPersonMode:!1,graph3dViewMouseRoamable:!0,graph3dViewMoveStep:15,graph3dViewRotateStep:L/60,graph3dViewPannable:!0,graph3dViewRotatable:!0,graph3dViewWalkable:!0,graph3dViewResettable:!0,graph3dViewZoomable:!0,graph3dViewRectSelectable:!0,graph3dViewRectSelectBackground:Rl,graph3dViewGridVisible:!1,graph3dViewGridSize:50,graph3dViewGridGap:50,graph3dViewGridColor:[.4,.75,.85,1],graph3dViewOriginAxisVisible:!1,graph3dViewCenterAxisVisible:!1,graph3dViewAxisXColor:[1,0,0,1],graph3dViewAxisYColor:[0,1,0,1],graph3dViewAxisZColor:[0,0,1,1],graph3dViewEditSizeColor:[1,1,0,1],graph3dViewOrtho:!1,graph3dViewOrthoWidth:2e3,graph3dViewFovy:L/4,graph3dViewNear:10,graph3dViewFar:1e4,graph3dViewEye:[0,300,1e3],graph3dViewCenter:[0,0,0],graph3dViewUp:[0,1,-1e-7],graph3dViewHeadlightRange:0,graph3dViewHeadlightColor:[1,1,1,1],graph3dViewHeadlightIntensity:1,graph3dViewHeadlightDisabled:!1,graph3dViewFogDisabled:!0,graph3dViewFogColor:"white",graph3dViewFogNear:1,graph3dViewFogFar:2e3,graph3dViewDashDisabled:!0,graph3dViewBatchBlendDisabled:!0,graph3dViewBatchBrightnessDisabled:!0,graph3dViewBatchColorDisabled:!1,setShape3dModel:function(f,s){Kj[f]=s},getShape3dModel:function(e){return Kj[e]},createMatrix:function(H,u){_f(H)||(H=[H]);for(var W=H.length-1;W>=0;W--){var p=H[W];u=Sb(p.mat,p.s3,p.r3,p.rotationMode,p.t3,u)}return u},transformVec:function(V,p){return jf(V,p)},createBoxModel:function(){return{vs:kg,ns:ff,uv:oq,is:vl}},createRoundRectModel:function(l,d){return Ad.roundRect(l,d)},createStarModel:function(T,B){return Ad.star(T,B)},createRectModel:function(h,B){return Ad.rect(h,B)},createTriangleModel:function(O,Z){return Ad.triangle(O,Z)},createRightTriangleModel:function(M,o){return Ad.rightTriangle(M,o)},createParallelogramModel:function(c,y){return Ad.parallelogram(c,y)},createTrapezoidModel:function(U,l){return Ad.trapezoid(U,l)},createSmoothSphereModel:function(A,_,$,f,G,C,t){return th(new gf(A,_,$,f,G,C,t))},createSphereModel:function(o,m,L,Q,h,Z){return o?Sk(o,m,L,Q,h,Z):O.createSmoothSphereModel()},createSmoothConeModel:function(a,w,r,P,i){return Yq(a,w,r,P,i)},createConeModel:function(Y,P,E,S,H,g){return Y?re(Y,P,E,S,H,g):Yq(g)},createSmoothCylinderModel:function(S,o,q,Y,j,i,A,d){return th(new Pi(S,o,q,Y,j,i,A,d))},createCylinderModel:function(t,l,F,k,M,y,S){return t?Kk(t,l,F,k,M,y,S):Oo(y,S)},createSmoothTorusModel:function(I,q,C,J,l,d){return th(new qg(I,q,C,J,l,d))},createTorusModel:function(F,L,q,U,W,M,u){return F?Xm(F,L,q,U,W,M,u):sn(M,u)},createExtrusionModel:function(N,i,h,v,_,e,A,Q){return Ld(N,i,h,v,_,e,A,Q)},createSmoothRingModel:function(I,d,C,U,L,H){for(var u=[],_=0;_<I.length-1;_+=2)u.push({x:I[_],y:I[_+1]});for(I=Ui(u,d,C)[0],u=[],_=0;_<I.length;_++){var J=I[_];u.push(new aj(J.x,0,J.y))}return th(new $j(u,H,U,L))},createRingModel:function(g,J,e,x,T,r,P,m,F,l){for(var q=[],E=0;E<g.length-1;E+=2)q.push({x:g[E],y:g[E+1]});r=r||O.shapeSide,P=P||0,m=m||r;var t,H,X,K,I,L,j,V,Q,f,E,z,W,w,o,c,i,N,D=[],v=[],A=F?[]:$,k=F?[]:$,b=l?[]:$,n=l?[]:$,u=x?[]:$,M=x?[]:$,S=T?[]:$,C=T?[]:$,g=Ui(q,J,e),R=Fq(g),p=0,B=2*Math.PI/r;return g.forEach(function(a){if(X=a.length,X>1){if(K=a[0],x)for(L=K.x,V=K.y,E=P;m>E;E++)z=E+1,W=E*B,w=z*B,o=h(W),c=d(W),i=h(w),N=d(w),u.push(o*L,V,-c*L,i*L,V,-N*L,0,V,0),M.push(.5-.5*o,.5-.5*c,.5-.5*i,.5-.5*N,.5,.5);for(f=0;X>f;f++){for(I=a[f],L=K.x,j=I.x,V=K.y,Q=I.y,t=p/R,p+=Ym(K,I),H=p/R,E=P;m>E;E++)z=E+1,W=E*B,w=z*B,o=h(W),c=d(W),i=h(w),N=d(w),D.push(o*j,Q,-c*j,i*j,Q,-N*j,o*L,V,-c*L,i*j,Q,-N*j,i*L,V,-N*L,o*L,V,-c*L),v.push(E/r,H,z/r,H,E/r,t,z/r,H,z/r,t,E/r,t),F&&E===P&&(A.push(0,V,0,0,Q,0,o*j,Q,-c*j,o*j,Q,-c*j,o*L,V,-c*L,0,V,0),k.push(0,.5-V,0,.5-Q,2*j,.5-Q,2*j,.5-Q,2*L,.5-V,0,.5-V)),l&&z===m&&(b.push(0,V,0,i*j,Q,-N*j,0,Q,0,i*j,Q,-N*j,0,V,0,i*L,V,-N*L),n.push(1,.5-V,1-2*j,.5-Q,1,.5-Q,1-2*j,.5-Q,1,.5-V,1-2*L,.5-V));K=I}if(T)for(L=K.x,V=K.y,E=P;m>E;E++)z=E+1,W=E*B,w=z*B,o=h(W),c=d(W),i=h(w),N=d(w),S.push(i*L,V,-N*L,o*L,V,-c*L,0,V,0),C.push(.5-.5*i,.5+.5*N,.5-.5*o,.5+.5*c,.5,.5)}}),{vs:D,uv:v,bottom_vs:S,bottom_uv:C,top_vs:u,top_uv:M,from_vs:A,from_uv:k,to_vs:b,to_uv:n}}},!0),$l(n,{"3d.move.mode":K,"3d.selectable":!0,"3d.visible":!0,"3d.movable":!0,"3d.editable":!0,"shape.border.gradient.color":K,"edge.gradient.color":K,"edge.source.t3":K,"edge.target.t3":K,"light.type":Ei,"light.center":[0,0,0],"light.color":[1,1,1,1],"light.disabled":!1,"light.angle":L/4,"light.range":0,"light.exponent":1,"light.intensity":1,"wf.visible":!1,"wf.width":1,"wf.color":Ng,"wf.short":!1,"wf.mat":K,batch:K,"transparent.mask":!1,brightness:K,"select.brightness":.7,"repeat.uv.length":K,"label.face":G,"label.t3":K,"label.r3":K,"label.texture.scale":2,"label.rotationMode":vi,"label.light":!1,"label.blend":K,"label.reverse.flip":!1,"label.reverse.color":Mf,"label.reverse.cull":!1,"label.transparent":!1,"label.autorotate":!1,"label2.face":G,"label2.t3":K,"label2.r3":K,"label2.texture.scale":2,"label2.rotationMode":vi,"label2.light":!1,"label2.blend":K,"label2.reverse.flip":!1,"label2.reverse.color":Mf,"label2.reverse.cull":!1,"label2.transparent":!1,"label2.autorotate":!1,"note.face":G,"note.t3":K,"note.r3":K,"note.texture.scale":2,"note.rotationMode":vi,"note.light":!1,"note.blend":K,"note.reverse.flip":!1,"note.reverse.color":Mf,"note.reverse.cull":!1,"note.transparent":!1,"note.autorotate":!1,"note2.face":G,"note2.t3":K,"note2.r3":K,"note2.texture.scale":2,"note2.rotationMode":vi,"note2.light":!1,"note2.blend":K,"note2.reverse.flip":!1,"note2.reverse.color":Mf,"note2.reverse.cull":!1,"note2.transparent":!1,"note2.autorotate":!1,shape3d:K,"shape3d.color":Jg,"shape3d.top.color":K,"shape3d.bottom.color":K,"shape3d.from.color":K,"shape3d.to.color":K,"shape3d.image":K,"shape3d.top.image":K,"shape3d.bottom.image":K,"shape3d.from.image":K,"shape3d.to.image":K,"shape3d.light":!0,"shape3d.side":0,"shape3d.side.from":K,"shape3d.side.to":K,"shape3d.visible":!0,"shape3d.from.visible":!0,"shape3d.to.visible":!0,"shape3d.top.visible":!0,"shape3d.bottom.visible":!0,"shape3d.torus.radius":.17,"shape3d.resolution":0,"shape3d.blend":K,"shape3d.opacity":K,"shape3d.reverse.flip":!1,"shape3d.reverse.color":Mf,"shape3d.reverse.cull":!1,"shape3d.transparent":!1,"shape3d.uv.offset":K,"shape3d.uv.scale":K,"shape3d.top.uv.offset":K,"shape3d.top.uv.scale":K,"shape3d.bottom.uv.offset":K,"shape3d.bottom.uv.scale":K,"shape3d.from.uv.offset":K,"shape3d.from.uv.scale":K,"shape3d.to.uv.offset":K,"shape3d.to.uv.scale":K,"shape3d.top.cap":K,"shape3d.bottom.cap":K,"shape3d.start.angle":0,"shape3d.discard.selectable":!0,"shape3d.top.discard.selectable":!0,"shape3d.bottom.discard.selectable":!0,"shape3d.from.discard.selectable":!0,"shape3d.to.discard.selectable":!0,"shape3d.scaleable":!0,"all.light":!0,"all.visible":!0,"all.color":Jg,"all.image":K,"all.blend":K,"all.opacity":K,"all.reverse.flip":!1,"all.reverse.color":Mf,"all.reverse.cull":!1,"all.transparent":!1,"all.uv":K,"all.uv.offset":K,"all.uv.scale":K,"all.discard.selectable":!0,mat:K,"left.mat":K,"right.mat":K,"top.mat":K,"bottom.mat":K,"front.mat":K,"back.mat":K},!0);
    var cb,Yp=!1,Ze=[0,0,0,1/255],Sr={left:[1/255,0,0,1],right:[2/255,0,0,1],top:[3/255,0,0,1],bottom:[4/255,0,0,1],front:[5/255,0,0,1],back:[6/255,0,0,1],m:{1:Zd,2:Aj,3:tn,4:sb,5:G,6:cn}},Pk=function(E,g,e,v){if(g.getFaceVisible(E,e)){gg(g,$k(E,g.getFaceMat(E,e)||g.getMat(E)));var r=g._26I;g.getFaceReverseCull(E,e)?r.enable(r.CULL_FACE):r.disable(r.CULL_FACE),gn(r,g._prg.uFixPickReverseColor,Sr[e]),ns(r,v,6),bk(g)}},Hn=function(P){return P instanceof Rp},Qm=function(s){return[s.x,s.e||0,s.y]},Hc=function(N,m,A){for(var m=ti(m),f=m[0],a=m[1],T=m[2];A--;)N.push(f,a,T)},Bq=function(u,O,r){for(var O=ti(O),g=O[0],s=O[1],V=O[2],G=O[3];r--;)u.push(g,s,V,G)},Gg=function(_,H,i){if(H)for(var J,h,N,u=H[0],y=H[1],T=H[2],r=H[4],g=H[5],l=H[6],m=H[8],v=H[9],c=H[10],C=H[12],Z=H[13],n=H[14],W=i.length,z=0,z=0;W>z;z+=3)J=i[z],h=i[z+1],N=i[z+2],_.push(u*J+r*h+m*N+C,y*J+g*h+v*N+Z,T*J+l*h+c*N+n);else Jc(_,i)},rs=function(C,m){var j=m.s("light.intensity"),Z=ti(m.s(te)),c=Z[0],Q=Z[1],V=Z[2];1!==j&&(c*=j,Q*=j,V*=j),C.push(c,Q,V,m.s("light.disabled")?1:0)},Fb=function(V,D,l){gn(D,l.uHeadlightRange,V._headlightRange);var u=V._headlightIntensity,f=ti(V._headlightColor);1!==u&&(f=[f[0]*u,f[1]*u,f[2]*u]),gn(D,l.uHeadlightColor,[f[0],f[1],f[2],V._headlightDisabled?1:0]);var Q=V._59O,L=V._spots,j=V._dirs;if(Q.length){var S=[],_=[],R=[];Q.forEach(function(Q){rs(S,Q),Jc(_,Q.p3()),R.push(Q.s("light.range"))}),D.uniform4fv(l.uPointColor,S),D.uniform1fv(l.uPointRange,R),D.uniform3fv(l.uPointPosition,_)}if(L.length){var a=[],p=[],b=[],U=[],e=[],q=[];L.forEach(function(_){rs(a,_),Jc(p,_.p3()),Jc(b,_.s("light.center")),U.push(_.s("light.range")),e.push(h(_.s("light.angle")/2)),q.push(_.s("light.exponent"))}),D.uniform4fv(l.uSpotColor,a),D.uniform1fv(l.uSpotRange,U),D.uniform1fv(l.uSpotAngle,e),D.uniform1fv(l.uSpotExponent,q),D.uniform3fv(l.uSpotPosition,p),D.uniform3fv(l.uSpotCenter,b)}if(j.length){var K=[],W=[];j.forEach(function(V){rs(K,V),Jc(W,V.p3())}),D.uniform4fv(l.uDirColor,K),D.uniform3fv(l.uDirPosition,W)}},ir=function(l){return l>0&&0===(l-1&l)},kr=function(w){return w=V(0,a(L,w)),w=V(Cn,a(L-Cn,w))},To=function(){return.05+v()/2},nd=function(I,r,J,p){var z,k=I.getEye();return I.isOrtho()?(z=Hl(I.getCenter(),k),z[0]+=p[0],z[1]+=p[1],z[2]+=p[2]):z=k,gs(r,J,p,z)},gs=function(P,N,L,v){var C=jb(P,N),M=Hl(v,L,!0),E=jb(M,N);if(m(E)<Cn)return $;var e=(C-jb(L,N))/E;return[L[0]+M[0]*e,L[1]+M[1]*e,L[2]+M[2]*e]},Ob=function(J,L){return{x:2*J.x-L.x,y:2*J.y-L.y}},Vp=function(b,k,T,O){var Z,c;if(!b)return Z=t(k.y-T.y,T.x-k.x),{x:k.x+O*d(Z),y:k.y+O*h(Z)};if(!T)return Z=t(b.y-k.y,k.x-b.x),{x:k.x+O*d(Z),y:k.y+O*h(Z)};var P=Hl([b.x,b.y,0],[k.x,k.y,0],!0),N=Hl([T.x,T.y,0],[k.x,k.y,0],!0),B=-(P[0]+N[0])/2,y=-(P[1]+N[1])/2,x=q(B*B+y*y);return Cn>x?(Z=t(b.y-k.y,k.x-b.x),{x:k.x+O*d(Z),y:k.y+O*h(Z)}):(Z=Y(jb(P,N))/2,c=P[1]*N[0]-P[0]*N[1]>0?-1:1,B/=x,y/=x,x=O/d(Z),{x:k.x+c*x*B,y:k.y+c*x*y})},fq=function(N){var p=N[1],P=N[2],_=N[3],G=N[6],C=N[7],m=N[11];N[1]=N[4],N[2]=N[8],N[3]=N[12],N[4]=p,N[6]=N[9],N[7]=N[13],N[8]=P,N[9]=G,N[11]=N[14],N[12]=_,N[13]=C,N[14]=m},oc=function(D){var V=D[0],X=D[1],H=D[2],b=D[3],P=D[4],x=D[5],v=D[6],O=D[7],u=D[8],e=D[9],U=D[10],S=D[11],A=D[12],G=D[13],k=D[14],W=D[15],l=V*x-X*P,E=V*v-H*P,N=V*O-b*P,t=X*v-H*x,w=X*O-b*x,y=H*O-b*v,Q=u*G-e*A,c=u*k-U*A,Y=u*W-S*A,Z=e*k-U*G,z=e*W-S*G,d=U*W-S*k,K=l*d-E*z+N*Z+t*Y-w*c+y*Q;return K?(K=1/K,D[0]=(x*d-v*z+O*Z)*K,D[1]=(H*z-X*d-b*Z)*K,D[2]=(G*y-k*w+W*t)*K,D[3]=(U*w-e*y-S*t)*K,D[4]=(v*Y-P*d-O*c)*K,D[5]=(V*d-H*Y+b*c)*K,D[6]=(k*N-A*y-W*E)*K,D[7]=(u*y-U*N+S*E)*K,D[8]=(P*z-x*Y+O*Q)*K,D[9]=(X*Y-V*z-b*Q)*K,D[10]=(A*w-G*N+W*l)*K,D[11]=(e*N-u*w-S*l)*K,D[12]=(x*c-P*Z-v*Q)*K,D[13]=(V*Z-X*c+H*Q)*K,D[14]=(G*E-A*t-k*l)*K,D[15]=(u*t-e*E+U*l)*K,void 0):$},lb=function(P,L){if(L){var W=L[0],E=L[1],o=L[2];P[12]=P[0]*W+P[4]*E+P[8]*o+P[12],P[13]=P[1]*W+P[5]*E+P[9]*o+P[13],P[14]=P[2]*W+P[6]*E+P[10]*o+P[14],P[15]=P[3]*W+P[7]*E+P[11]*o+P[15]}},Sf=function(N,S){if(S){var q=S[0],p=S[1],D=S[2];N[0]=N[0]*q,N[1]=N[1]*q,N[2]=N[2]*q,N[3]=N[3]*q,N[4]=N[4]*p,N[5]=N[5]*p,N[6]=N[6]*p,N[7]=N[7]*p,N[8]=N[8]*D,N[9]=N[9]*D,N[10]=N[10]*D,N[11]=N[11]*D}},jr=function(N,o,M){var W=o[0],U=o[1],L=o[2],u=o[3],v=o[4],A=o[5],F=o[6],J=o[7],I=o[8],P=o[9],B=o[10],n=o[11],q=o[12],X=o[13],c=o[14],b=o[15],Z=M[0],t=M[1],e=M[2],$=M[3];return N[0]=Z*W+t*v+e*I+$*q,N[1]=Z*U+t*A+e*P+$*X,N[2]=Z*L+t*F+e*B+$*c,N[3]=Z*u+t*J+e*n+$*b,Z=M[4],t=M[5],e=M[6],$=M[7],N[4]=Z*W+t*v+e*I+$*q,N[5]=Z*U+t*A+e*P+$*X,N[6]=Z*L+t*F+e*B+$*c,N[7]=Z*u+t*J+e*n+$*b,Z=M[8],t=M[9],e=M[10],$=M[11],N[8]=Z*W+t*v+e*I+$*q,N[9]=Z*U+t*A+e*P+$*X,N[10]=Z*L+t*F+e*B+$*c,N[11]=Z*u+t*J+e*n+$*b,Z=M[12],t=M[13],e=M[14],$=M[15],N[12]=Z*W+t*v+e*I+$*q,N[13]=Z*U+t*A+e*P+$*X,N[14]=Z*L+t*F+e*B+$*c,N[15]=Z*u+t*J+e*n+$*b,N},mn=function(l,u,Y,p){var Q,i,B,x,K,U,r,J,e,z,b=u[0],V=u[1],g=u[2],f=p[0],M=p[1],_=p[2],Z=Y[0],H=Y[1],I=Y[2];return m(b-Z)<Cn&&m(V-H)<Cn&&m(g-I)<Cn?xm(l):(r=b-Z,J=V-H,e=g-I,z=1/q(r*r+J*J+e*e),r*=z,J*=z,e*=z,Q=M*e-_*J,i=_*r-f*e,B=f*J-M*r,z=q(Q*Q+i*i+B*B),z?(z=1/z,Q*=z,i*=z,B*=z):(Q=0,i=0,B=0),x=J*B-e*i,K=e*Q-r*B,U=r*i-J*Q,z=q(x*x+K*K+U*U),z?(z=1/z,x*=z,K*=z,U*=z):(x=0,K=0,U=0),l[0]=Q,l[1]=x,l[2]=r,l[3]=0,l[4]=i,l[5]=K,l[6]=J,l[7]=0,l[8]=B,l[9]=U,l[10]=e,l[11]=0,l[12]=-(Q*b+i*V+B*g),l[13]=-(x*b+K*V+U*g),l[14]=-(r*b+J*V+e*g),l[15]=1,l)},Xo=function(T,u,r,I,m){var y=1/e(u/2),a=1/(I-m);return T[0]=y/r,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=y,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=(m+I)*a,T[11]=-1,T[12]=0,T[13]=0,T[14]=2*m*I*a,T[15]=0,T},ji=function(B,H,w,r,N,W,z){var P=1/(H-w),Y=1/(r-N),e=1/(W-z);return B[0]=-2*P,B[1]=0,B[2]=0,B[3]=0,B[4]=0,B[5]=-2*Y,B[6]=0,B[7]=0,B[8]=0,B[9]=0,B[10]=2*e,B[11]=0,B[12]=(H+w)*P,B[13]=(N+r)*Y,B[14]=(z+W)*e,B[15]=1,B},on=function(x,o){return mn(o?o:Cm(),x._eye,x._center,x._up)},Nc=function(y){var m=y.getAspect(),M=y._near,b=y._far,S=Cm();if(y._ortho){var F=y._orthoWidth/2,g=F/m;ji(S,-F,F,-g,g,M,b)}else Xo(S,y._fovy,m,M,b);return S},Lf=function(P,l){if(!P)return $;var A=0,h=1,X=2,G=[],S=0,g=P.length,W=g/3;if(l){for(;g>S;S++)G[S]=0;for(S=0;S<l.length;S+=3){var e=[],Q=[],F=[];e[A]=P[3*l[S+1]+A]-P[3*l[S]+A],e[h]=P[3*l[S+1]+h]-P[3*l[S]+h],e[X]=P[3*l[S+1]+X]-P[3*l[S]+X],Q[A]=P[3*l[S+2]+A]-P[3*l[S+1]+A],Q[h]=P[3*l[S+2]+h]-P[3*l[S+1]+h],Q[X]=P[3*l[S+2]+X]-P[3*l[S+1]+X],F[A]=e[h]*Q[X]-e[X]*Q[h],F[h]=e[X]*Q[A]-e[A]*Q[X],F[X]=e[A]*Q[h]-e[h]*Q[A];for(var y=0;3>y;y++)G[3*l[S+y]+A]+=F[A],G[3*l[S+y]+h]+=F[h],G[3*l[S+y]+X]+=F[X]}}else for(S=0;W>S;S+=3){var e=[],Q=[],F=[];e[A]=P[3*(S+1)+A]-P[3*S+A],e[h]=P[3*(S+1)+h]-P[3*S+h],e[X]=P[3*(S+1)+X]-P[3*S+X],Q[A]=P[3*(S+2)+A]-P[3*(S+1)+A],Q[h]=P[3*(S+2)+h]-P[3*(S+1)+h],Q[X]=P[3*(S+2)+X]-P[3*(S+1)+X],F[A]=e[h]*Q[X]-e[X]*Q[h],F[h]=e[X]*Q[A]-e[A]*Q[X],F[X]=e[A]*Q[h]-e[h]*Q[A];for(var y=0;3>y;y++)G[3*(S+y)+A]=F[A],G[3*(S+y)+h]=F[h],G[3*(S+y)+X]=F[X]}for(S=0;g>S;S+=3){var N=[];N[A]=G[S+A],N[h]=G[S+h],N[X]=G[S+X];var L=q(N[A]*N[A]+N[h]*N[h]+N[X]*N[X]);0===L&&(L=Cn),N[A]=N[A]/L,N[h]=N[h]/L,N[X]=N[X]/L,G[S+A]=N[A],G[S+h]=N[h],G[S+X]=N[X]}return new wq(G)},Pb=function(R,Z,N){if(N||(N=R.createTexture()),Z){var t=R.TEXTURE_2D,i=R.LINEAR,D=R.REPEAT,a=R.CLAMP_TO_EDGE,w=R.TEXTURE_MIN_FILTER;wp(R,N),R.texImage2D(t,0,R.RGBA,R.RGBA,R.UNSIGNED_BYTE,Z),Rg(R,R.TEXTURE_MAG_FILTER,i),ir(Z.width)&&ir(Z.height)?(Rg(R,R.TEXTURE_WRAP_S,D),Rg(R,R.TEXTURE_WRAP_T,D),Rg(R,w,R.LINEAR_MIPMAP_LINEAR),R.generateMipmap(t)):(Rg(R,R.TEXTURE_WRAP_S,a),Rg(R,R.TEXTURE_WRAP_T,a),Rg(R,w,i)),wp(R,$)}return N},go=function(w){w._26I&&w._prg&&(w._26I.deleteProgram(w._prg),w._prg=$)},sh=function(y,E,m,d){var e=y.createShader(m);return y.shaderSource(e,d),y.compileShader(e),y.attachShader(E,e),e},kp=function(_){return _.createBuffer()},wp=function(f,C){f.bindTexture(f.TEXTURE_2D,C)},Ur=function(D,h){D.bindFramebuffer(D.FRAMEBUFFER,h)},Rg=function(S,z,Z){S.texParameteri(S.TEXTURE_2D,z,Z)},vg=function(z,E){if(E){var E=ti(E);z.clearColor(E[0],E[1],E[2],E[3])}},_h=function(o,K){gn(o,K.uFix,!0),nj(o,K.aNormal)},qi=function($,N){gn($,N.uFix,!1),Ol($,N.aNormal)},Op=function(e,v,d,u,b,A,N,h){e._picking||(d?(gn(e,v.uBlend,!0),gn(e,v.uBlendColor,d)):gn(e,v.uBlend,!1),gn(e,v.uLight,u==$?!0:u),hf(b)&&1!==b&&gn(e,v.uPartOpacity,b),gn(e,v.uReverseFlip,A==$?!1:A),gn(e,v.uFixPickReverseColor,N||Mf)),h?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE)},Pr=function(q,m){q._picking||gn(q,m.uPartOpacity,1)},Tf=function(Y,B,A,i,V,Z,P,X){if(A){gn(Y,B.uTexture,!0),gn(Y,B.uDiscardSelectable,pi(i)?i:!0),Ol(Y,B.aUv),Bb(Y,V,Z,B.aUv,2),Y.activeTexture(Y.TEXTURE0),wp(Y,A),Y.uniform1i(B.uSampler,0);var w=[0,0,1,1];P&&(w[0]=P[0],w[1]=P[1]),X&&(w[2]=X[0],w[3]=X[1]),gn(Y,B.uOffsetScale,w)}},um=function(k,P,g){g&&(wp(k,$),nj(k,P.aUv),gn(k,P.uTexture,!1))},cc=function(Q,K,D,Y,p,k){D&&!A&&Q.lineWidth(D),Y&&!Q._picking&&gn(Q,K.uFixPickReverseColor,Y),p&&Bb(Q,p,k,K.aPosition)},Ye=function(k,V,W,P){cb&&(P=k[cb]),k.drawArrays(P==$?k.TRIANGLES:P,V,W)},ns=function(M,y,D,P){cb&&(P=M[cb]),M.drawElements(P==$?M.TRIANGLES:P,D,M.UNSIGNED_SHORT,y==$?0:2*y)},Bb=function(Z,c,V,j,_){var f=Z.ARRAY_BUFFER;Z.bindBuffer(f,c),V&&Z.bufferData(f,V,Z.STATIC_DRAW),j!=$&&Z.vertexAttribPointer(j,_?_:3,Z.FLOAT,!1,0,0)},An=function(N,A,q){var Z=N.ELEMENT_ARRAY_BUFFER;N.bindBuffer(Z,A),q&&N.bufferData(Z,q,N.STATIC_DRAW)},gn=function(R,p,k){if(k!=$&&p!=$){k=ti(k);var Q=k.length;3===Q?R.uniform3fv(p,k):4===Q?R.uniform4fv(p,k):16===Q?R.uniformMatrix4fv(p,!1,k):pi(k)?R.uniform1i(p,k?1:0):2===Q?R.uniform2fv(p,k):R.uniform1f(p,k)}},Ol=function(m,K){K!=$&&K>=0&&m.enableVertexAttribArray(K)},nj=function(l,x){x!=$&&x>=0&&l.disableVertexAttribArray(x)},bk=function(q,m){var P=q.getGL(),g=q._prg;q._7O=q._8O.pop(),m&&(gn(P,g.uMVMatrix,q._7O),q._6O=m,gn(P,g.uNMatrix,m))},ni=function(l,b){return b||(b=Cm()),bs(b,l),oc(b),fq(b),b},gg=function(B,j){var C=B.getGL(),x=B._prg,y=B._7O;j&&(B._8O.push(Jr(y)),jr(y,y,j)),gn(C,x.uMVMatrix,y),gn(C,x.uNMatrix,ni(y,B._6O))},vd=function(p,o,J,g,X,V){if(J){if(g){var N=J.value++,K=[(255&N>>24)/255,(255&N>>16)/255,(255&N>>8)/255,(255&N)/255];J[N]={data:X,part:V}}else K=Ze;return gn(p,o.uFixPickReverseColor,K),K}},mc=function(){var E={center:function(O,V,j,g,a){var n=V[1]/2,G={x:-V[0]/2,y:n,width:V[0],height:V[1]},$=nl(O,G,j);return[$.x+g,2*n-$.y-a,To()]},front:function(c,E,J,p,Y){var O=E[1]/2,d={x:-E[0]/2,y:O,width:E[0],height:E[1]},X=nl(c,d,J);return[X.x+p,2*O-X.y-Y,E[2]/2+To()]},back:function($,Z,g,p,D){var k=Z[0]/2,V=Z[1]/2,j={x:k,y:V,width:Z[0],height:Z[1]},q=nl($,j,g);return[2*k-q.x-p,2*V-q.y-D,-Z[2]/2-To()]},left:function(L,g,m,F,X){var k=g[1]/2,q={x:-g[2]/2,y:k,width:g[2],height:g[1]},K=nl(L,q,m);return[-g[0]/2-To(),2*k-K.y-X,K.x+F]},right:function(o,Z,v,A,C){var D=Z[2]/2,t=Z[1]/2,X={x:D,y:t,width:Z[2],height:Z[1]},Y=nl(o,X,v);return[Z[0]/2+To(),2*t-Y.y-C,2*D-Y.x-A]},top:function(j,_,t,J,W){var K={x:-_[0]/2,y:-_[2]/2,width:_[0],height:_[2]},L=nl(j,K,t);return[L.x+J,_[1]/2+To(),L.y+W]},bottom:function(Y,g,A,e,r){var E=g[2]/2,o={x:-g[0]/2,y:E,width:g[0],height:g[2]},i=nl(Y,o,A);return[i.x+e,-g[1]/2-To(),2*E-i.y-r]}};return function(T,R,I,W,y,B){return E[W](T,R,I,y||0,B||0)}}(),nb=function(i,s,O,J,V,G,t,W,X,r){if(V&&(s[0]+=V[0],s[1]+=V[1],s[2]+=V[2]),lb(i,O),W){var Z=Cm();if(Jd(Z,X,r),jf(s,Z),lb(i,s),i.auto=W,i.pos=jf([0,0,0],i),G){var S=i.mat2=Cm();Jd(S,G,t)}}else Jd(i,X,r),lb(i,s),J===Zd?Ho(i,-l):J===Aj?Ho(i,l):J===tn?mm(i,-l):J===sb?mm(i,l):J===cn&&Ho(i,L),Jd(i,G,t);return i},Ce=function(H,N){var I=N.auto,r=N.mat2,K=H.gv;if(I){var e=Hl(H.gv.getEye(),N.pos),b=Cm();Ho(b,L/2+t(-e[2],e[0])),"y"!==I&&mm(b,-t(e[1],q(e[2]*e[2]+e[0]*e[0]))),r&&jr(b,b,r),b=jr(Cm(),N,b),gg(K,b)}else gg(K,N)},ig=function(G,i,d,g,C){var L=G.s,E=G.gv,A=E.getGL(),U=E._prg,$=E._buffer,V=E._1O;Pb(A,sf,V),Ce(G,d),Op(A,U,L(i+".blend"),L(i+".light"),L(i+".opacity"),L(i+".reverse.flip"),L(i+".reverse.color"),L(i+".reverse.cull")),Tf(A,U,V,C,$.uv,Wc),Bb(A,$.vs,g,U.aPosition),Bb(A,$.ns,Oi,U.aNormal),An(A,$.is,vm),ns(A,0,vm.length),um(A,U,V),Pr(A,U),bk(E)},Dc=function(o,d,f){var N=o.gv,G=o.data,i=o[d]={blend:N.getBodyColor(G)||N.getFaceBlend(G,d),light:N.getFaceLight(G,d),color:N.getFaceColor(G,d),opacity:N.getFaceOpacity(G,d),transparent:N.getFaceTransparent(G,d),reverseFlip:N.getFaceReverseFlip(G,d),reverseColor:N.getFaceReverseColor(G,d),reverseCull:N.getFaceReverseCull(G,d),texture:N.getFaceImage(G,d),discardSelectable:N.getFaceDiscardSelectable(G,d)};if("csg"!==d){i.uv=N.getFaceUv(G,d)||f&&f[d+"Uv"],i.uvScale=N.getFaceUvScale(G,d)||f&&f[d+"UvScale"],i.uvOffset=N.getFaceUvOffset(G,d)||f&&f[d+"UvOffset"];var b=N.getFaceMat(G,d);b&&(i.mat=$k(G,b))}return i},bc=function(Q,e,s,q,w){if(q){if(!w(q.transparent))return;var l=Q.data,A=Q.gv,I=A._buffer,X=A.getTexture(q.texture,l);Tf(e,s,X,q.discardSelectable,I.uv,q.tuv,q.uvOffset,q.uvScale),Op(e,s,q.blend,q.light,q.opacity,q.reverseFlip,q.reverseColor,q.reverseCull),gn(e,s.uDiffuse,q.color),Bb(e,I.vs,q.vs,s.aPosition),Bb(e,I.ns,q.ns,s.aNormal),Ye(e,0,q.vs.length/3),Pr(e,s),um(e,s,X)}},fc=function(C,q,T,F,b,D){var Q,O,V,x,k,c,z,a,l,m,j,B=[F-q,b-T],H=C?C.length:0;for(V=0;H>V;V++){for(x=2,Q=C[V],k=Q[0],c=Q[1];x+1<Q.length;){if(z=Q[x],a=Q[x+1],O=Xj(q,T,F,b,k,c,z,a,!0)){l=[z-k,a-c],m=Ym(l),l[0]/=m,l[1]/=m,m=jb(B,l),m=m>0?D:-D,j=[l[0]*m,l[1]*m];break}k=z,c=a,x+=2}if(j)break}if(j)for(F=q+j[0],b=T+j[1],V=0;H>V;V++)for(x=2,Q=C[V],k=Q[0],c=Q[1];x+1<Q.length;){if(z=Q[x],a=Q[x+1],O=Xj(q,T,F,b,k,c,z,a,!0))return[0,0];k=z,c=a,x+=2}return j?j:[F-q,b-T]},Sc=X.graph3d={},Zn=function(n,k,X){de(Z+".graph3d."+n,k,X)},Yg="~<yfusfw!+!yjsubNQv!>!opjujtpQ`mh!gjeof$!~<fdobutjEfojMb!>!fdobutjEfojMw|*itbEv)gj!ITBE!gfegj$!!gjeof$!~<ttfouihjsCidubCb!>!ttfouihjsCidubCw|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!~<eofmCidubCb!>!eofmCidubCw|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!!gjeof$!~<spmpDidubCb!>!spmpDidubCw|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!~<x{/fmbdTuftggPv!+!wVb!,!zy/fmbdTuftggPv!>!wVw|*fsvuyfUv)gj~!gjeof$!~~<*^j]opjujtpQupqTw!.!sfuofd)f{jmbnspo!>!^j]opjudfsjEupqTw<**1/2!-^j]sfuofDupqTv)5dfw!+!yjsubNxfjWv)4dfw!>!sfuofd!4dfw<**1/2!-^j]opjujtpQupqTv)5dfw!+!yjsubNxfjWv)4dfw!>!^j]opjujtpQupqTw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg!1!?!UPQT`YBN!gj$!!gjeof$!~~<**1/2!-^j]opjujtpQuojpQv)5dfw!+!yjsubNxfjWv)4dfw!>!^j]opjujtpQuojpQw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg!1!?!UOJPQ`YBN!gj$!!gjeof$!~~<*opjujtpQsje!.!sfuofd)f{jmbnspo!>!^j]opjudfsjEsjEw<**1/2!-1/1!-1/1!-1/1)5dfw!+!yjsubNxfjWv)4dfw!>!sfuofd!4dfw<**1/2!-^j]opjujtpQsjEv)5dfw!+!yjsubNxfjWv)4dfw!>!opjujtpQsje!4dfw|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg!1!?!SJE`YBN!gj$!<*yfusfw)4dfw!>!yfusfWw<**1/2!-mbnspOb)5dfw!+!yjsubNOv)4dfw!>!mbnspOw|*ldjQva!%%!yjGva)gj<*1/2!-opjujtpQb)5dfw!+!yjsubNWNv!>!yfusfw!5dfw|!*ejpw)ojbn!ejpw!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEfojMb!ubpmg!fuvcjsuub<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTw!4dfw!hojzsbw<^UPQT`YBN]opjujtpQupqTw!4dfw!hojzsbw<^UPQT`YBN]sfuofDupqTv!4dfw!nspgjov<^UPQT`YBN]opjujtpQupqTv!4dfw!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQw!4dfw!hojzsbw<^UOJPQ`YBN]opjujtpQuojpQv!4dfw!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEw!4dfw!hojzsbw<^SJE`YBN]opjujtpQsjEv!4dfw!nspgjov<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCb!4dfw!fuvcjsuub<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCb!ubpmg!fuvcjsuub<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCb!5dfw!fuvcjsuub<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<yjGv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjsubNxfjWv!5ubn!nspgjov<yjsubNOv!5ubn!nspgjov<yjsubNQv!5ubn!nspgjov<yjsubNWNv!5ubn!nspgjov<opjujtpQb!4dfw!fuvcjsuub<mbnspOb!4dfw!fuvcjsuub<wVw!3dfw!hojzsbw<wVb!3dfw!fuvcjsuub<fmbdTuftggPv!5dfw!nspgjov<fsvuyfUv!mppc!nspgjov!YJGFSQ^#CBRBEJxTT87hJFI,,bX1XrIwcn3UM{ZeZ,M6HEN6nLxe2Z72s2:3johr6foKrpqwxNKYkdbJ2CN[mBbf[wXU,T0oGuSEd190ohLZkEn8IuCe[OHoWeKz:Sf,VS7xdSLw23W1YJLU:jdv2{hiDbhDzNNEh9tp3xsuEp94Sl4c3wRzqwShMDRhCLRjCDEBOH5BBVRBCFRE4cJTHrTDH1BNgHJN",ii="~~<eJ!>!spmpDhbsG`mh!gjeof$!~<ttfouihjsCidubCw!>+!chs/eJ!!!|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!~<ttfouihjsCv!>+!chs/eJ!!!|*1/2!>a!ttfouihjsCv)gj~~<zujdbqPusbQv!>+!b/eJ!!!|*1/2!>a!zujdbqPusbQv)gj~!gjeof$!<*spudbGhpg!-*x/eJ!-chs/spmpDhpGv)5dfw!-eJ)yjn!>!eJ<*iuqfe!-sbGhpGv!-sbfOhpGv)qfutiuppnt!>!spudbGhpg!ubpmg<x/esppDhbsG`mh0{/esppDhbsG`mh!>!iuqfe!ubpmg!HPG!gfegj$!!gjeof$!~~~~<chs/^j]spmpDupqTv!+!udfggFupqt!+!fhobSm!+!*1/1!-*mbnspOm.!-O)upe)ybn!>,!chs/eJ<*1/1!-*^j]uofopqyFupqTv!-udfggFupqt)xpq)ybn!>!udfggFupqt|*^j]fmhoBupqTv!?!udfggFupqt)gj<*mbnspOm!-^j]opjudfsjEupqTw)upe!>!udfggFupqt!ubpmg<*spudfWm)f{jmbnspo!>!mbnspOm!4dfw|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSupqTv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSupqTv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQupqTw!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg!1!?!UPQT`YBN!gj$!!gjeof$!~~~<chs/^j]spmpDuojpQv!+!fhobSm!+!*1/1!-**spudfWm)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSuojpQv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSuojpQv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQuojpQw!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg!1!?!UOJPQ`YBN!gj$!!gjeof$!~~<chs/^j]spmpDsjEv!+!*1/1!-**^j]opjudfsjEsjEw)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg!1!?!SJE`YBN!gj$!~<chs/spmpDuihjmebfIv!+!nsfUusfcnbm!>+!chs/eJ~<*1/2!-fhobSuihjmebfIv0*yfusfWw)iuhofm)ojn!.!1/2!!>+!nsfUusfcnbm|*1/1!?!fhobSuihjmebfIv)gj<*1/1!-6/1!,!6/1!+!*M.!-O)upe)ybn!>!nsfUusfcnbm!ubpmg|*1/1!>>!x/spmpDuihjmebfIv)gj|*uihjMv)gj~!gjeof$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf~<eofmCidubCw!>+!chs/eJ|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!~<spmpd!>!eJ|ftmf~<spmpDwv!>!eJ|*fsvuyfUv)gj|!ftmf~<spmpDftsfwfSldjQyjGv!>!eJ|*qjmGftsfwfSva!%%!ldbCtj)gj~<fvsu!>!ldbCtj<O.!>!O|*1/1!=!*O!-F)upe)gj<ftmbg!>!ldbCtj!mppc<F.!>!M!4dfw<*yfusfWw.)f{jmbnspo!>!F!4dfw<*mbnspOw)f{jmbnspo!>!O!4dfw!gjeof$!<ftvggjEv!>!spmpd!ftmf$!~<ftvggjEv!>!spmpd|ftmf~<spmpDidubCw!>!spmpd|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!<spmpd!5dfw|!ftmf~!gjeof$!~~<ftvggjEv!>!eJ|ftmf~<esbdtje|*1/1!>>!x/ftvggjEv)gj|!*!fdobutjEitbEv!?!*!fdobutjEqbHitbEv!-fdobutjEfojMw!)epn!%%!itbEv)!gj!ITBE!gfegj$!!gjeof$!<spmpDftsfwfSldjQyjGv!>!eJ!ftmf$!~<spmpDftsfwfSldjQyjGv!>!eJ|ftmf~<spmpDidubCw!>!eJ|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*yjGv)gj<eJ!5dfw|ftmf~!gjeof$!<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh!ftmf$!~<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh|ftmf~<spmpDidubCw!>!spmpDhbsG`mh|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*ldjQv)gj~~~<1/2!>!b/spmpDwv|ftmf~<esbdtje|*5/1!=!b/spmpDwv)gj|ftmf~~<esbdtje|*1/1!>>!b/spmpDwv)gj|*uofsbqtobsUv)gj<*wVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv|**fmcbudfmfTesbdtjEv!%%!ldjQv)a!%%!fsvuyfUv)gj<spmpDwv!5dfw|!*ejpw)ojbn!ejpw!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEqbHitbEv!ubpmg!nspgjov<fdobutjEitbEv!ubpmg!nspgjov<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!<sbGhpGv!ubpmg!nspgjov<sbfOhpGv!ubpmg!nspgjov<spmpDhpGv!5dfw!nspgjov!HPG!gfegj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTw!4dfw!hojzsbw<^UPQT`YBN]opjujtpQupqTw!4dfw!hojzsbw<^UPQT`YBN]fhobSupqTv!ubpmg!nspgjov<^UPQT`YBN]fmhoBupqTv!ubpmg!nspgjov<^UPQT`YBN]uofopqyFupqTv!ubpmg!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQw!4dfw!hojzsbw<^UOJPQ`YBN]fhobSuojpQv!ubpmg!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEw!4dfw!hojzsbw<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<spmpDuihjmebfIv!5dfw!nspgjov<fhobSuihjmebfIv!ubpmg!nspgjov<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<ftvggjEv!5dfw!nspgjov<zujdbqPusbQv!ubpmg!nspgjov<ttfouihjsCv!ubpmg!nspgjov<uihjMv!mppc!nspgjov<spmpDeofmCv!5dfw!nspgjov<eofmCv!mppc!nspgjov<sfmqnbTv!E3sfmqnbt!nspgjov<wVw!3dfw!hojzsbw<fsvuyfUv!mppc!nspgjov<spmpDftsfwfSldjQyjGv!5dfw!nspgjov<qjmGftsfwfSv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjGv!mppc!nspgjov<fmcbudfmfTesbdtjEv!mppc!nspgjov<uofsbqtobsUv!mppc!nspgjov!YJGFSQ!gjeof$!!gjeof$!!<ubpmg!qnvjefn!opjtjdfsq!!ftmf$!!<ubpmg!qihji!opjtjdfsq!!IHJI`OPJTJDFSQ`UOFNHBSG`MH!gfegj$!!TF`MH!gfegj$!";$l(O,{setBatchInfo:function(o,q){Zr[o]=q},getBatchInfo:function(G){return Zr[G]}},!0);var nc=[1,1,1],Ac=[1,0,0,0,0,1,0,1,1,1,1,0],_r=[-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5],bd=[.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5],$h=[.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5],Od=[.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5],Lh=[.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5],bi=[-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5],kj=function(U,m){Kg(U,m),Fr(U,m,"_wireframeModelMap","_wireframeIndexMap"),Fr(U,m,"_polylineModelMap","_polylineIndexMap")},Kg=function(C,_){if(_){var y,p,D=_._id,B=C._33O,j=C._34O,r=j[D];if(r){p=r.batch,y=B[p];var T=r.begin,b=r.size,J=3*T,g=3*b,Q=4*T,X=4*b,d=y.vs,i=y.uv,N=y.cs,u=y.bs,A=y.rs,f=y.ds,v=r.index;if(y.invalidate=!0,delete j[D],f.splice(v,1),Ke(f))delete B[p];else{for(;v<f.length;v++)r=j[f[v]._id],r.index--,r.begin-=b;d.splice(J,g),y.ns.splice(J,g),y.ps.splice(Q,X),i&&i.splice(2*T,2*b),N&&N.splice(Q,X),u&&u.splice(J,g),A&&A.splice(T,b)}}}else C._34O={},C._33O={}},Fr=function(l,H,S,U){if(H){var i,b,v=H._id,c=l[S],o=l[U],k=o[v];if(k){b=k.batch,i=c[b];var M=k.begin,t=k.size,E=3*M,a=3*t,$=4*M,_=4*t,x=i.ds,D=k.index;if(i.invalidate=!0,delete o[v],x.splice(D,1),Ke(x))delete c[b];else{for(;D<x.length;D++)k=o[x[D]._id],k.index--,k.begin-=t;i.vs.splice(E,a),i.cs.splice($,_),i.ps.splice($,_),i.ls&&i.ls.splice(M,t)}}}else l[S]={},l[U]={}},xc=function(v,N,J,y){if(!y)return $;var V=N[y];if(!V){var F=Zr[y]||pc,m=F.image?[]:$;V=N[y]={vs:[],ns:[],uv:m,cs:m?$:F.color?$:[],bs:F.blend?[]:$,ps:[],rs:F.brightness?[]:$,ds:[]}}return V.invalidate=!0,v[J._id]={index:V.ds.length,begin:V.vs.length/3,batch:y},V.ds.push(J),V},uo=function(C,E){return E!=$&&1!==E?[C[0]*E,C[1]*E,C[2]*E,C[3]]:C},mk=function(S,w,O){var Y=S.getBrightness(w),R=ti(O.color||"white"),G=R[3]<1,V=Math.ceil(O.width)||1,D=(G?"T":"O")+V,Q=S._wireframeIndexMap,g=S._wireframeModelMap,c=g[D];c||(c=g[D]={vs:[],cs:[],ps:[],ds:[],T:G,W:V}),c.invalidate=!0;var d=c.vs,e=c.cs,I=c.ds,L=Q[w._id]={index:I.length,begin:d.length/3,batch:D};I.push(w),Gg(d,$k(w,O.mat),O.short?rj:mf);var j=L.size=d.length/3-L.begin;Bq(e,uo(R,Y),j)},Lb=function(k,Z,E,x,A,j,O,Q,K){var W=k.getBrightness(Z);W==$&&(W=1);var Y=uo(ti(x),W),L=Y[3]<1;j=Math.ceil(j)||1;var C=(L?"T":"O")+j;if(O){var F=O[0],N=(O[1]||F)+F;C+="-"+F+"-"+N,K&&(C+="-"+bq(K)+"-"+W,K=uo(ti(K),W))}var w=k._polylineIndexMap,e=k._polylineModelMap,I=e[C];I||(I=e[C]={vs:[],cs:[],ps:[],ds:[],ls:O?[]:$,T:L,W:j},O&&(I.D=F,I.G=N,I.A=K)),I.invalidate=!0;var r,G=I.vs,z=I.cs,h=I.ds,l=I.ls,n=w[Z._id]={index:h.length,begin:G.length/3,batch:C};h.push(Z),Jc(G,E);var p,t=n.size=G.length/3-n.begin,R=E.length,P=0,s=[];if(O||A)for(r=0;R>r;r+=6)p=Ym([E[r],E[r+1],E[r+2]],[E[r+3],E[r+4],E[r+5]]),s.push(p),P+=p;if(P&&A){var d,U=uo(ti(A),W),V=[U[0]-Y[0],U[1]-Y[1],U[2]-Y[2],U[3]-Y[3]],f=0;for(r=0;R>r;r+=6)d=f/P,Bq(z,[Y[0]+V[0]*d,Y[1]+V[1]*d,Y[2]+V[2]*d,Y[3]+V[3]*d],1),f+=s[r/6],d=f/P,Bq(z,[Y[0]+V[0]*d,Y[1]+V[1]*d,Y[2]+V[2]*d,Y[3]+V[3]*d],1)}else Bq(z,Y,t);if(O)for(f=Q||0,r=0;R>r;r+=6)l.push(f),f+=s[r/6],l.push(f)},zb=function(z,q,c){if(q)for(var d=4*q.begin,s=c[q.batch].ps,l=0;l<q.size;l++)s[d++]=z[0],s[d++]=z[1],s[d++]=z[2],s[d++]=z[3]},Ah=function(F,o){var p=o+["32"],E=F[o],B=F[p];E?B&&B.length===E.length?B.set(E):F[p]=new wq(E):delete F[p]},Qj=function(y,R,n,l,B,M,m,E,p){if(_f(n))n.forEach(function(F){Qj(y,R,F,l,B,M,m,E,p)});else if(yf(n))Qj(y,R,_j(l,n),l,B,M,m,E,p);else if(ys(n)){var O,d=uk(n.mat,R,y),L=uk(n.s3,R,y),A=uk(n.t3,R,y),P=uk(n.r3,R,y);if((L||P||A||d)&&(O=Sb(d,L,P,uk(n.rotationMode,R,y),A),M.push(O)),n.shape3d)Qj(y,R,n.shape3d,l,B,M,m,E,n);else{p=p||pc;var C=M[0],f=M.length,H=l("shape3d.color",n.color,p.color);if(B||(B=l("shape3d.blend",n.blend,p.blend)),f>1){C=Jr(C);for(var S=1;f>S;S++)jr(C,C,M[S])}n.vs&&l(Hm,n.visible,p.visible)&&sg(C,m,E,n.vs,n.uv,n.is,B,H),n.top_vs&&l(Oq,n.topVisible,p.topVisible)&&sg(C,m,E,n.top_vs,n.top_uv,n.top_is,B,l("shape3d.top.color",n.topColor,p.topColor)||H),n.bottom_vs&&l(ml,n.bottomVisible,p.bottomVisible)&&sg(C,m,E,n.bottom_vs,n.bottom_uv,n.bottom_is,B,l("shape3d.bottom.color",n.bottomColor,p.bottomColor)||H),n.from_vs&&l(Zg,n.fromVisible,p.fromVisible)&&sg(C,m,E,n.from_vs,n.from_uv,n.from_is,B,l("shape3d.from.color",n.fromColor,p.fromColor)||H),n.to_vs&&l(Ip,n.toVisible,p.toVisible)&&sg(C,m,E,n.to_vs,n.to_uv,n.to_is,B,l("shape3d.to.color",n.toColor,p.toColor)||H)}O&&M.pop()}},sg=function(J,q,H,U,t,E,D,I){var l,A=q.cs,$=q.uv,f=q.bs;if(E){l=E.length;for(var h=0;l>h;h++){var K=E[h];Gg(H,J,[U[3*K],U[3*K+1],U[3*K+2]]),$&&Jc($,[t[2*K],t[2*K+1]])}}else l=U.length/3,Gg(H,J,U),$&&Jc($,t);A&&Bq(A,I,l),f&&(D?Hc(f,D,l):Jc(f,nc,l))},pk=function(f,t,W,a){var I=[];a?Qj(f.gv,f.data,a,f.s,f.getBodyColor(),[t],W,I):(fo(f,Zd,t,W,I),fo(f,Aj,t,W,I),fo(f,G,t,W,I),fo(f,cn,t,W,I),fo(f,tn,t,W,I),fo(f,sb,t,W,I),fo(f,"csg",t,W,I)),I.length&&(Jc(W.vs,I),Jc(W.ns,Lf(I)))},fo=function(_,o,D,f,b){var W=_[o];if(W){var e=W.tuv;if(e){var j,l,N,k,U=W.uvScale,G=W.uvOffset;if(U)for(j=e.length,l=U[0],N=U[1],k=0;j>k;k+=2)e[k]*=l,e[k+1]*=N;if(G)for(j=e.length,l=G[0],N=G[1],k=0;j>k;k+=2)e[k]+=l,e[k+1]+=N}sg(D,f,b,W.vs,e,$,W.blend,W.color)}},If=function(B,K,b,M,g,J,Z,L){var p,i=b.cs,E=b.uv,k=b.bs;if(B.getFaceVisible(K,J)){var W=B.getFaceMat(K,J);if(W&&(g=$k(K,W)),Gg(Z,g,L),i&&Bq(i,B.getFaceColor(K,J),6),E){var P=B.getFaceUv(K,J)||M[J+"Uv"],R=B.getFaceUvScale(K,J)||M[J+"UvScale"],o=B.getFaceUvOffset(K,J)||M[J+"UvOffset"];P=P?[P[6],P[7],P[0],P[1],P[2],P[3],P[2],P[3],P[4],P[5],P[6],P[7]]:Ac;var c=P[0],s=P[1],I=P[2],t=P[3],S=P[4],D=P[5],$=P[6],e=P[7],d=P[8],u=P[9],G=P[10],H=P[11];if(R){var y=R[0],Y=R[1];c*=y,s*=Y,I*=y,t*=Y,S*=y,D*=Y,$*=y,e*=Y,d*=y,u*=Y,G*=y,H*=Y}if(o){var n=o[0],f=o[1];c+=n,s+=f,I+=n,t+=f,S+=n,D+=f,$+=n,e+=f,d+=n,u+=f,G+=n,H+=f}E.push(c,s,I,t,S,D,$,e,d,u,G,H)}k&&(p=B.getBodyColor(K)||B.getFaceBlend(K,J),p?Hc(k,p,6):Jc(k,nc,6))}},gm=function(x,H,A,W){var N=x.getGL(),M=x._prg,g=x._buffer;if(!mb(H)){gg(x),_h(N,M);for(var m in H){var B=H[m];if(!(W&&!B.T||!W&&B.T)){B.invalidate?(B.invalidate=!1,Ah(B,"vs"),Ah(B,"cs"),Ah(B,"ls"),Ah(B,"ps")):A&&Ah(B,"ps");var E=B.vs32,j=A?B.ps32:B.cs32;cc(N,M,B.W,$,g.vs,E);var f=B.D,J=!x._dashDisabled&&f;J&&(gn(N,M.uDash,!0),gn(N,M.uDashDistance,f),gn(N,M.uDashGapDistance,B.G),Ol(N,M.aLineDistance),Bb(N,g.lineDistance,B.ls32,M.aLineDistance,1),gn(N,M.uDiffuse,B.A||uj));var T=!x._batchColorDisabled;T&&(gn(N,M.uBatchColor,!0),Ol(N,M.aBatchColor),Bb(N,g.batchColor,j,M.aBatchColor,4)),Ye(N,0,E.length/3,N.LINES),T&&(gn(N,M.uBatchColor,!1),nj(N,M.aBatchColor)),J&&(gn(N,M.uDash,!1),nj(N,M.aLineDistance))}}qi(N,M)}},sd=function(G,n,z){var o,S,F,q,t,u,E,P,L,N,e,h=G.getGL(),H=G._prg,m=G._buffer,p=G._33O;if(!mb(p)){gg(G);for(o in p)if(S=Zr[o]||pc,!(z&&!S.transparent||!z&&S.transparent)&&(F=p[o],n||!S.transparentMask)){var V=z&&S.autoSort!==!1&&(G._33Q||F.invalidate);if(F.invalidate?(F.invalidate=!1,Ah(F,"vs"),Ah(F,"ns"),Ah(F,"cs"),Ah(F,"rs"),Ah(F,"ps"),Ah(F,"bs"),Ah(F,"uv")):n&&Ah(F,"ps"),t=F.vs32,u=n?F.ps32:F.cs32,L=F.uv32,E=F.bs32,P=F.rs32,e=t.length/3,V&&(F.is=ac(t,G.getEye())),e){q=S.light,N=G.getTexture(S.image),Op(h,H,$,S.light,S.opacity,S.reverseFlip,S.reverseColor,S.reverseCull),u?G._batchColorDisabled||(gn(h,H.uBatchColor,!0),Ol(h,H.aBatchColor),Bb(h,m.batchColor,u,H.aBatchColor,4)):gn(h,H.uDiffuse,S.color);var B=E&&!G._batchBlendDisabled;B&&(gn(h,H.uBatchBlend,!0),Ol(h,H.aBatchBlend),Bb(h,m.batchBlend,E,H.aBatchBlend));var U=P&&!G._batchBrightnessDisabled;U&&(gn(h,H.uBatchBrightness,!0),Ol(h,H.aBatchBrightness),Bb(h,m.batchBrightness,P,H.aBatchBrightness,1)),L&&Tf(h,H,N,S.discardSelectable,m.uv,L,S.uvOffset,S.uvScale),Bb(h,m.vs,t,H.aPosition),Bb(h,m.ns,F.ns32,H.aNormal),F.is?(An(h,m.is,F.is),ns(h,0,e)):Ye(h,0,e),L&&um(h,H,N),u&&!G._batchColorDisabled&&(gn(h,H.uBatchColor,!1),nj(h,H.aBatchColor)),B&&(gn(h,H.uBatchBlend,!1),nj(h,H.aBatchBlend)),U&&(gn(h,H.uBatchBrightness,!1),nj(h,H.aBatchBrightness)),Pr(h,H)}}}},ac=function(D,P){for(var r=D.length/3,a=new Array(r),o=r/3,y=new Array(o),x=0;o>x;x++)y[x]=x;y.sort(function(n,L){var Z=9*n,V=[(D[Z]+D[Z+3]+2*D[Z+6])/4,(D[Z+1]+D[Z+4]+2*D[Z+7])/4,(D[Z+2]+D[Z+5]+2*D[Z+8])/4];Z=9*L;var T=[(D[Z]+D[Z+3]+2*D[Z+6])/4,(D[Z+1]+D[Z+4]+2*D[Z+7])/4,(D[Z+2]+D[Z+5]+2*D[Z+8])/4],e=Ym(P,V)-Ym(P,T);return e>0?-1:0>e?1:0});for(var x=0;o>x;x++){var W=3*x,T=3*y[x];a[W]=T,a[W+1]=T+1,a[W+2]=T+2}return new Dh(a)},Wc=new wq([0,0,0,1,1,1,1,0]),Oi=new wq([0,0,1,0,0,1,0,0,1,0,0,1]),vm=new Dh([0,1,2,2,3,0]),kg=new wq([-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5]),vl=new Dh([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),oq=new wq([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),gr=new wq([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),ff=Lf(kg,vl),mf=(new wq([-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5]),new Dh([0,1,2,3,0,7,5,4,6,7,5,3,2,4,6,1]),[-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5]),rj=[-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4],Sk=function(r,V,U,c,W,t){t=t||16,r=r||16,V=V||0,U=U||r;var b,l,g,o,m,a,O,s,j=.5,H=[],y=[],e=i/r,K=L/t;for(b=0;t>b;b++)for(m=b+1,o=b*K,s=m*K,l=V;U>l;l++)a=l+1,g=l*e,O=a*e,H.push(j*d(o)*h(g),j*h(o),-j*d(o)*d(g),j*d(s)*h(O),j*h(s),-j*d(s)*d(O),j*d(o)*h(O),j*h(o),-j*d(o)*d(O),j*d(o)*h(g),j*h(o),-j*d(o)*d(g),j*d(s)*h(g),j*h(s),-j*d(s)*d(g),j*d(s)*h(O),j*h(s),-j*d(s)*d(O)),y.push(l/r,b/t,a/r,m/t,a/r,b/t,l/r,b/t,l/r,m/t,a/r,m/t);if(c)for(g=V*e,b=0;t>b;b++)m=b+1,o=b*K,s=m*K,H.push(0,0,0,j*d(s)*h(g),j*h(s),-j*d(s)*d(g),j*d(o)*h(g),j*h(o),-j*d(o)*d(g)),y.push(0,.5,V/r,m/t,V/r,b/t);if(W)for(g=U*e,b=0;t>b;b++)m=b+1,o=b*K,s=m*K,H.push(0,0,0,j*d(o)*h(g),j*h(o),-j*d(o)*d(g),j*d(s)*h(g),j*h(s),-j*d(s)*d(g)),y.push(1,.5,U/r,b/t,U/r,m/t);return{vs:H,uv:y}},sn=function(y,$,t){y=y||.17,$=$||12,t=t||18,0>y?y=0:y>.25&&(y=.25);var O,P,v,o,U,r,R,w=.5,I=[],s=[],X=[],n=i/t,H=i/$,z=w-y;for(P=0;$>=P;P++)for(o=-L+P*H,r=h(o),U=d(o),O=0;t>=O;O++)v=O*n,R=z+y*r,I.push(h(v)*R,U*y,-d(v)*R),s.push(O/t,1-P/$);for(P=0;$>P;P++){var M=P*(t+1),u=(P+1)*(t+1);for(O=0;t>O;O++)X.push(M+O,u+O+1,u+O,M+O,M+O+1,u+O+1)}return{vs:I,uv:s,is:X}},Xm=function(A,r,f,g,w,G,E){E=E||12,A=A||18,r=r||0,f=f||A,G=G||.17,0>G?G=0:G>.25&&(G=.25);var s,$,Z,m,K,b,z,I,J,c,T=.5,U=[],F=[],S=i/A,B=i/E,Q=T-G;for(Z=0;E>Z;Z++)for(m=Z+1,z=-L+Z*B,I=-L+m*B,s=r;f>s;s++)$=s+1,K=s*S,b=$*S,J=Q+G*h(z),c=Q+G*h(I),U.push(h(K)*J,d(z)*G,-d(K)*J,h(b)*J,d(z)*G,-d(b)*J,h(b)*c,d(I)*G,-d(b)*c,h(K)*J,d(z)*G,-d(K)*J,h(b)*c,d(I)*G,-d(b)*c,h(K)*c,d(I)*G,-d(K)*c),F.push(s/A,1-Z/E,$/A,1-Z/E,$/A,1-m/E,s/A,1-Z/E,$/A,1-m/E,s/A,1-m/E);
        if(g){var k=[],P=[];for(Z=0;E>Z;Z++)m=Z+1,z=-L+Z*B,I=-L+m*B,K=r*S,J=Q+G*h(z),c=Q+G*h(I),k.push(h(K)*J,d(z)*G,-d(K)*J,h(K)*c,d(I)*G,-d(K)*c,h(K)*Q,0,-d(K)*Q),P.push(.5+.5*h(z),.5-.5*d(z),.5+.5*h(I),.5-.5*d(I),.5,.5)}if(w){var p=[],O=[];for(Z=0;E>Z;Z++)m=Z+1,z=-L+Z*B,I=-L+m*B,K=f*S,J=Q+G*h(z),c=Q+G*h(I),p.push(h(K)*J,d(z)*G,-d(K)*J,h(K)*Q,0,-d(K)*Q,h(K)*c,d(I)*G,-d(K)*c),O.push(.5-.5*h(z),.5-.5*d(z),.5,.5,.5-.5*h(I),.5-.5*d(I))}return{vs:U,uv:F,from_vs:k,from_uv:P,to_vs:p,to_uv:O}},Oo=function(I,G){for(var P,Q,z,V=.5,B=16,M=[],a=[],f=[],X=i/B,o=0;B>=o;o++)P=o*X,Q=h(P)*V,z=d(P)*V,M.push(Q,-V,z,Q,V,z),a.push(1-o/B,1,1-o/B,0);for(o=0;B>o;o++)f.push(2*o,2*o+1,2*o+3,2*o,2*o+3,2*o+2);if(G){var N=[],j=[],x=[];for(N.push(0,-V,0),j.push(.5,.5),o=0;B>=o;o++)P=o*X,Q=h(P),z=d(P),N.push(Q*V,-V,-z*V),j.push(.5+.5*Q,.5+.5*z);for(o=0;B>o;o++)x.push(0,o+2,o+1)}if(I){var L=[],u=[],v=[];for(L.push(0,V,0),u.push(.5,.5),o=0;B>=o;o++)P=o*X,Q=h(P),z=d(P),L.push(Q*V,V,-z*V),u.push(.5+.5*Q,.5-.5*z);for(o=0;B>o;o++)v.push(0,o+1,o+2)}return{vs:M,uv:a,is:f,bottom_vs:N,bottom_uv:j,bottom_is:x,top_vs:L,top_uv:u,top_is:v}},Kk=function(t,V,D,f,P,a,w){t=t||12,V=V||0,D=D||t;for(var Z,J,q,m,X,R,g,Q,H=.5,y=[],E=[],W=i/t,K=V;D>K;K++)Z=K+1,J=K*W,q=Z*W,m=h(J)*H,X=d(J)*H,R=h(q)*H,g=d(q)*H,y.push(m,-H,-X,R,-H,-g,m,H,-X,R,-H,-g,R,H,-g,m,H,-X),E.push(K/t,1,Z/t,1,K/t,0,Z/t,1,Z/t,0,K/t,0);if(w){var n=[],v=[];for(K=V;D>K;K++)J=W*K,q=W*(K+1),m=h(J),X=d(J),R=h(q),g=d(q),n.push(m*H,-H,-X*H,0,-H,0,R*H,-H,-g*H),v.push(.5+.5*m,.5+.5*X,.5,.5,.5+.5*R,.5+.5*g)}if(a){var B=[],c=[];for(K=V;D>K;K++)J=W*K,q=W*(K+1),m=h(J),X=d(J),R=h(q),g=d(q),B.push(m*H,H,-X*H,R*H,H,-g*H,0,H,0),c.push(.5+.5*m,.5-.5*X,.5+.5*R,.5-.5*g,.5,.5)}return f&&(J=W*V,m=h(J)*H,X=d(J)*H,Q=V/t,y.push(0,H,0,0,-H,0,m,-H,-X,m,-H,-X,m,H,-X,0,H,0),E.push(0,0,0,1,Q,1,Q,1,Q,0,0,0)),P&&(J=W*D,m=h(J)*H,X=d(J)*H,Q=D/t,y.push(0,-H,0,0,H,0,m,H,-X,m,H,-X,m,-H,-X,0,-H,0),E.push(1,1,1,0,Q,0,Q,0,Q,1,1,1)),{vs:y,uv:E,bottom_vs:n,bottom_uv:v,top_vs:B,top_uv:c}},Yq=function(Q,E,c,L,I){E=E||18,c=c||0,L=L==$?i:L,I=I==$?.5:I;for(var Z,q,A,H,r,G,_=[0,.5,.75,.875,.9375],Y=[],B=[],S=[],p=L/E,z=0;z<_.length;z++){var X=0===z%2?0:.5;for(Z=0;E>=Z;Z++)q=(Z+X)*p+c,A=1-_[z],Y.push(h(q)*I*A,-I+2*_[z]*I,-d(q)*I*A),B.push((Z+X)/E,A)}for(z=0;z<_.length-1;z++){var w=z*(E+1),D=(z+1)*(E+1);for(Z=0;E>Z;Z++)S.push(w+Z,D+Z+1,D+Z,w+Z,w+Z+1,D+Z+1)}for(G=Y.length/3-(E+1),Z=0;E>Z;Z++)Y.push(0,I,0),B.push((Z+.5)/E,0);for(Z=0;E>Z;Z++)S.push(G+Z,G+Z+1,G+(E+1)+Z);if(Q){var g=[],y=[],t=[];for(g.push(0,-I,0),y.push(.5,.5),Z=0;E>=Z;Z++)q=Z*p+c,H=h(q),r=d(q),g.push(H*I,-I,-r*I),y.push(.5+.5*H,.5+.5*r);for(Z=0;E>Z;Z++)t.push(0,Z+2,Z+1)}return{vs:Y,uv:B,is:S,bottom_vs:g,bottom_uv:y,bottom_is:t}},re=function(z,G,c,H,p,t){z=z||16,G=G||0,c=c||z;for(var w=.5,o=[],Q=[],f=i/z,X=G;c>X;X++){var K=X+1,W=f*X,x=f*K;o.push(h(W)*w,-w,-d(W)*w,h(x)*w,-w,-d(x)*w,0,w,0),Q.push(X/z,1,K/z,1,(X+K)/2/z,0)}if(t){var J=[],P=[];for(X=G;c>X;X++){W=f*X,x=f*(X+1);var _=h(W),N=d(W),$=h(x),R=d(x);J.push(_*w,-w,-N*w,0,-w,0,$*w,-w,-R*w),P.push(.5+.5*_,.5+.5*N,.5,.5,.5+.5*$,.5+.5*R)}}return H&&(W=f*G,o.push(0,w,0,0,-w,0,h(W)*w,-w,-d(W)*w),Q.push(0,0,0,1,G/z,1)),p&&(W=f*c,o.push(0,-w,0,0,w,0,h(W)*w,-w,-d(W)*w),Q.push(1,1,1,0,c/z,1)),{vs:o,uv:Q,bottom_vs:J,bottom_uv:P}},Ld=function(F,G,M,l,z,f,n,B){for(var H=[],c=0;c<F.length-1;c+=2)H.push({x:F[c],y:F[c+1]});return ih(H,G,M,l,z,f,n,B,!1)},Ad={roundRect:function(x,L){return Ld([.5,.4,.5,.442,.471,.471,.442,.5,.4,.5,-.4,.5,-.442,.5,-.471,.471,-.5,.442,-.5,.4,-.5,-.4,-.5,-.442,-.471,-.471,-.442,-.5,-.4,-.5,.4,-.5,.442,-.5,.471,-.471,.5,-.442,.5,-.4,.5,.4],[1,3,3,2,3,3,2,3,3,2,3,3,2],x,L,3)},star:function(G,r){return Ld([.193,.079,.333,.5,0,.233,-.333,.5,-.194,.079,-.5,-.167,-.112,-.167,0,-.5,.111,-.167,.5,-.167],[1,2,2,2,2,2,2,2,2,2,5],G,r)},rect:function(P,p){return Ld([.5,-.5,.5,.5,-.5,.5,-.5,-.5],[1,2,2,2,5],P,p)},triangle:function(H,e){return Ld([0,-.5,.5,.5,-.5,.5],[1,2,2,5],H,e)},rightTriangle:function(Z,$){return Ld([.5,.5,-.5,.5,-.5,-.5],[1,2,2,5],Z,$)},parallelogram:function(V,y){return Ld([.5,-.5,.25,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],V,y)},trapezoid:function(L,F){return Ld([.25,-.5,.5,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],L,F)}},qb={sphere:1,cylinder:1,cone:1,torus:1},wi={torus:1,sphere:1},Lg=$l(Nf(Ad),{cylinder:1}),Ao=$l(Nf(Ad),{cylinder:1,cone:1}),Iq=function(n,P,N){var Z,K=uk(n.mat,N,P),u=uk(n.s3,N,P),h=uk(n.t3,N,P),l=uk(n.r3,N,P);return(u||l||h||K)&&(Z=Jr(P._6O),gg(P,Sb(K,u,l,uk(n.rotationMode,N,P),h))),Z},nk=function(Q,O,l,w,z,J,i){if(_f(l))l.forEach(function(N){nk(Q,O,N,w,z,J,i)});else if(yf(l))nk(Q,O,_j(w,l),w,z,J,i);else if(ys(l))if(l.shape3d){var U=Iq(l,Q,O);nk(Q,O,l.shape3d,w,z,J,l),U&&bk(Q,U)}else Gr(Q,O,l,w,z,J,i)},Gr=function(_,r,n,H,B,P,g){if(g=g||pc,!P||P(H("shape3d.transparent",n.transparent,g.transparent))){var T=Iq(n,_,r);af(n);var J=_._26I,z=_._prg,Z=_._buffer,V=H("shape3d.color",n.color,g.color);B||(B=H("shape3d.blend",n.blend,g.blend)),Op(J,z,B,H("shape3d.light",n.light,g.light),H("shape3d.opacity",n.opacity,g.opacity),H("shape3d.reverse.flip",n.reverseFlip,g.reverseFlip),H("shape3d.reverse.color",n.reverseColor,g.reverseColor),H("shape3d.reverse.cull",n.reverseCull,g.reverseCull)),n.vs&&H(Hm,n.visible,g.visible)&&Qd(J,z,Z,V,_.getTexture(H("shape3d.image",n.image,g.image),r),H("shape3d.discard.selectable",n.discardSelectable,g.discardSelectable),n.vs,n.uv,n.ns,n.is,H("shape3d.uv.offset",n.uvOffset,g.uvOffset),H("shape3d.uv.scale",n.uvScale,g.uvScale)),n.top_vs&&H(Oq,n.topVisible,g.topVisible)&&Qd(J,z,Z,H("shape3d.top.color",n.topColor,g.topColor)||V,_.getTexture(H("shape3d.top.image",n.topImage,g.topImage),r),H("shape3d.top.discard.selectable",n.topDiscardSelectable,g.topDiscardSelectable),n.top_vs,n.top_uv,n.top_ns,n.top_is,H("shape3d.top.uv.offset",n.topUvOffset,g.topUvOffset),H("shape3d.top.uv.scale",n.topUvScale,g.topUvScale)),n.bottom_vs&&H(ml,n.bottomVisible,g.bottomVisible)&&Qd(J,z,Z,H("shape3d.bottom.color",n.bottomColor,g.bottomColor)||V,_.getTexture(H("shape3d.bottom.image",n.bottomImage,g.bottomImage),r),H("shape3d.bottom.discard.selectable",n.bottomDiscardSelectable,g.bottomDiscardSelectable),n.bottom_vs,n.bottom_uv,n.bottom_ns,n.bottom_is,H("shape3d.bottom.uv.offset",n.bottomUvOffset,g.bottomUvOffset),H("shape3d.bottom.uv.scale",n.bottomUvScale,g.bottomUvScale)),n.from_vs&&H(Zg,n.fromVisible,g.fromVisible)&&Qd(J,z,Z,H("shape3d.from.color",n.fromColor,g.fromColor)||V,_.getTexture(H("shape3d.from.image",n.fromImage,g.fromImage),r),H("shape3d.from.discard.selectable",n.fromDiscardSelectable,g.fromDiscardSelectable),n.from_vs,n.from_uv,n.from_ns,n.from_is,H("shape3d.from.uv.offset",n.fromUvOffset,g.fromUvOffset),H("shape3d.from.uv.scale",n.fromUvScale,g.fromUvScale)),n.to_vs&&H(Ip,n.toVisible,g.toVisible)&&Qd(J,z,Z,H("shape3d.to.color",n.toColor,g.toColor)||V,_.getTexture(H("shape3d.to.image",n.toImage,g.toImage),r),H("shape3d.to.discard.selectable",n.toDiscardSelectable,g.toDiscardSelectable),n.to_vs,n.to_uv,n.to_ns,n.to_is,H("shape3d.to.uv.offset",n.toUvOffset,g.toUvOffset),H("shape3d.to.uv.scale",n.toUvScale,g.toUvScale)),Pr(J,z),T&&bk(_,T)}},Qd=function(D,V,Q,v,x,q,J,N,B,Y,K,b){J&&(gn(D,V.uDiffuse,v),N&&Tf(D,V,x,q,Q.uv,N,K,b),Bb(D,Q.vs,J,V.aPosition),Bb(D,Q.ns,B,V.aNormal),Y?(An(D,Q.is,Y),ns(D,0,Y.length)):Ye(D,0,J.length/3),N&&um(D,V,x))},_j=function(K,v){if(v||(v=K(gp)),!v)return $;if(ys(v))return v;var y=Kj[v];if(y)return y;var W=v;if(qb[v]){var w=K("shape3d.side"),X=K("shape3d.side.from"),E=K("shape3d.side.to"),P=K(Zg),U=K(Ip);3>w?(w=0,X=0,E=0,P=!1,U=!1):((X==$||0>X)&&(X=0),(E==$||E>w)&&(E=w),0===X&&E===w&&(P=!1,U=!1)),W+="-"+w+"-"+X+"-"+E+"-"+P+"-"+U}if(Lg[v]){var N=K(Oq);W+="-"+N}if(Ao[v]){var A=K(ml);W+="-"+A}if("torus"===v){var C=K("shape3d.torus.radius");0>C?C=0:C>.25&&(C=.25),W+="-"+C}if(wi[v]){var M=K(Xl);W+="-"+M}return y=Cs[W],y||("box"===v?y=O.createBoxModel():Ad[v]?y=Ad[v](N,A):"sphere"===v?y=O.createSphereModel(w,X,E,P,U,M):v===Jq?y=O.createCylinderModel(w,X,E,P,U,N,A):"cone"===v?y=O.createConeModel(w,X,E,P,U,A):"torus"===v&&(y=O.createTorusModel(w,X,E,P,U,C,M)),Cs[W]=y),y},af=function(){var b=["vs","ns","uv","top_vs","top_ns","top_uv","bottom_vs","bottom_ns","bottom_uv","from_vs","from_ns","from_uv","to_vs","to_ns","to_uv","er","al"],_=["is","top_is","bottom_is","from_is","to_is"];return R=zq(Yg.substr(Yg.indexOf("^#")+2)),lg(O[bl(Yi+b[15]+"n"+b[16])]())&&vf()?function(j){j&&!j._complete_&&(j._complete_=!0,j.vs&&Ke(j.ns)&&(j.ns=Lf(j.vs,j.is)),j.top_vs&&Ke(j.top_ns)&&(j.top_ns=Lf(j.top_vs,j.top_is)),j.bottom_vs&&Ke(j.bottom_ns)&&(j.bottom_ns=Lf(j.bottom_vs,j.bottom_is)),j.from_vs&&Ke(j.from_ns)&&(j.from_ns=Lf(j.from_vs,j.from_is)),j.to_vs&&Ke(j.to_ns)&&(j.to_ns=Lf(j.to_vs,j.to_is)),b.forEach(function(P){var H=j[P];_f(H)&&(j[P]=new wq(H))}),_.forEach(function(P){var x=j[P];_f(x)&&(j[P]=new Dh(x))}))}:void 0}(),Al=function(R,V){var c=R[V];_f(c)&&(R[V]=new wq(c))};$l(hn,{_25Q:function(D){D._16O=function(B,A,q,L,s,p,D,g,Q){var F=this.info;if(F){var o,J,H,r,N,E,$=Cm();if(am[A]?(o=F.p3,J=F.c1,H=F.c2):Fi[A]?(J=F.s1||F.c1,H=F.s2||F.c2):(J=F.t1||F.c1,H=F.t2||F.c2),o)E=mc(A,Rj,q,L,g,Q);else{var a=Hl(H,J),C=Ym(J,H);r=[0,-t(a[2],a[0]),k(a[1]/C)],N="zyx",o=[(J[0]+H[0])/2,(J[1]+H[1])/2,(J[2]+H[2])/2],E=mc(A,[C,0,0],q,L,g,Q)}return nb($,E,o,L,s,p,D,B,r,N)}return Yj},D._80o=function(h,Q,q){var H=this,I=H.shapeModel;if(I){var g=H.gv;gg(g),nk(g,H.data,I,H.s,H.getBodyColor(),q)}},D.createLineModel=function(o,Y,D,p,z){for(var w=this,M=w.s,a=Jp(o,Y,M(Xl)),N=[],y=0;y<a.length;y++){var m=a[y],V=m.length;if(V>1){var k=m[0];N.push(k.x,k.y,k.z);for(var _=1;V-1>_;_++)k=m[_],N.push(k.x,k.y,k.z),N.push(k.x,k.y,k.z);k=m[V-1],N.push(k.x,k.y,k.z)}}var s,F,O,i=M(p+".color"),x=M(z),Q=0;return x&&(F=M(z+".color"),s=M(z+".pattern"),Q=M(z+".offset"),O=i),Lb(w.gv,w.data,N,F||i,O?$:M(p+".gradient.color"),D,s||M(p+".pattern"),Q,O),a},D.createTubeModel=function(K,I,h,U){for(var q=this,m=q.s,n=m("shape3d.side")||eh,S=m("shape3d.start.angle"),C=m(Oq)?m("shape3d.top.cap"):$,R=m(ml)?m("shape3d.bottom.cap"):$,A="flat"===C,t="flat"===R,y=A&&(U?U.uv:m("shape3d.top.image")),x=t&&(U?U.uv:m("shape3d.bottom.image")),W=U?U.uv:m("shape3d.image"),Y={vs:[],uv:W?[]:$,top_vs:A?[]:$,top_uv:y?[]:$,bottom_vs:t?[]:$,bottom_uv:x?[]:$},s=Jp(K,I,m(Xl),h),N=0,u=s.length;u>N;N++)nn(Y,s[N],m(_l),h,n,S,C,R);if(U){var V=[];Qj(q.gv,q.data,Y,m,q.getBodyColor(),[],U,V),V.length&&(Jc(U.vs,V),Jc(U.ns,Lf(V)))}else q.shapeModel=Y;return s},D.getCache=function(){var F=this.info;if(F){var s=F.list;if(s){var T=F.cache;return T||(T=F.cache=bm(s)),T}}return $}}});var wh=function(I,d){for(var K,n=0,p=I.length,U=0,i=p-1;i>=U;)if(n=r(U+(i-U)/2),K=I[n].length-d,0>K)U=n+1;else{if(!(K>0)){i=n;break}i=n-1}n=i;var q=I[n],g=q.point;return n===p-1||q.length===d||(g=(new aj).subVectors(I[n+1].point,g).normalize().multiplyScalar(d-q.length).add(g)),{point:g,tangent:q.tangent}},bm=function(z){for(var $,V,J=[],P=0,l=0;l<z.length;l++){for(var i=z[l],B=0;B<i.length;B++){$=i[B],V&&(P+=V.distanceTo($));var K=new aj,M=i[B+1];M?K.subVectors(M,$):V?K.subVectors($,V):K.x=1,K.normalize(),J.push({point:$,length:P,tangent:K}),V=$}V=null}return J},Jp=function(f,e,R,Y){R=R||Sp;for(var q=[],n=0,V=f.size();V>n;n++){var t=f.get(n);q.push(new aj(t.x,t.e||0,t.y))}ie(e)&&(e=e._as);for(var K,b,l,B,r,Q=[],p=0,D=0,P=e?e.length:V;P>D;D++)if(r=e?e[D]:0===D?1:2,1===r)Q.push(l=[]),l.push(q[p++]);else if(2===r||5===r)if(B=2===r?q[p++]:l[0],Y){var y=e?e[D+1]:P>D+1?2:$;if(2===y||5===y){var j=l[l.length-1],w=2===y?q[p]:l[0],A=(new aj).subVectors(j,B),O=(new aj).subVectors(w,B),S=A.length(),c=O.length();if(Y>S/2&&Y>c/2)l.push(B);else for(A.multiplyScalar(a(Y,S/2)/S).add(B),O.multiplyScalar(a(Y,c/2)/c).add(B),K=new Xr(A,B,O).getPoints(R),b=0;R>=b;b++)l.push(K[b])}else l.push(B)}else l.push(B);else if(3===r)for(K=new Xr(l[l.length-1],q[p++],q[p++]).getPoints(R),b=1;R>=b;b++)l.push(K[b]);else if(4===r)for(K=new Qn(l[l.length-1],q[p++],q[p++],q[p++]).getPoints(R),b=1;R>=b;b++)l.push(K[b]);return Q},lf=function(C){for(var o,L,g=new aj,K=[],v=[],n=[],b=0,x=C.length;x>b;b++)o=C[b],L=C[b+1],L?g.subVectors(L,o):g.subVectors(o,C[b-1]),K.push(g.normalize().clone());var U,T,E,X,p=new aj,j=new aj,R=new Ll,V=1e-4,y=Number.MAX_VALUE,H=K[0],e=v[0]=new aj,l=n[0]=new aj;for(T=m(H.x),E=m(H.y),X=m(H.z),y>=T&&(y=T,p.set(1,0,0)),y>=E&&(y=E,p.set(0,1,0)),y>=X&&p.set(0,0,1),j.crossVectors(H,p).normalize(),e.crossVectors(H,j),l.crossVectors(H,e),b=1;x>b;b++)v[b]=v[b-1].clone(),n[b]=n[b-1].clone(),j.crossVectors(K[b-1],K[b]),j.length()>V&&(j.normalize(),U=Y(Ig(K[b-1].dot(K[b]),-1,1)),v[b].applyMatrix4(R.makeRotationAxis(j,U))),n[b].crossVectors(K[b],v[b]);return{B:n,T:K,N:v}},nn=function(){var Z=function(f){for(var z=1;z<arguments.length;z++){var E=arguments[z];f.push(E.x,E.y,E.z)}},u=function(X){for(var W=1;W<arguments.length;W++){var S=arguments[W].uv;X.push(S[0],S[1])}},L=function(c,i,B,Y,v){var _=-Y*h(v),z=Y*d(v);return new aj(c.x+_*B.x+z*i.x,c.y+_*B.y+z*i.y,c.z+_*B.z+z*i.z)},p=function(g,J,u,S,j,O,T){for(var q=[],Y=i/j,K=0;j>=K;K++){var e=L(g,J,u,S,K*Y+O);q.push(e),T!=$&&(e.uv=[T,K/j])}return q},y=function(g,P,t,F,u,f,N,o){var X=P?g.top_vs:g.bottom_vs;if(X)for(var W=P?g.top_uv:g.bottom_uv,x=i/N,m=0;N>m;m++){var C,$;P?(C=m*x+o,$=(m+1)*x+o):($=m*x+o,C=(m+1)*x+o),Z(X,L(t,F,u,f,C),L(t,F,u,f,$),t),W&&W.push(.5-.5*h(C),.5-.5*d(C),.5-.5*h($),.5-.5*d($),.5,.5)}};return function(D,X,v,E,B,T,n,G){var W=X.length;if(W>1){var t,S,I,F,Q,J,e,r=lf(X),L=r.T,H=r.N,R=r.B;"flat"===n&&y(D,!0,X[0],R[0],H[0],E,B,T),"flat"===G&&y(D,!1,X[W-1],R[W-1],H[W-1],E,B,T);var s,a,x=[],A=j(B/2),k="round"===n,M="round"===G,N=X[0],P=L[0],f=R[0],g=H[0],V=X[W-1],i=L[W-1],d=R[W-1],m=H[W-1];if(k){for(I=1;A>=I;I++)H.splice(0,0,g),R.splice(0,0,f),L.splice(0,0,P),a=-I/A*E,X.splice(0,0,P.clone().multiplyScalar(a).add(N)),x[A-I]=q(E*E-a*a);W+=A}if(M){for(I=1;A>=I;I++)H.push(m),R.push(d),L.push(i),a=I/A*E,X.push(i.clone().multiplyScalar(a).add(V)),x[X.length-1]=q(E*E-a*a);W+=A}if(D.uv){var c=0,h=0,Y=[];for(v&&(c=v),Q=X[0],Y[0]=0,I=1;W>I;I++)F=X[I],Y[I]=Q.distanceTo(F),Q=F,v||(c+=Y[I]);for(s=[],I=0;W>I;I++)h+=Y[I],s[I]=c?h/c:0}for(I=0;W>I;I++){if(F=X[I],J=R[I],e=H[I],t=p(F,J,e,x[I]===K?E:x[I],B,T,s?s[I]:$),S)for(var _=0;B>_;_++){var C=S[_],b=S[_+1]||S[0],w=t[_],z=t[_+1]||t[0];Z(D.vs,b,C,w,w,z,b),D.uv&&u(D.uv,b,C,w,w,z,b)}S=t}}}}();$l(O,{getLineLength:function(L){return L[L.length-1].length},getLineOffset:function(Q,n){return wh(Q,n)},getLineCacheInfo:function(j,d,G,m){return bm(Jp(j,d,G,m))}});var Rp=X.Light=function(){Cb(Rp,this),this.s(te,n[te]),this.s(gp,"sphere"),this.s3(20,20,20)};Lo("Light",kf,{_image:"light_icon",_icon:"light_icon",onStyleChanged:function(b,y,G){Rp.superClass.onStyleChanged.apply(this,arguments),b===te&&this.s("shape3d.color",G)}});var Zq=Sc.Graph3dView=function(g,y){var i=this;i._attributes=y||O.graph3dViewAttributes,i._25I={},i._view=eo(1);var U=i._canvas=El(i._view);U.addEventListener("webglcontextlost",function(Q){Q.preventDefault(),go(i),i._26I=$,i._1o.texture=$,i._35O=!0},!1),U.addEventListener("webglcontextrestored",function(){i._35O=!1,i.iv()},!1),i._34O={},i._33O={},i._wireframeIndexMap={},i._wireframeModelMap={},i._polylineIndexMap={},i._polylineIndexMap={},i._8O=[],i._7O=Cm(),i._6O=Cm(),i._1o=new er(i),i._30O=new vp(i),i._31O=new jd(i),i._32O=new ao(i),i._33Q=!0,i._eye=Nf(O.graph3dViewEye),i._center=Nf(O.graph3dViewCenter),i._up=Nf(O.graph3dViewUp),i._lightChanged=!1,i._59O=[],i._spots=[],i._dirs=[],i.dm(g?g:new hj),i.setInteractors([new em(i)])},Km={fogDisabled:1,dashDisabled:1,batchColorDisabled:1,batchBlendDisabled:1,batchBrightnessDisabled:1};Zn("Graph3dView",x,{ms_v:1,ms_tip:1,ms_gv:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_51o:1,ms_ac:["devicePixelRatio","boundaries","moveStep","rotateStep","sizeEditableFunc","rotationEditableFunc","editableFunc","rotatable","zoomable","pannable","walkable","resettable","mouseRoamable",xd,Pn,"firstPersonMode",eb,"movableFunc","gridVisible","gridSize","gridGap","gridColor","originAxisVisible","centerAxisVisible","axisXColor","axisYColor","axisZColor","editSizeColor","rectSelectable","rectSelectBackground","headlightRange","headlightColor","headlightIntensity","headlightDisabled","ortho","orthoWidth","fovy","near","far",lq,kl,"up","aspect","fogDisabled","fogColor","fogNear","fogFar","dashDisabled","batchColorDisabled","batchBlendDisabled","batchBrightnessDisabled"],_editable:!1,_devicePixelRatio:K,_boundaries:K,_moveStep:O.graph3dViewMoveStep,_rotateStep:O.graph3dViewRotateStep,_pannable:O.graph3dViewPannable,_rotatable:O.graph3dViewRotatable,_walkable:O.graph3dViewWalkable,_resettable:O.graph3dViewResettable,_zoomable:O.graph3dViewZoomable,_firstPersonMode:O.graph3dViewFirstPersonMode,_mouseRoamable:O.graph3dViewMouseRoamable,_gridVisible:O.graph3dViewGridVisible,_gridSize:O.graph3dViewGridSize,_gridGap:O.graph3dViewGridGap,_gridColor:O.graph3dViewGridColor,_originAxisVisible:O.graph3dViewOriginAxisVisible,_centerAxisVisible:O.graph3dViewCenterAxisVisible,_axisXColor:O.graph3dViewAxisXColor,_axisYColor:O.graph3dViewAxisYColor,_axisZColor:O.graph3dViewAxisZColor,_ortho:O.graph3dViewOrtho,_orthoWidth:O.graph3dViewOrthoWidth,_fovy:O.graph3dViewFovy,_near:O.graph3dViewNear,_far:O.graph3dViewFar,_headlightColor:O.graph3dViewHeadlightColor,_headlightIntensity:O.graph3dViewHeadlightIntensity,_headlightRange:O.graph3dViewHeadlightRange,_headlightDisabled:O.graph3dViewHeadlightDisabled,_rectSelectable:O.graph3dViewRectSelectable,_rectSelectBackground:O.graph3dViewRectSelectBackground,_editSizeColor:O.graph3dViewEditSizeColor,_autoMakeVisible:dj,_fogDisabled:O.graph3dViewFogDisabled,_fogColor:O.graph3dViewFogColor,_fogNear:O.graph3dViewFogNear,_fogFar:O.graph3dViewFogFar,_dashDisabled:O.graph3dViewDashDisabled,_batchColorDisabled:O.graph3dViewBatchColorDisabled,_batchBlendDisabled:O.graph3dViewBatchBlendDisabled,_batchBrightnessDisabled:O.graph3dViewBatchBrightnessDisabled,setEye:function(o,c,g){1===arguments.length&&(c=o[1],g=o[2],o=o[0]);var h=this._eye;h[0]=o,h[1]=c,h[2]=g,this.fp(lq,$,h)},setCenter:function(J,Z,L){1===arguments.length&&(Z=J[1],L=J[2],J=J[0]);var c=this._center;c[0]=J,c[1]=Z,c[2]=L,this.fp(kl,$,c)},setUp:function(j,N,a){1===arguments.length&&(N=j[1],a=j[2],j=j[0]);var P=this._up;P[0]=j,P[1]=N,P[2]=a,this.fp("up",$,P)},isTransparentMask:function(d){return d.s("transparent.mask")},getAspect:function(){var H=this,R=H._aspect;return R?R:H.getWidth()/H.getHeight()},getCanvas:function(){return this._canvas},setDataModel:function(F){var W=this,H=W._dataModel,i=W._3o;H!==F&&(H&&(H.umm(W.handleDataModelChange,W),H.umd(W.handleDataPropertyChange,W),i||H.sm().ums(W._16o,W)),W._dataModel=F,F.mm(W.handleDataModelChange,W),F.md(W.handleDataPropertyChange,W),i?i._21I(F):F.sm().ms(W._16o,W),W.invalidateAll(!0),W.invalidateLight(),W.fp(ro,H,F))},handleDataPropertyChange:function(K){var z=K.data;this.invalidateData(z),Hn(z)&&"s:light.type"===K.property&&this.invalidateLight()},invalidateLight:function(){this._lightChanged||(this._lightChanged=!0,this.iv())},onPropertyChanged:function(L){var e=this,o=L.property;e.iv(),e._18Q=$,"eye"===o?e._33Q=!0:"devicePixelRatio"===o?e._42($,e._devicePixelRatio||zd):Km[o]&&go(e)},_5O:function(Q){var n=Q._22Q();return n?new n(this,Q):$},getData3dUI:function(a){var B=this._25I[a._id];return B===K&&(B=this._5O(a),this._25I[a._id]=B),B},invalidateAll:function(M){var z=this;if(M){for(var j in z._25I){var i=z._25I[j];i&&i.dispose()}z._25I={},z.iv(),kj(z)}else z.dm().each(function(J){z.invalidateData(J)})},invalidateSelection:function(){var t=this;t.sm().each(function(b){t.invalidateData(b)})},invalidateData:function(r){var G=this,u=G.getData3dUI(r);u&&(u.iv(),G.iv()),kj(G,r)},invalidateBatch:function(v){var u=this,A=u._33O,R=A[v];R&&(R.ds.forEach(function(l){var P=u.getData3dUI(l);P&&P.iv(),delete u._34O[l._id]}),delete A[v],u.iv())},handleDataModelChange:function(L){var e=this,O=L.kind,w=L.data;if("add"===O)e.invalidateData(w),hq(w)&&w.getEdgeGroup()&&w.getEdgeGroup().eachSiblingEdge(e.invalidateData,e),Hn(w)&&e.invalidateLight();else if(O===tm){var j=w._id,F=e._25I[j];F&&(F.dispose(),delete e._25I[j],e.iv()),w===e._currentSubGraph&&e.setCurrentSubGraph($),kj(e,w),Hn(w)&&e.invalidateLight()}else O===Hh&&(e.invalidateAll(!0),e.setCurrentSubGraph($),kj(e),e.invalidateLight())},toCanvas:function(M){var E=this,w=E.getGL();if(E.validate(),M){var z=w.getParameter(w.COLOR_CLEAR_VALUE);vg(w,M)}E._42($,1);var e=E.getWidth(),O=E.getHeight(),p=new Uint8Array(4*e*O),S=El(),I=S.getContext("2d");w.readPixels(0,0,e,O,w.RGBA,w.UNSIGNED_BYTE,p),Kp(S,e,O,1);for(var g=I.getImageData(0,0,e,O),Y=g.data,o=0;o<Y.length;o+=4){var t=o/4,T=r(t/e),L=t-T*e;t=4*((O-1-T)*e+L),Y[t]=p[o],Y[t+1]=p[o+1],Y[t+2]=p[o+2],Y[t+3]=p[o+3]}return I.putImageData(g,0,0),M&&vg(w,z),E._42($,E._devicePixelRatio||zd),S},toDataURL:function(Q,V){var T=this,u=T.getGL();if(T.validate(),Q){var f=u.getParameter(u.COLOR_CLEAR_VALUE);vg(u,Q)}T._42($,1);var n=T._canvas.toDataURL(V||"image/png",1);return Q&&vg(u,f),T._42($,T._devicePixelRatio||zd),n},getGL:function(){var D=this,Z=D._26I,z=D._prg;if(!Z)try{D._2O={},Z=D._26I=D._canvas.getContext("webgl",D._attributes)||D._canvas.getContext("experimental-webgl",D._attributes),D._buffer={vs:kp(Z),ns:kp(Z),is:kp(Z),uv:kp(Z),batchColor:kp(Z),batchBlend:kp(Z),batchBrightness:kp(Z),lineDistance:kp(Z)},D._1O=Pb(Z);var T=D._cube={vs:kp(Z),ns:kp(Z),is:kp(Z),uv:kp(Z)};Bb(Z,T.vs,kg),Bb(Z,T.ns,ff),Bb(Z,T.uv,oq),An(Z,T.is,vl)}catch(N){}if(Z&&!z){if(z=D._prg=Z.createProgram(),!z)return $;var I=D._dirs.length,S=D._spots.length,f=D._59O.length,b=["uPMatrix","uMVMatrix","uNMatrix","uViewMatrix","aNormal","aUv","uOffsetScale","uDiffuse","uBlend","uBlendColor","uBrightness","uPartOpacity","uTransparent","uTexture","uSampler","uDiscardSelectable","uFix","uPick","uReverseFlip","uFixPickReverseColor","uBatchBrightness","aBatchBrightness","uBatchColor","aBatchColor","uBatchBlend","aBatchBlend","uDash","aLineDistance","uDashDistance","uDashGapDistance","uLight","uHeadlightRange","uHeadlightColor","uFogColor","uFogNear","uFogFar"];I&&b.push("uDirColor","uDirPosition"),S&&b.push("uSpotColor","uSpotRange","uSpotAngle","uSpotExponent","uSpotPosition","uSpotCenter"),f&&b.push("uPointColor","uPointRange","uPointPosition"),vg(Z,[0,0,0,0]),Z.clearDepth(1),Z.enable(Z.DEPTH_TEST),Z.depthFunc(Z.LEQUAL),Z.enable(Z.BLEND),Z.blendFunc(Z.SRC_ALPHA,Z.ONE_MINUS_SRC_ALPHA),Yp||(Yg=zq(Yg.substring(0,Yg.indexOf("^#"))),ii=zq(ii),Yp=!0);var M=["#define MAX_DIR "+I,"#define MAX_SPOT "+S,"#define MAX_POINT "+f,D._fogDisabled?"":"#define FOG",D._dashDisabled?"":"#define DASH",D._batchColorDisabled?"":"#define BATCHCOLOR",D._batchBlendDisabled?"":"#define BATCHBLEND",D._batchBrightnessDisabled?"":"#define BATCHBRIGHTNESS",""].join("\n"),H=sh(Z,z,Z.VERTEX_SHADER,Yg.replace("PREFIX",M)),L=sh(Z,z,Z.FRAGMENT_SHADER,ii.replace("PREFIX",M));A?b.push("aPosition"):(z.aPosition=0,Z.bindAttribLocation(z,0,"aPosition")),Z.linkProgram(z),b.forEach(function(w){z[w]=/^u/.test(w)?Z.getUniformLocation(z,w):Z.getAttribLocation(z,w)}),Z.useProgram(z),Z.deleteShader(H),Z.deleteShader(L)}return Z},getBrightness:function(o){var j=o.s("brightness"),T=this.isSelected(o)?o.s("select.brightness"):$;return j==$?T:T==$?j:j*T},getWireframe:function(P){var W=P.s("wf.visible");return W===!0||"selected"===W&&this.isSelected(P)?{color:P.s("wf.color"),width:P.s("wf.width"),"short":P.s("wf.short"),mat:P.s("wf.mat")}:void 0},getBodyColor:function(c){return c.s("body.color")},getMat:function(t){return t.getMat?t.getMat():t.s("mat")},getFaceMat:function(I,H){return I.getFaceMat?I.getFaceMat(H):I.s(H+".mat")},getFaceBlend:function(O,V){return O.s(V+".blend")||O.s("all.blend")},getFaceColor:function(D,C){return D.s(C+".color")||D.s("all.color")},getFaceImage:function(c,z){return c.s(z+".image")||c.s("all.image")},getFaceDiscardSelectable:function(f,n){var s=f.s(n+".discard.selectable");return s==$?f.s("all.discard.selectable"):s},getFaceUv:function(P,E){return P.s(E+".uv")||P.s("all.uv")},getFaceUvOffset:function(U,o){return U.s(o+".uv.offset")||U.s("all.uv.offset")},getFaceUvScale:function(V,m){return V.s(m+".uv.scale")||V.s("all.uv.scale")},getFaceLight:function(Q,A){var X=Q.s(A+".light");return X==$?Q.s("all.light"):X},getFaceVisible:function(G,k){var N=G.s(k+".visible");return N==$?G.s("all.visible"):N},getFaceOpacity:function(s,l){var b=s.s(l+".opacity");return b==$?s.s("all.opacity"):b},getFaceTransparent:function(W,e){var F=W.s(e+".transparent");return F==$?W.s("all.transparent"):F},getFaceReverseColor:function(U,D){return U.s(D+".reverse.color")||U.s("all.reverse.color")},getFaceReverseFlip:function(B,A){var h=B.s(A+".reverse.flip");return h==$?B.s("all.reverse.flip"):h},getFaceReverseCull:function(T,R){var l=T.s(R+".reverse.cull");return l==$?T.s("all.reverse.cull"):l},getTextureMap:function(){return this._2O},deleteTexture:function(l){var p=this,y=p._2O[l];y&&(delete p._2O[l],p.getGL().deleteTexture(y))},getTexture:function(U,e){if(!U)return $;var X=this,E=X.getGL(),P=X._2O[U];if(!P){var _=Tn(U);if(_)if(_.tagName){if(_.dynamic)return Pb(E,_,X._1O);P=X._2O[U]=Pb(E,_)}else{var N=ud(_,e),Y=Pq(_,e);if(N>=1&&Y>=1){var v=sl(N,Y);return fb(v,_,0,0,N,Y,e,X),v.restore(),Pb(E,sf,X._1O)}}}return P},redraw:function(){this.iv()},validateImpl:function(){var a=this;if(a._lightChanged){a._lightChanged=!1;var f=[],T=[],v=[];a.dm().each(function(i){if(Hn(i)){var m=i.s("light.type");m===Ei?f.push(i):m===Vf?T.push(i):m===xg&&v.push(i)}}),(f.length!==a._59O.length||T.length!==a._spots.length||v.length!==a._dirs.length)&&go(a),a._59O=f,a._spots=T,a._dirs=v}a._42(),a._1o.iv()},_42:function(J,e){var C=this;if(!C._35O&&(!uq||Kq(uq))){var g,P;J&&(J instanceof kf?P=J:g=J);var u=C._canvas,z=C.getWidth(),M=C.getHeight(),H=C.getGL(),i=C._prg;if(H){if(e?J||Kp(u,z,M,e):(e=C._devicePixelRatio||zd,J||z===u.clientWidth&&M===u.clientHeight||Kp(u,z,M,e)),H.viewport(0,0,z*e,M*e),C._81O=$,H.clear(H.COLOR_BUFFER_BIT|H.DEPTH_BUFFER_BIT),gn(H,i.uBrightness,1),gn(H,i.uOpacity,1),gn(H,i.uPartOpacity,1),H._picking=!!J,gn(H,i.uPick,!!J),gn(H,i.uTexture,!1),gn(H,i.uFix,!1),gn(H,i.uTransparent,!1),gn(H,i.uBatchColor,!1),gn(H,i.uBatchBlend,!1),gn(H,i.uBatchBrightness,!1),J||(Fb(C,H,i),C._fogDisabled||(gn(H,i.uFogColor,C._fogColor),gn(H,i.uFogNear,C._fogNear),gn(H,i.uFogFar,C._fogFar))),Ol(H,i.aPosition),Ol(H,i.aNormal),nj(H,i.aUv),nj(H,i.aBatchColor),nj(H,i.aBatchBlend),nj(H,i.aBatchBrightness),nj(H,i.aLineDistance),gn(H,i.uPMatrix,Nc(C)),gn(H,i.uViewMatrix,on(C,C._7O)),P){var Z=H.getParameter(H.COLOR_CLEAR_VALUE);H.clearColor(0,0,0,0),H.disable(H.BLEND),nj(H,i.aNormal),Bb(H,C._cube.vs,$,i.aPosition),An(H,C._cube.is),Pk(P,C,Zd,0),Pk(P,C,G,6),Pk(P,C,Aj,12),Pk(P,C,cn,18),Pk(P,C,tn,24),Pk(P,C,sb,30),Ol(H,i.aNormal),vg(H,Z)}else if(g){g.value=2;var Z=H.getParameter(H.COLOR_CLEAR_VALUE);H.clearColor(0,0,0,0),H.disable(H.BLEND),C._95I(H,i,g),sd(C,g),gm(C,C._polylineModelMap,g),gm(C,C._wireframeModelMap,g),gn(H,i.uTransparent,!0),C._95I(H,i,g,!0),sd(C,g,!0),gm(C,C._polylineModelMap,g,!0),gm(C,C._wireframeModelMap,g,!0),gn(H,i.uTransparent,!1),H.disable(H.DEPTH_TEST),C._30O._42(H,i,g),H.enable(H.DEPTH_TEST),vg(H,Z)}else H.disable(H.BLEND),C._31O._42(H,i),C._95I(H,i),sd(C),gm(C,C._polylineModelMap),gm(C,C._wireframeModelMap),H.enable(H.BLEND),H.depthMask(!1),gn(H,i.uTransparent,!0),C._95I(H,i,$,!0),sd(C,$,!0),gm(C,C._polylineModelMap,$,!0),gm(C,C._wireframeModelMap,$,!0),gn(H,i.uTransparent,!1),H.depthMask(!0),H.disable(H.BLEND),H.disable(H.DEPTH_TEST),C._32O._42(H,i),C._30O._42(H,i),H.enable(H.DEPTH_TEST);Bb(H,$),An(H,$),C._33Q=!1}}},_95I:function(P,M,R,S){var p=this,n=function(g){return S?g:!g};p.dm().each(function(B){if(p.isVisible(B)&&(!H||s)){if(!R&&p.isTransparentMask(B))return;var w=p.getData3dUI(B);w&&w._42(P,M,R,n)}})},getLogicalPoint:function($){return tl($,this._canvas)},getHitFaceInfo:function(N){N.target&&(N=this.lp(N));var M=this.getDataInfoAt(N);if(M){var K=this._1o.face(M.data,tq(N.x,N.y));if(K)return{data:M.data,face:K}}return $},getDataAt:function(f){var G=this.getDataInfoAt(f);return G?G.data:$},getDataInfoAt:function(s,x){return s.target&&(s=this.lp(s)),this._1o.get(tq(s.x,s.y,x),!0)},getDatasInRect:function($){return this._1o.get($)},setEditable:function(v){var r=this,l=r._editable;r._editable=v,this.fp(Go,l,v)},isEditable:function(Q){var n=this;return n._editable?ag(Q)?Q.s("3d.editable")?n._editableFunc?n._editableFunc(Q):!0:!1:!1:!1},isSelectable:function(M){return M.s("3d.selectable")&&this.sm().isSelectable(M)},isMovable:function(L){var T=this;return hq(L)&&L.getStyle(ad)!==Uc?!1:L.s("3d.movable")?T._movableFunc?T._movableFunc(L):!0:!1},isSizeEditable:function(J){return ag(J)?this._sizeEditableFunc?this._sizeEditableFunc(J):!0:!1},isRotationEditable:function(r){return ag(r)&&r.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc(r):!0:!1},handleDelete:function(){this._editable&&this.removeSelection()},zoomIn:function(T){this.setZoom(rh,T)},zoomOut:function(e){this.setZoom(1/rh,e)},setZoom:function(q,V){if(1!==q){var O=this;if(O._ortho)return O.setOrthoZoom(q,V),void 0;O._14o&&O._14o.stop(!0);var C=1/q,f=O._eye,k=O._center,M=k[0]+(f[0]-k[0])*C-f[0],y=k[1]+(f[1]-k[1])*C-f[1],p=k[2]+(f[2]-k[2])*C-f[2];if(!(Ym(f,k)<O._moveStep&&1>C)){if(V=mh(V)){var G=Nf(f);return V.action=function(X){O.fi({kind:O._zooming?"betweenZoom":"beginZoom"}),O._zooming=1,f[0]=G[0]+M*X,f[1]=G[1]+y*X,f[2]=G[2]+p*X,O.fp(lq,$,f)},V._37o=function(){delete O._14o,delete O._zooming,O.fi({kind:"endZoom"}),O.onZoomEnded()},O._14o=ae(V)}f[0]+=M,f[1]+=y,f[2]+=p,O.fp(lq,$,f)}}},setOrthoZoom:function(e,v){if(1!==e){var b=this;b._14o&&b._14o.stop(!0);var J=b._orthoWidth,l=J/e-J;if(!(J<b._moveStep&&e>1))return(v=mh(v))?(v.action=function(_){b.fi({kind:b._zooming?"betweenZoom":"beginZoom"}),b._zooming=1,b.setOrthoWidth(J+l*_)},v._37o=function(){delete b._14o,delete b._zooming,b.fi({kind:"endZoom"}),b.onZoomEnded()},b._14o=ae(v)):(b.setOrthoWidth(J/e),void 0)}},getPositionInfo:function(V){var n=this,E=n._eye,Z=n._center,F=n.getAspect(),c=V?jb(Hl(Z,E,!0),Hl(V,E)):Ym(E,Z);if(n._ortho){var r=n._orthoWidth;return{length:c,height:r/F,width:r}}var M=2*e(n._fovy/2)*c;return{length:c,height:M,width:M*F}},getCenterInfo:function(){var k=this;return k._81O||(k._81O=k.getPositionInfo()),Nf(k._81O)},rotate:function(l,B,F,O){var U=this;if(l||B){O==$&&(O=U._firstPersonMode),U._88O&&U._88O.stop(!0);var X=U._center,V=U._eye,K=U.getCenterInfo().length,T=O?X:V,P=O?V:X,Y=Hl(T,P),Q=t(Y[0],Y[2]),z=t(q(Y[0]*Y[0]+Y[2]*Y[2]),Y[1]),u=O?kl:lq;return O&&(B=-B),(F=mh(F))?(F.action=function(n){U.fi({kind:U._rotating?"betweenRotate":"beginRotate"}),U._rotating=1;var E=Q+l*n,I=z+B*n;I=kr(I),Y[0]=K*d(I)*d(E),Y[1]=K*h(I),Y[2]=K*d(I)*h(E),T[0]=P[0]+Y[0],T[1]=P[1]+Y[1],T[2]=P[2]+Y[2],U.fp(u,$,T)},F._37o=function(){delete U._88O,delete U._rotating,U.fi({kind:"endRotate"}),U.onRotateEnded()},U._88O=ae(F)):(Q+=l,z+=B,z=kr(z),Y[0]=K*d(z)*d(Q),Y[1]=K*h(z),Y[2]=K*d(z)*h(Q),T[0]=P[0]+Y[0],T[1]=P[1]+Y[1],T[2]=P[2]+Y[2],U.fp(u,$,T),void 0)}},pan:function(l,W,F,c){if(l||W){var O=this;c==$&&(c=O._firstPersonMode),O._89O&&O._89O.stop(!0);var b=on(O),B=[b[0]*l,b[4]*l,b[8]*l],Y=[b[1]*W,b[5]*W,b[9]*W],o=B[0]+Y[0],t=B[1]+Y[1],m=B[2]+Y[2],w=O._center,Q=O._eye;if(c){var P=fc(O.getBoundaries(),Q[0],Q[2],Q[0]+o,Q[2]+m,q(o*o+m*m));o=P[0],m=P[1]}if(F=mh(F)){var U=Nf(Q),L=Nf(w);return F.action=function(J){O.fi({kind:O._panning?"betweenPan":"beginPan"}),O._panning=1,w[0]=L[0]+o*J,w[1]=L[1]+t*J,w[2]=L[2]+m*J,Q[0]=U[0]+o*J,Q[1]=U[1]+t*J,Q[2]=U[2]+m*J,O.fp(lq,$,Q),O.fp(kl,$,w)},F._37o=function(){delete O._89O,delete O._panning,O.fi({kind:"endPan"}),O.onPanEnded()},O._89O=ae(F)}w[0]+=o,w[1]+=t,w[2]+=m,Q[0]+=o,Q[1]+=t,Q[2]+=m,O.fp(lq,$,Q),O.fp(kl,$,w)}},walk:function(W,b,o){if(W){var _=this;o==$&&(o=_._firstPersonMode),_._90O&&_._90O.stop(!0);var E=_._center,A=_._eye,n=Hl(E,A,!0);if(o){var v=fc(_.getBoundaries(),A[0],A[2],A[0]+n[0]*W,A[2]+n[2]*W,m(W));if(W=Ym(v),!W)return;n=[v[0]/W,0,v[1]/W]}if(b=mh(b)){var x=Nf(A),U=Nf(E);return b.action=function(L){_.fi({kind:_._walking?"betweenWalk":"beginWalk"}),_._walking=1;var h=W*L;A[0]=x[0]+n[0]*h,A[1]=x[1]+n[1]*h,A[2]=x[2]+n[2]*h,E[0]=U[0]+n[0]*h,E[1]=U[1]+n[1]*h,E[2]=U[2]+n[2]*h,_.fp(lq,$,A),_.fp(kl,$,E)
    },b._37o=function(){delete _._90O,delete _._walking,_.fi({kind:"endWalk"}),_.onWalkEnded()},_._90O=ae(b)}A[0]+=n[0]*W,A[1]+=n[1]*W,A[2]+=n[2]*W,E[0]+=n[0]*W,E[1]+=n[1]*W,E[2]+=n[2]*W,_.fp(lq,$,A),_.fp(kl,$,E)}},handleScroll:function(G,Y){G.preventDefault();var m=this,v=m._moveStep;m.isFirstPersonMode()?m.isPannable()&&m.pan(0,Y>0?v:-v):m.isZoomable()&&m.setZoom(0>Y?1/Ic:Ic)},handlePinch:function(w,i){this.isZoomable()&&this.setZoom(i>w?1/me:me)},reset:function(){this.setCenter(O.graph3dViewCenter),this.setEye(O.graph3dViewEye),this.setUp(O.graph3dViewUp)},moveSelection:function(S,r,g){var s,V=this,w=V.dm();w&&(s=w.getHistoryManager()),s&&s.beginInteraction(),tj(this.sm().toSelection(this.isMovable,this),S,r,g),s&&s.endInteraction()},getMoveMode:function(P,Z){var t=Z.s("3d.move.mode");if(t)return t;var L="88",Q="89",X="90";return Sj(P)||cj[L]&&cj[Q]&&cj[X]?"xyz":cj[L]&&cj[Q]?"xy":cj[L]&&cj[X]?"xz":cj[Q]&&cj[X]?"yz":cj[L]?"x":cj[Q]?"y":cj[X]?"z":"xz"},handleTick:function(){var z=this,K=!1,$=z._moveStep,A=$,y=!1,o=!0,R=z._rotateStep*(o?-1:1);if(z.isWalkable()||(A=0),z.isPannable()||($=0),z.isRotatable()||(R=0),z._32Q){var D=(Do()-z._32Q)/50;A*=D,$*=D,R*=D}z._31Q&&(Vb(z._31Q),delete z._31Q,delete z._32Q),We()&&(K=!0,z.pan(-$,0,y,o)),De()&&(K=!0,z.pan($,0,y,o)),jp()&&(K=!0,Sj()?z.pan(0,$,y,o):z.walk(A,y,o)),ee()&&(K=!0,Sj()?z.pan(0,-$,y,o):z.walk(-A,y,o)),Rr()&&(K=!0,z.rotate(-R,0,y,o)),un()&&(K=!0,z.rotate(R,0,y,o)),Hj()&&(K=!0,z.rotate(0,-R/2,y,o)),Ag()&&(K=!0,z.rotate(0,R/2,y,o)),K&&(z._32Q=Do(),z._31Q=Sg(z.handleTick,z))},handleKeyDown:function(C){var v=this;!Ak(C)&&ql[C.keyCode]?v.handleTick():Uf(C)?v.selectAll():Te(C)?v.handleDelete(C):mr(C)&&this.isResettable()&&v.reset()},checkDoubleClickOnNote:function(w,k,W){var Q=this;if(W===Xf){if(k.s("note.toggleable"))return k.s(As,!k.s(As)),Q.fi({kind:"toggleNote",event:w,data:k,part:W}),!0}else if(W===Sd&&k.s("note2.toggleable"))return k.s(Cc,!k.s(Cc)),Q.fi({kind:"toggleNote2",event:w,data:k,part:W}),!0;return!1},checkDoubleClickOnRotation:function(Y,J,n){return n===up?(J.setRotationX(0),!0):n===vk?(J.setRotationY(0),!0):n===$o?(J.setRotationZ(0),!0):!1},onRotateEnded:function(){},onWalkEnded:function(){},toViewPosition:function(J){var y=this,u=y.getWidth()/2,o=y.getHeight()/2,k=y._18Q;return k||(k=Nc(y),y._18Q=jr(k,k,on(y))),J=us([J[0],J[1],J[2],1],k),{x:u+u*J[0]/J[3],y:o-o*J[1]/J[3]}},getHitPosition:function(l,j,E){var h=this,I=h.getWidth(),J=h.getHeight(),P=l.target?h.lp(l):l,W=P.x-I/2,o=P.y-J/2,t=h.getCenterInfo(),v=on(h);j=j?j:[0,0,0],E=E?E:[0,1,0],W=W/I*t.width,o=-1*o/J*t.height;var z=[v[0]*W,v[4]*W,v[8]*W],g=[v[1]*o,v[5]*o,v[9]*o],i=[z[0]+g[0],z[1]+g[1],z[2]+g[2]],D=h.getCenter(),s=nd(h,j,E,[i[0]+D[0],i[1]+D[1],i[2]+D[2]]);return s?s:[0,0,0]},getLineLength:function(d){this.validate();var n=this.getData3dUI(d);if(n&&n.getCache){var b=n.getCache();if(b)return b[b.length-1].length}return 0},getLineOffset:function(i,j){this.validate();var m=this.getData3dUI(i);if(m&&m.getCache){var b=m.getCache();if(b)return wh(b,j)}return $}});var Mc=Sc.Interactor=function(o){this.gv=o};Zn("Interactor",x,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners()}});var em=Sc.DefaultInteractor=function(c){Cb(em,this,[c])};Zn("DefaultInteractor",Mc,{handle_contextmenu:function(P){In(P)},handle_mousewheel:function(k){this.gv.handleScroll(k,k.wheelDelta/40)},handle_DOMMouseScroll:function($){2===$.axis&&this.gv.handleScroll($,-$.detail)},handle_keydown:function(o){this.gv.handleKeyDown(o)},handle_mousedown:function(n){this.handle_touchstart(n)},handle_touchstart:function(c){In(c);var B=this,M=B.gv,j=Ni(c),l=M.getDataInfoAt(c),m=l?l.data:$,w=l?l.part:$,i=M.sm(),s=qk(c),o=Di(c);M.setFocus(c)&&(B._62O=$,B._57I=$,m?Ak(c)?i.co(m)?i.rs(m):i.as(m):i.co(m)||i.ss(m):j&&(Ak(c)?M.isRectSelectable()&&(B._62O=cg):B._57I=lc(c)),B._31Q&&(Vb(B._31Q),delete B._31Q,delete B._32Q),B._62O||(M.isFirstPersonMode()&&(Sj(c)||o>2?B._62O="pan":M.isMouseRoamable()||_?(B._62O="roaming",B.foward=s&&Ni(c),B._32Q=Do(),B._31Q=Sg(B.tick,B)):j||(B._62O="roaming")),B._62O||(j&&s&&li[w]?(B._62O=w,B.p3=m.p3()):j&&s&&ag(m)&&M.isSelected(m)&&M.isMovable(m)?(B._62O="move",B.p3=m.p3(),B.movedata=m):_&&(o>2?B._62O="pan":2===o&&(B.dist=db(c),B._62O="pinch")))),B.point=M.lp(c),vq(B,c),ik(c)?M.handleDoubleClick(c,m,w):M.handleClick(c,m,w))},tick:function(){var S=this,x=S.gv,s=x._moveStep;S.point&&x.isWalkable()&&(S._32Q&&(s*=(Do()-S._32Q)/50),x.walk(S.foward?s:-s),S._32Q=Do(),S._31Q=Sg(S.tick,S))},handle_mouseup:function(l){this.handle_touchend(l)},handle_touchend:function(s){var J=this._57I;J&&(Ym(J,lc(s))<=1&&this.gv.sm().cs(),this._57I=$)},handleWindowMouseMove:function(q){this.handleWindowTouchMove(q)},handleWindowTouchMove:function(g){var $,L,Z=this,o=Z.gv,h=Z._62O,r=Z.point,q=o.dm(),I=q.getHistoryManager(),M=o.lp(g),k=M.x-r.x,X=M.y-r.y,H=-i*k/o.getWidth(),A=-i*X/o.getHeight();if("roaming"===h)Z.rotate(g,H/2,A/2);else if(h===up||h===vk||h===$o)I&&!o._86O&&I.beginInteraction(),o.fi({kind:o._86O?"betweenEditRotation":"beginEditRotation",event:g}),o._86O=1,o.sm().each(function(i){if(ag(i)&&o.isRotationEditable(i)){var Z=m(H)>m(A)?H:A;h===up?i.setRotationX(i.getRotationX()+Z):h===vk?i.setRotationY(i.getRotationY()+Z):h===$o&&i.setRotationZ(i.getRotationZ()+Z)}});else if("move"===h||li[h]){h===td||h===sp||h===Om?(I&&!o._87O&&I.beginInteraction(),o.fi({kind:o._87O?"betweenEditSize":"beginEditSize",event:g}),o._87O=1):(I&&!o._moving&&I.beginInteraction(),o.fi({kind:o._moving?"betweenMove":"beginMove",event:g}),o._moving=1);var s,U=Z.p3,G=o.getPositionInfo(U),O=on(o);s=h===nf?"x":h===Sh?"y":h===qd?"z":h===td?"sx":h===sp?"sy":h===Om?"sz":o.getMoveMode(g,Z.movedata),k=k/o.getWidth()*G.width,X=-1*X/o.getHeight()*G.height;var W,c,u=[O[0]*k,O[4]*k,O[8]*k],v=[O[1]*X,O[5]*X,O[9]*X],F=u[0]+v[0],B=u[1]+v[1],a=u[2]+v[2],e=[U[0]+F,U[1]+B,U[2]+a],P=Hl(o.getEye(),e,!0);if("xyz"===s?(W=e,o.moveSelection(F,B,a)):"xz"===s?(W=nd(o,U,[0,1,0],e),W&&o.moveSelection(W[0]-U[0],0,W[2]-U[2])):"xy"===s?(W=nd(o,U,[0,0,1],e),W&&o.moveSelection(W[0]-U[0],W[1]-U[1],0)):"yz"===s?(W=nd(o,U,[1,0,0],e),W&&o.moveSelection(0,W[1]-U[1],W[2]-U[2])):"x"===s||"sx"===s?(P[0]=0,W=nd(o,U,P,e),W&&(c=W[0]-U[0],"x"===s?o.moveSelection(c,0,0):o.sm().each(function(e){ag(e)&&o.isSizeEditable(e)&&($=V(Cn,e.getWidth()+c),L=$/e.getWidth(),e.setWidth($),Sj(g)&&(e.setHeight(e.getHeight()*L),e.setTall(e.getTall()*L)))}))):"y"===s||"sy"===s?(P[1]=0,W=nd(o,U,P,e),W&&(c=W[1]-U[1],"y"===s?o.moveSelection(0,c,0):o.sm().each(function(n){ag(n)&&o.isSizeEditable(n)&&($=V(Cn,n.getTall()+c),L=$/n.getTall(),n.setTall($),Sj(g)&&(n.setHeight(n.getHeight()*L),n.setWidth(n.getWidth()*L)))}))):("z"===s||"sz"===s)&&(P[2]=0,W=nd(o,U,P,e),W&&(c=W[2]-U[2],"z"===s?o.moveSelection(0,0,c):o.sm().each(function(Q){ag(Q)&&o.isSizeEditable(Q)&&($=V(Cn,Q.getHeight()+c),L=$/Q.getHeight(),Q.setHeight($),Sj(g)&&(Q.setTall(Q.getTall()*L),Q.setWidth(Q.getWidth()*L)))}))),!W)return;Z.p3=W}else if(h===cg){var y=Z.div;y||(y=Z.div=eo(),Si(Z.getView(),y),y.op=r,y.style.background=o.getRectSelectBackground()),o.fi({kind:o._rectSelecting?"betweenRectSelect":"beginRectSelect",event:g}),o._rectSelecting=1,y.rect=vc(y.op,M),Vq(y,y.rect)}else if("pinch"===h&&2===Di(g)){o.fi({kind:o._pinching?"betweenPinch":"beginPinch",event:g}),o._pinching=1;var c=db(g);o.handlePinch(c,Z.dist),Z.dist=c}else"pan"===h||Sj(g)?Z.pan(g,k,X):o.isFirstPersonMode()||(Ni(g)?Z.rotate(g,H,A):(Z.pan(g,k,0),o.isWalkable()&&(o.fi({kind:o._walking?"betweenWalk":"beginWalk",event:g}),o._walking=1,o.walk(X/o.getHeight()*o.getCenterInfo().height))));Z.point=M},pan:function(w,O,q){var f=this.gv;if(f.isPannable()){var l=f.getCenterInfo(),x=O/f.getWidth()*l.width,F=-1*q/f.getHeight()*l.height;f.fi({kind:f._panning?"betweenPan":"beginPan",event:w}),f._panning=1,f.pan(-x,-F)}},rotate:function(G,V,v){var h=this.gv;h.isRotatable()&&(h.fi({kind:h._rotating?"betweenRotate":"beginRotate",event:G}),h._rotating=1,h.rotate(V,v))},handleWindowMouseUp:function(R){this.handleWindowTouchEnd(R)},handleWindowTouchEnd:function(k){var y=this,M=y.gv,T=M.dm(),E=T.getHistoryManager(),L=y.div;if(L){var q=M.getDatasInRect(L.rect);if(!q.isEmpty()){var _=M.sm(),d=_.toSelection();q.each(function(n){_.co(n)?d.remove(n):d.add(n)}),_.ss(d)}bf(L)}M._moving&&(delete M._moving,M.fi({kind:"endMove",event:k}),M.onMoveEnded(),E&&E.endInteraction()),M._panning&&(delete M._panning,M.fi({kind:"endPan",event:k}),M.onPanEnded()),M._rotating&&(delete M._rotating,M.fi({kind:"endRotate",event:k}),M.onRotateEnded()),M._86O&&(delete M._86O,M.fi({kind:"endEditRotation",event:k}),E&&E.endInteraction()),M._87O&&(delete M._87O,M.fi({kind:"endEditSize",event:k}),E&&E.endInteraction()),M._pinching&&(delete M._pinching,M.fi({kind:"endPinch",event:k}),M.onPinchEnded()),M._rectSelecting&&(delete M._rectSelecting,M.fi({kind:"endRectSelect",event:k}),M.onRectSelectEnded()),M._walking&&(delete M._walking,M.fi({kind:"endWalk",event:k}),M.onWalkEnded()),y.dist=y.point=y._62O=y.p3=y.movedata=y.div=y._57I=y._32Q=y._31Q=y.foward=$}});var er=function(l){this.gv=l};de(er,x,{_iv:!0,iv:function(){this._iv=!0},face:function(I,q){var d=this,g=d.gv.getGL();if(!g||!ag(I))return $;var D=q.x,F=q.width,u=q.height,m=d.height-q.y-u,z=r(F/2),c=new Uint8Array(4*F*u),x=0;for(d.iv(),d.validate(I),Ur(g,d.frame),g.readPixels(D,m,F,u,g.RGBA,g.UNSIGNED_BYTE,c),Ur(g,$),d.iv();z>=x;x++)for(var T=z-x,Z=z+x,b=T;Z>=b;b++)for(var o=T;Z>=o;o++)if(b===T||b===Z||o===T||o===Z){var e=Sr.m[c[4*(b*F+o)]];if(e)return e}},get:function(b,U){this.validate();var R=this,h=R.gv.getGL();if(!h)return $;var j,y,q=b.x,Y=b.width,s=b.height,V=R.height-b.y-s,k=r(Y/2),L=new Uint8Array(4*Y*s),W=0,z=L.length,t=U?$:new fr,J=U?$:{};if(Ur(h,R.frame),h.readPixels(q,V,Y,s,h.RGBA,h.UNSIGNED_BYTE,L),Ur(h,$),U){for(;k>=W;W++)for(var A=k-W,p=k+W,w=A;p>=w;w++)for(var m=A;p>=m;m++)if((w===A||w===p||m===A||m===p)&&(j=R.info(L,4*(w*Y+m))))return j}else for(;z>W;W+=4)j=R.info(L,W),j&&(y=j.data,J[y._id]||(t.add(y),J[y._id]=y));return t},info:function(K,C){return this.colorMap[(K[C]<<24)+(K[C+1]<<16)+(K[C+2]<<8)+K[C+3]]},validate:function(I){var r=this,b=r.gv,_=b.getGL();if(_){var A=b.getWidth(),Y=b.getHeight(),B=_.RGBA,q=_.TEXTURE_2D,P=_.RENDERBUFFER,C=_.FRAMEBUFFER;r.texture||(r.texture=Pb(_),r.render=_.createRenderbuffer(),r.frame=_.createFramebuffer()),(r.width!==A||r.height!==Y)&&(wp(_,r.texture),_.texImage2D(q,0,B,A,Y,0,B,_.UNSIGNED_BYTE,$),Rg(_,_.TEXTURE_MIN_FILTER,_.LINEAR),_.bindRenderbuffer(P,r.render),_.renderbufferStorage(P,_.DEPTH_COMPONENT16,A,Y),Ur(_,r.frame),_.framebufferTexture2D(C,_.COLOR_ATTACHMENT0,q,r.texture,0),_.framebufferRenderbuffer(C,_.DEPTH_ATTACHMENT,P,r.render),wp(_,$),_.bindRenderbuffer(P,$),Ur(_,$),r.width=A,r.height=Y),r._iv&&(r._iv=!1,Ur(_,r.frame),b._42(I||(r.colorMap={}),1),Ur(_,$))}}});var jd=function(e){this.gv=e};de(jd,x,{gap:0,size:0,_42:function(R,u){var p=this,T=p.gv,l=T._gridGap,J=T._gridSize;if(T._gridVisible){if(p.gap!==l||p.size!==J){for(var V=[],P=T._gridSize/2,B=l*P,v=0;2*P+1>v;v++){var I=6*v,M=6*(2*P+1)+I;V[I]=-B,V[I+1]=0,V[I+2]=-B+v*l,V[I+3]=B,V[I+4]=0,V[I+5]=-B+v*l,V[M]=-B+v*l,V[M+1]=0,V[M+2]=-B,V[M+3]=-B+v*l,V[M+4]=0,V[M+5]=B}p.vs=new wq(V),p.gap=l,p.size=J}gg(T),_h(R,u),cc(R,u,1,T._gridColor,T._buffer.vs,p.vs),Ye(R,0,p.vs.length/3,R.LINES),qi(R,u)}else p.vs=p.gap=p.size=$}});var ao=function(R){this.gv=R};de(ao,x,{_42:function(V,i){var N=this.gv,f=N._buffer.vs,b=N._axisXColor,j=N._axisYColor,R=N._axisZColor,y=N._originAxisVisible,w=N._centerAxisVisible;if(y||w){var h=A?V.TRIANGLES:V.TRIANGLE_FAN,m=V.LINES;if(gg(N),_h(V,i),y){var L=N.getCenterInfo(),E=a(L.width,L.height)/5,o=.8*E,S=.05*E;cc(V,i,1.5,b,f,new wq([0,0,0,E,0,0,o,S,0,o,0,S,o,-S,0,o,0,-S,o,S,0,0,0,0,0,E,0,S,o,0,0,o,S,-S,o,0,0,o,-S,S,o,0,0,0,0,0,0,E,S,0,o,0,S,o,-S,0,o,0,-S,o,S,0,o])),Ye(V,0,2,m),Ye(V,1,6,h),cc(V,i,$,j),Ye(V,7,2,m),Ye(V,8,6,h),cc(V,i,$,R),Ye(V,14,2,m),Ye(V,15,6,h)}if(w){var P=N._center,Q=P[0],X=P[1],l=P[2],L=N.getPositionInfo(P);E=a(L.width,L.height)/20,cc(V,i,1.5,b,f,new wq([Q,X,l,Q+E,X,l,Q,X,l,Q,X+E,l,Q,X,l,Q,X,l+E])),Ye(V,0,2,m),cc(V,i,$,j),Ye(V,2,2,m),cc(V,i,$,R),Ye(V,4,2,m)}qi(V,i)}}});var vp=function(C){this.gv=C},nf="edit_tx",Sh="edit_ty",qd="edit_tz",up="edit_rx",vk="edit_ry",$o="edit_rz",td="edit_sx",sp="edit_sy",Om="edit_sz",li={};li[nf]=1,li[Sh]=1,li[qd]=1,li[up]=1,li[vk]=1,li[$o]=1,li[td]=1,li[sp]=1,li[Om]=1,de(vp,x,{_42:function(d,A,k){var T=this,Y=T.gv,K=Y.sm().ld();if(Y.isEditable(K)&&ag(K)&&(!Y.isFirstPersonMode()||!Y.isMouseRoamable()&&!_)){gg(Y);var l,w,n=Y.isMovable(K),$=Y.isRotationEditable(K),B=Y.isSizeEditable(K),R=Y._axisXColor,s=Y._axisYColor,h=Y._axisZColor,N=Y._editSizeColor,i=Y.getCenterInfo(),j=a(i.width,i.height)/10,c=j/(k?5:10),X=.7*j,S=.4*X,z=K.p3(),W=z[0],F=z[1],e=z[2];l=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],n&&T._17O(d,A,K,k,nf,R,l,[W,F-c,e,W+X,F-c,e,W+X,F,e,W+X,F,e,W,F,e,W,F-c,e,W,F-c,e+c,W+X,F-c,e+c,W+X,F-c,e,W+X,F-c,e,W,F-c,e,W,F-c,e+c]),w=W+X,B&&T._17O(d,A,K,k,td,N,l,[w,F-c,e,w+S,F-c,e,w+S,F,e,w+S,F,e,w,F,e,w,F-c,e,w,F-c,e+c,w+S,F-c,e+c,w+S,F-c,e,w+S,F-c,e,w,F-c,e,w,F-c,e+c]),w+=S,$&&T._17O(d,A,K,k,up,R,l,[w,F-c,e,w+S,F-c,e,w+S,F,e,w+S,F,e,w,F,e,w,F-c,e,w,F-c,e+c,w+S,F-c,e+c,w+S,F-c,e,w+S,F-c,e,w,F-c,e,w,F-c,e+c]),l=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0],n&&T._17O(d,A,K,k,Sh,s,l,[W,F,e,W,F+X,e,W-c,F+X,e,W-c,F+X,e,W-c,F,e,W,F,e,W,F,e,W,F,e-c,W,F+X,e-c,W,F+X,e-c,W,F+X,e,W,F,e]),w=F+X,B&&T._17O(d,A,K,k,sp,N,l,[W,w,e,W,w+S,e,W-c,w+S,e,W-c,w+S,e,W-c,w,e,W,w,e,W,w,e,W,w,e-c,W,w+S,e-c,W,w+S,e-c,W,w+S,e,W,w,e]),w+=S,$&&T._17O(d,A,K,k,vk,s,l,[W,w,e,W,w+S,e,W-c,w+S,e,W-c,w+S,e,W-c,w,e,W,w,e,W,w,e,W,w,e-c,W,w+S,e-c,W,w+S,e-c,W,w+S,e,W,w,e]),l=[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],n&&T._17O(d,A,K,k,qd,h,l,[W,F,e,W,F,e+X,W,F-c,e+X,W,F-c,e+X,W,F-c,e,W,F,e,W,F-c,e,W-c,F-c,e,W-c,F-c,e+X,W-c,F-c,e+X,W,F-c,e+X,W,F-c,e]),w=e+X,B&&T._17O(d,A,K,k,Om,N,l,[W,F,w,W,F,w+S,W,F-c,w+S,W,F-c,w+S,W,F-c,w,W,F,w,W,F-c,w,W-c,F-c,w,W-c,F-c,w+S,W-c,F-c,w+S,W,F-c,w+S,W,F-c,w]),w+=S,$&&T._17O(d,A,K,k,$o,h,l,[W,F,w,W,F,w+S,W,F-c,w+S,W,F-c,w+S,W,F-c,w,W,F,w,W,F-c,w,W-c,F-c,w,W-c,F-c,w+S,W-c,F-c,w+S,W,F-c,w+S,W,F-c,w])}},_17O:function(I,B,Z,b,i,M,q,s){var D=this.gv._buffer;vd(I,B,b,!0,Z,i),Op(I,B,$,!0,$,!0,$,!1),gn(I,B.uDiffuse,M),Bb(I,D.vs,new wq(s),B.aPosition),Bb(I,D.ns,new wq(q),B.aNormal),Ye(I,0,12),Pr(I,B)}});var Nj=function(e,O){this.gv=e,this.s=function(N,u,f){return u==$&&(u=f),u==$?O.getStyle(N):uk(u,O,e)},this.data=O};de(Nj,x,{I3d:!0,ms_icons:1,_iv:!0,iv:function(){this._iv=!0},_42:function(T,e,q,R){var m,v,U,j,E,x,h,u=this,H=u.gv,a=u.data,Y=a._id,J=u.s("batch"),X=H._34O,r=H._33O,o=H.isSelectable(a),I=H.getBrightness(a),B=I!=$&&1!==I;if(u._iv){if(U=xc(X,r,a,J),u.validate(U,J?Zr[J]||pc:$),U&&(j=X[Y],E=j.size=U.vs.length/3-j.begin,h=U.rs))for(I=B?I:1,x=0;E>x;x++)h.push(I);if(ag(a)){var F=H.getWireframe(a);F&&mk(H,a,F)}u.labelInfo=u.label2Info=u.noteInfo=u.note2Info=u._38o=$,u._24O(Cq,"getLabel"),u._24O(jn,"getLabel2"),u._26O(Xf,"getNote"),u._26O(Sd,"getNote2"),u._15O(),u._iv=!1}B&&gn(T,e.uBrightness,I),v=vd(T,e,q,o,a,Lc),v&&(zb(v,X[Y],r),zb(v,H._polylineIndexMap[Y],H._polylineModelMap),zb(v,H._wireframeIndexMap[Y],H._wireframeModelMap)),X[Y]||u._80o(T,e,R),(m=u.labelInfo)&&(vd(T,e,q,o,a,Cq),u._28O(m,Cq,R)),(m=u.label2Info)&&(vd(T,e,q,o,a,jn),u._28O(m,jn,R)),(m=u.noteInfo)&&(vd(T,e,q,o,a,Xf),u._29O(m,Xf,R)),(m=u.note2Info)&&(vd(T,e,q,o,a,Sd),u._29O(m,Sd,R)),(m=u._38o)&&u._99O(T,e,m,q,o,R),B&&gn(T,e.uBrightness,1)},validate:function(){},_16O:function(){return Yj},_80o:function(){},dispose:function(){},getBodyColor:function(o){var u=this.data,W=this.gv.getBodyColor(u);return W?W:o?u.getStyle(o):$},_24O:function(r,k){var R=this,p=R.data,l=R.gv,i=R.s,m=l[k](p);if(m!=$){var I=i(r+".scale"),f=i(r+".max"),Z=R[r+"Info"]={label:m,textureScale:i(r+".texture.scale"),color:l[k+"Color"](p),font:i(r+".font"),align:i(r+".align"),background:l[k+"Background"](p)},y=Z.rect=_o(Z,m);f>0&&f<y.width&&(Z.labelWidth=y.width,y.width=f),y.x=y.y=0,y.width*=I,y.height*=I,Z.mat=R._16O(i(r+".autorotate"),i(r+".position"),y,i(r+".face"),i(r+".t3"),i(r+".r3"),i(r+".rotationMode"));var v=y.width/2,E=y.height/2;Z.vs=new wq([-v,E,0,-v,-E,0,v,-E,0,v,E,0]),y.width/=I,y.height/=I}},_26O:function(e,Z){var f=this,y=f.data,L=f.gv,h=f.s,j=L[Z](y);if(j!=$){var m=h(e+".scale"),V=this[e+"Info"]={note:j,textureScale:h(e+".texture.scale"),expanded:h(e+".expanded"),font:h(e+".font"),color:h(e+".color"),align:h(e+".align"),borderWidth:h(e+".border.width"),borderColor:h(e+".border.color"),background:L[Z+"Background"](y)};if(V.expanded){var p=h(e+".max"),x=_o(V,j);x.width+=6,x.height+=2,p>0&&p<x.width&&(V.labelWidth=x.width,x.width=p);var K={x:-x.width/2,y:-8-x.height,width:x.width,height:x.height+8}}else K={x:-6,y:-18,width:12,height:18};V.mat=f._16O(h(e+".autorotate"),h(e+".position"),$,h(e+".face"),h(e+".t3"),h(e+".r3"),h(e+".rotationMode")),V.rect=K,1!==m&&(K=Nf(K),K.x*=m,K.height*=m,K.y=-K.height,K.width*=m);var c=K.x,C=K.y,X=K.width,q=K.height;V.vs=new wq([c,-C,0,c,-C-q,0,c+X,-C-q,0,c+X,-C,0])}},_28O:function(R,N,l){if(l(this.s(N+".transparent"))){var g=R.rect,a=R.textureScale,B=g.width*a,S=g.height*a;if(B>=1&&S>=1){var x=sl(B,S);1!==a&&(x.translate(x,g.x,g.y),x.scale(a,a),x.translate(x,-g.x,-g.y)),rp(x,R),x.restore(),ig(this,N,R.mat,R.vs,!0)}}},_29O:function(g,O,Q){if(Q(this.s(O+".transparent"))){var e=g.rect,t=g.textureScale,r=e.x,M=e.y,u=e.width*t,U=e.height*t;if(u>=1&&U>=1){e.x=e.y=0;var v=sl(u,U);1!==t&&v.scale(t,t),Rk(v,g),v.restore(),e.x=r,e.y=M,ig(this,O,g.mat,g.vs,!1)}}},_99O:function(B,S,s,z,L,M){if(s){var r=this,t=r.gv,h=r.data,k=t._buffer,R=t._1O,b=s.icons;for(var D in b){var d=b[D],E=s.rects[D];if(E&&M(uk(d.transparent,h,t))){vd(B,S,z,L,h,D);var e=uk(d.shape3d,h,t),i=e?[e]:uk(d.names,h,t),c=i?i.length:0,W=uk(d.textureScale,h,t)||1,y=uk(d.light,h,t);y==$&&(y=e?!0:!1),Op(B,S,uk(d.blend,h,t),y,uk(d.opacity,h,t),uk(d.reverseFlip,h,t),uk(d.reverseColor,h,t),uk(d.reverseCull,h,t));for(var V=0;c>V;V++){var C=i[V],l=E[V];if(Ce(r,l.mat),e)nk(t,h,_j(r.s,e),r.s);else{var _=Tn(C);if(_){var P=l.width*W,H=l.height*W;if(P>=1&&H>=1){var F=sl(P,H);ai(F,_,uk(d.stretch,h,t),0,0,P,H,h,t),F.restore(),Pb(B,sf,R),Tf(B,S,R,uk(d.discardSelectable,h,t),k.uv,Wc),Bb(B,k.vs,l.vs,S.aPosition),Bb(B,k.ns,Oi,S.aNormal),An(B,k.is,vm),ns(B,0,vm.length),um(B,S,R)}}}bk(t)}Pr(B,S)}}}}});var Uj=function(f,H){Cb(Uj,this,[f,H])};de(Uj,Nj,{_16O:function(g,n,h,C,X,Q,w,x,p){var c=this.data,y=mc(n,c.s3(),h,C,x,p);return nb(Cm(),y,c.p3(),C,X,Q,w,g,c.r3(),c.getRotationMode())},clear:function(){var G=this;G.faceMat=G.mat=G.shapeModel=G.left=G.right=G.front=G.back=G.top=G.bottom=G.csg=$},validate:function(S,K){var i=this,k=i.gv,g=i.data,P=_j(i.s),E=$k(g,k.getMat(g),P?i.s("shape3d.scaleable"):!0);if(i.clear(),S){var U=[];P?Qj(k,g,P,i.s,i.getBodyColor(),[E],S,U):(If(k,g,S,K,E,Zd,U,_r),If(k,g,S,K,E,Aj,U,bd),If(k,g,S,K,E,tn,U,$h),If(k,g,S,K,E,sb,U,Od),If(k,g,S,K,E,G,U,Lh),If(k,g,S,K,E,cn,U,bi)),U.length&&(Jc(S.vs,U),Jc(S.ns,Lf(U)))}else i.mat=E,(i.shapeModel=P)||(i.vf(Zd),i.vf(Aj),i.vf(G),i.vf(cn),i.vf(tn),i.vf(sb))},vf:function(r){var v=this;if(v.gv.getFaceVisible(v.data,r)){var n=Dc(v,r);return n.mat&&(v.faceMat=!0),n}},_80o:function(M,R,N){var j=this,m=j.gv,t=j.data,r=m._cube,V=j.shapeModel;gg(m,j.mat),V?nk(m,t,V,j.s,j.getBodyColor(),N):(Bb(M,r.vs,$,R.aPosition),Bb(M,r.ns,$,R.aNormal),An(M,r.is),j._18O(M,R,j.left,0,N),j._18O(M,R,j.front,6,N),j._18O(M,R,j.right,12,N),j._18O(M,R,j.back,18,N),j._18O(M,R,j.top,24,N),j._18O(M,R,j.bottom,30,N)),bk(m),j.faceMat&&(j._18O(M,R,j.left,0,N,!0),j._18O(M,R,j.front,6,N,!0),j._18O(M,R,j.right,12,N,!0),j._18O(M,R,j.back,18,N,!0),j._18O(M,R,j.top,24,N,!0),j._18O(M,R,j.bottom,30,N,!0))},_18O:function(x,u,O,o,v,w){if(O){if(!v(O.transparent))return;if(w&&!O.mat||!w&&O.mat)return;w&&gg(this.gv,O.mat);var L=this,y=L.data,T=L.gv,h=T.getTexture(O.texture,y),q=O.uv,f=O.uvScale,m=O.uvOffset,C=O.discardSelectable;if(h)if(q){for(var Z=8*(o/6),l=0;8>l;l++)gr[Z+l]=q[l];Tf(x,u,h,C,T._buffer.uv,gr,m,f)}else Tf(x,u,h,C,T._cube.uv,$,m,f);Op(x,u,O.blend,O.light,O.opacity,O.reverseFlip,O.reverseColor,O.reverseCull),gn(x,u.uDiffuse,O.color),ns(x,o,6),Pr(x,u),um(x,u,h),w&&bk(T)}}});var En=function(i,C){Cb(En,this,[i,C])};de(En,Nj,{_25Q:1,validate:function(x){var b=this,k=b.gv,d=b.data,J=b.s,G=J("edge.width"),F=d._40I,Z=d._41I;if(b.shapeModel=b.info=$,F&&Z){var u,L,C,p,S,c,V,I,R,g,A=d.isLooped(),E=J(ad),U=O.getEdgeType(E);if(U){var e=U(d,yc(b,k,d,A,E),k,b._19Q);if(!e.points||e.points.isEmpty())return;c=b.info={},V=e.segments,S=e.points,I=S.size();for(var T=F.getElevation(),h=Z.getElevation(),W=0;I>W;W++){var N=S.get(W);N.e==$&&(N.e=T+(h-T)*W/(I-1))}R=Qm(S.get(0)),g=Qm(S.get(I-1));var q=I%2;0===q?(c.c1=Qm(S.get(I/2-1)),c.c2=Qm(S.get(I/2))):c.p3=Qm(S.get((I-q)/2)),c.s1=R,c.s2=Qm(S.get(1)),c.t1=Qm(S.get(I-2)),c.t2=g}else{S=new fr,c=b.info={};var P=J("edge.offset"),B=J("edge.center"),w=J("edge.source.t3"),M=J("edge.target.t3"),H=F.p3(),X=Z.p3();if(w&&(H[0]+=w[0],H[1]+=w[1],H[2]+=w[2]),M&&(X[0]+=M[0],X[1]+=M[1],X[2]+=M[2]),E===Uc){V=J("edge.segments");var l=c.points=J(ch)||ps;if(I=l.size()){R=Qm(l.get(0)),g=Qm(l.get(I-1)),!B&&P&&(C=Hl(R,H,!0),P=a(P,Ym(H,R)),H=[H[0]+C[0]*P,H[1]+C[1]*P,H[2]+C[2]*P],C=Hl(X,g,!0),P=a(P,Ym(g,X)),X=[X[0]-C[0]*P,X[1]-C[1]*P,X[2]-C[2]*P]);var q=I%2;0===q?(u=Qm(l.get(I/2-1)),L=Qm(l.get(I/2))):c.p3=Qm(l.get((I-q)/2)),c.s1=H,c.s2=R,c.t1=g,c.t2=X}else!B&&P&&(C=Hl(X,H,!0),p=Ym(H,X),P=Br(P,p),H=[H[0]+C[0]*P,H[1]+C[1]*P,H[2]+C[2]*P],X=[X[0]-C[0]*P,X[1]-C[1]*P,X[2]-C[2]*P]),u=H,L=X;S.add({x:H[0],y:H[2],e:H[1]}),S.addAll(l),S.add({x:X[0],y:X[2],e:X[1]})}else{var y=yc(b,k,d,A,E);if(b._19Q||(y=-y),A){var v=H[0],r=H[1],i=H[2],t=F.getTall()/2+y;u=[v-y,r+t,i],L=[v+y,r+t,i],S.add({x:v-y,y:i,e:r}),S.add({x:v-y,y:i,e:r+t}),S.add({x:v+y,y:i,e:r+t}),S.add({x:v+y,y:i,e:r})}else{C=Hl(X,H,!0),p=Ym(H,X);var Q={x:H[0],y:H[2]},K={x:X[0],y:X[2]},s=Vp($,Q,K,y),z=s.x-Q.x,o=s.y-Q.y;P=Br(P,p),C[0]*=P,C[1]*=P,C[2]*=P,u=[H[0]+C[0]+z,H[1]+C[1],H[2]+C[2]+o],L=[X[0]-C[0]+z,X[1]-C[1],X[2]-C[2]+o],B?(S.add({x:H[0],y:H[2],e:H[1]}),S.add({x:u[0],y:u[2],e:u[1]}),S.add({x:L[0],y:L[2],e:L[1]}),S.add({x:X[0],y:X[2],e:X[1]})):(S.add({x:u[0],y:u[2],e:u[1]}),S.add({x:L[0],y:L[2],e:L[1]}))}}c.c1=u,c.c2=L}c.list=J(gp)===Jq?b.createTubeModel(S,V,G/2,x):b.createLineModel(S,V,G,"edge","edge.dash")}}});var pf=function(O,v){Cb(pf,this,[O,v])};de(pf,Uj,{_80o:function(c,p,k){var s=this,G=s.gv,A=s.shapeModel;gg(G,s.mat),A?nk(G,s.data,A,s.s,s.getBodyColor(),k):(bc(s,c,p,s.left,k),bc(s,c,p,s.front,k),bc(s,c,p,s.right,k),bc(s,c,p,s.back,k),bc(s,c,p,s.top,k),bc(s,c,p,s.bottom,k)),bk(G)},validate:function(z,s){var f,R,E=this,i=E.s,C=E.data,L=C.p3(),d=C._thickness/2,a=C.isClosePath(),k=C.getPoints(),V=C.getSegments(),I=i(Xl),P=z&&z.uv;if(E.clear(),0>d)R=E.shapeModel=ih(k,V,i(Oq),i(ml),I,i(_l),C.getTall(),C.getElevation(),a),i(Hm)?i("shape3d.image")||delete R.uv:(delete R.vs,delete R.ns,delete R.uv),i("shape3d.top.image")||delete R.top_uv,i("shape3d.bottom.image")||delete R.bottom_uv;else if(i(gp)===Jq)f=Ui(k,V,I,a),R=E.shapeModel={vs:[]},i("shape3d.image")&&(R.uv=[],R.sum=i(_l)||Fq(f)||1,R.len=0),i(Oq)&&!a&&(R.top_vs=[],i("shape3d.top.image")&&(R.top_uv=[])),i(ml)&&!a&&(R.bottom_vs=[],i("shape3d.bottom.image")&&(R.bottom_uv=[])),E._12O(f,d);else{var n,T,o,h,x,u,Y,Z,y,H;f=Ui(k,V,I,a),x=E.vf(G,P,!1,s),d&&(u=E.vf(cn,P,!1,s),Y=a?$:E.vf(Zd,P,!1,s),Z=a?$:E.vf(Aj,P,!1,s),y=E.vf(tn,P,!1,s),H=E.vf(sb,P,!1,s)),d?E._12O(f,d):x&&f.forEach(function(p){if(h=p.length,h>0)for(n=p[0],o=1;h>o;o++)T=p[o],E.addV(x.vs,n,T),n=T}),E._20Q(f),z||(x&&(x.ns=Lf(x.vs),Al(x,"vs"),Al(x,Rd)),d&&(u&&(u.ns=Lf(u.vs),Al(u,"vs"),Al(u,Rd)),Y&&(Y.ns=Lf(Y.vs),Al(Y,"vs"),Al(Y,Rd)),Z&&(Z.ns=Lf(Z.vs),Al(Z,"vs"),Al(Z,Rd)),y&&(y.ns=Lf(y.vs),Al(y,"vs"),Al(y,Rd)),H&&(H.ns=Lf(H.vs),Al(H,"vs"),Al(H,Rd))))}var j=E.mat=Cm();lb(j,L),Jd(j,C.r3(),C.getRotationMode()),lb(j,Bk(L)),z&&(pk(E,j,z,R),E.clear())},_20Q:function(b){var t,f,E,N,i,g,K,O=this,B=O.front,p=O.back,u=O.top,Q=O.bottom,h=B?B.tuv:$,n=p?p.tuv:$,x=u?u.tuv:$,v=Q?Q.tuv:$,a=0;(h||n||x||v)&&(t=O.s(_l)||Fq(b)||1,b.forEach(function(D){if(f=D.length,f>0)for(g=D[0],E=1;f>E;E++)K=D[E],N=a/t,a+=Ym(g,K),i=a/t,O._14O(B,N,i),O._14O(p,1-i,1-N),O._14O(u,N,i),O._14O(Q,N,i),g=K}))},_14O:function(B,f,P){if(B){var L=B.uv,C=B.tuv;if(C){if(L)var l=L[0]+(L[6]-L[0])*f,u=L[1]+(L[7]-L[1])*f,F=L[2]+(L[4]-L[2])*f,p=L[3]+(L[5]-L[3])*f,v=L[2]+(L[4]-L[2])*P,i=L[3]+(L[5]-L[3])*P,x=L[0]+(L[6]-L[0])*P,R=L[1]+(L[7]-L[1])*P;else l=f,u=0,F=f,p=1,v=P,i=1,x=P,R=0;C.push(F,p,v,i,x,R,x,R,l,u,F,p)}}},_13O:function(B){var N=B.uv,j=B.tuv;j&&(N?j.push(N[2],N[3],N[4],N[5],N[6],N[7],N[6],N[7],N[0],N[1],N[2],N[3]):j.push(0,1,1,1,1,0,1,0,0,0,0,1))},_12O:function(m,i){var l,_,q,K,D,N=this;m.forEach(function(U){if(D=U.length,D>0)for(l={p:U[0],n:!0},K=1;D>K;K++)_=U[K],q=D-1>K?U[K+1]:$,N.addPoint(l,_,q,i,U)})},addPoint:function(v,M,w,W,B){var Z,N,V,p,c,d,Q,u,s,j=this,n=v.p,F=v.f,Y=v.b,k=j.s("shape3d.side")||eh,C=j.s("shape3d.start.angle"),r=j.shapeModel,l=j.data.isClosePath();if(v.n&&(v.n=!1,F=l&&B.length>2?Vp(B[B.length-2],n,M,W):Vp($,n,M,W),Y=Ob(n,F),r?r.top_vs&&j._10O(Y,F,k,C,r.top_vs,r.top_uv):(Z=j.left)&&(j.addV(Z.vs,Y,F),j._13O(Z))),N=w?Vp(n,M,w,W):l&&B.length>2?Vp(n,M,B[1],W):Vp(n,M,$,W),V=Ob(M,N),r){var e,b,D=r.vs,o=r.uv,S=r.sum;for(o&&(e=r.len/S,r.len+=Ym(n,M),b=r.len/S),d=j._9O(Y,F,k,C),Q=j._9O(V,N,k,C),u=0;k>u;u++)s=u+1,Jc(D,d[s]),Jc(D,Q[u]),Jc(D,d[u]),Jc(D,Q[u]),Jc(D,d[s]),Jc(D,Q[s]),o&&(p=u/k,c=s/k,o.push(e,c,b,p,e,p,b,p,e,c,b,c));!w&&r.bottom_vs&&j._10O(V,N,k,C,r.bottom_vs,r.bottom_uv,!0)}else!w&&(Z=j.right)&&(j.addV(Z.vs,N,V),j._13O(Z)),(Z=j.front)&&j.addV(Z.vs,F,N),(Z=j.back)&&j.addV(Z.vs,V,Y),(Z=j.top)&&j.addH(Z.vs,F,N,V,Y,!0),(Z=j.bottom)&&j.addH(Z.vs,Y,V,N,F);v.p=M,v.f=N,v.b=V},_10O:function(r,E,n,j,W,x,M){var g,Q,R=this,B=R.data,Y=R._9O(r,E,n,j),_=(r.x+E.x)/2,e=(r.y+E.y)/2,U=B.getElevation(),u=0;for(u=0;n>u;u++)M?(Jc(W,Y[u]),Jc(W,Y[u+1])):(Jc(W,Y[u+1]),Jc(W,Y[u])),Jc(W,[_,U,e]),x&&(M?(g=i*(u+1)/n+j,Q=i*u/n+j):(g=i*u/n+j,Q=i*(u+1)/n+j),x.push(.5-.5*h(Q),.5-.5*d(Q),.5-.5*h(g),.5-.5*d(g),.5,.5))},_9O:function(W,H,w,b){for(var Z,f,o=this,C=o.data,D=[],S=(W.x+H.x)/2,e=(W.y+H.y)/2,u=C.getTall()/2,y=C.getElevation(),l=0;w>=l;l++)Z=i*l/w+b,f=h(Z),D.push([S+(W.x-S)*f,y+u*d(Z),e+(W.y-e)*f]);return D},addV:function(k,H,P){var m=H.x,i=H.y,v=P.x,b=P.y,o=this.data,A=o.getElevation(),x=o.getTall()/2;k.push(m,A-x,i,v,A-x,b,v,A+x,b,v,A+x,b,m,A+x,i,m,A-x,i)},addH:function(z,H,r,F,$,y){var e=this.data,k=e.getTall()/2,W=e.getElevation()+(y?k:-k);z.push(H.x,W,H.y,r.x,W,r.y,F.x,W,F.y,F.x,W,F.y,$.x,W,$.y,H.x,W,H.y)},vf:function(Z,w,u,i){var a,Y=this,B=Y.gv.getFaceVisible(Y.data,Z);return(u||B)&&(a=Dc(Y,Z,i),a.vs=[],a.tuv=B&&(a.texture||w)?[]:$,a.visible=B),a}});var Wj=function(Y,m){Cb(Wj,this,[Y,m])};de(Wj,Nj,{_25Q:1,validate:function(p){var W=this,r=W.data,n=W.s,L=r.getPoints(),Z=L.size();if(W.shapeModel=W.info=$,Z>1){var x=W.info={},I=r.getSegments(),i=r.getThickness(),K=Qm(L.get(0)),B=Qm(L.get(Z-1)),Q=Z%2;0===Q?(x.c1=Qm(L.get(Z/2-1)),x.c2=Qm(L.get(Z/2))):x.p3=Qm(L.get((Z-Q)/2)),x.s1=K,x.s2=Qm(L.get(1)),x.t1=Qm(L.get(Z-2)),x.t2=B,x.list=n(gp)===Jq?W.createTubeModel(L,I,i/2,p):W.createLineModel(L,I,i,"shape.border","shape.dash")}}}),$l(O,{accordionViewExpandIcon:Zi(Fn),accordionViewCollapseIcon:Zi(Fn,!0),accordionViewLabelColor:Tl,accordionViewLabelFont:Cp,accordionViewTitleBackground:xb,accordionViewSelectBackground:Ng,accordionViewSelectWidth:3,accordionViewSeparatorColor:K,splitViewDividerSize:1,splitViewDividerBackground:xb,splitViewDragOpacity:.5,splitViewToggleIcon:{width:16,height:16,comps:[{type:lk,rect:[2,2,12,12],background:Fn}]},propertyViewLabelColor:jh,propertyViewLabelSelectColor:Tl,propertyViewLabelFont:Cp,propertyViewExpandIcon:Zi(xq),propertyViewCollapseIcon:Zi(xq,!0),propertyViewBackground:Td,propertyViewRowLineVisible:!0,propertyViewColumnLineVisible:!0,propertyViewRowLineColor:Bd,propertyViewColumnLineColor:Bd,propertyViewSelectBackground:Ng,listViewLabelColor:jh,listViewLabelSelectColor:Tl,listViewLabelFont:Cp,listViewRowLineVisible:!1,listViewRowLineColor:Bd,listViewSelectBackground:Ng,treeViewLabelColor:jh,treeViewLabelSelectColor:Tl,treeViewLabelFont:Cp,treeViewExpandIcon:Zi(wr),treeViewCollapseIcon:Zi(wr,!0),treeViewRowLineVisible:!1,treeViewRowLineColor:Bd,treeViewSelectBackground:Ng,tableViewLabelColor:jh,tableViewLabelSelectColor:Tl,tableViewLabelFont:Cp,tableViewRowLineVisible:!0,tableViewColumnLineVisible:!0,tableViewRowLineColor:Bd,tableViewColumnLineColor:Bd,tableViewSelectBackground:Ng,treeTableViewLabelColor:jh,treeTableViewLabelSelectColor:Tl,treeTableViewLabelFont:Cp,treeTableViewExpandIcon:Zi(wr),treeTableViewCollapseIcon:Zi(wr,!0),treeTableViewRowLineVisible:!0,treeTableViewColumnLineVisible:!0,treeTableViewRowLineColor:Bd,treeTableViewColumnLineColor:Bd,treeTableViewSelectBackground:Ng,tableHeaderLabelColor:jh,tableHeaderLabelFont:Cp,tableHeaderColumnLineVisible:!0,tableHeaderColumnLineColor:cf,tableHeaderBackground:Td,tableHeaderMoveBackground:Xb,tableHeaderInsertColor:Ng,tableHeaderSortDescIcon:Ep(xq,!0),tableHeaderSortAscIcon:Ep(xq),tabViewTabGap:1,tabViewLabelColor:Tl,tabViewLabelFont:Cp,tabViewTabBackground:xb,tabViewSelectWidth:3,tabViewSelectBackground:Ng,tabViewMoveBackground:Xb,tabViewInsertColor:Ng,toolbarLabelColor:jh,toolbarLabelSelectColor:Tl,toolbarLabelFont:Cp,toolbarBackground:Td,toolbarSelectBackground:Ng,toolbarItemGap:8,toolbarSeparatorColor:ok},!0);var zc={translateX:1,sortColumn:1},zk={sortable:1,sortOrder:1,sortFunc:1},tk={focusData:1},Xc={dataModel:1,sortColumn:1,sortFunc:1,visibleFunc:1,rootData:1,rootVisible:1},Uk={dataModel:1,sortFunc:1,visibleFunc:1,categorizable:1},el=function(Z,m){m.add(Z),Z.hasChildren()&&Z.eachChild(function(h){el(h,m)})},Dd=function(Q,K,l,b,z,g,r,C,e,c,f){var S,I=l.getValueType(),X=l.getAlign();if(l.getEnumValues()){var y=l.toEnumLabel(K),M=sr||0,T=0,H=g,j=O.getTextSize(b,y).width;return S=Tn(l.toEnumIcon(K)),S&&(T=g+sr/2,"center"===X?T+=(C-(M+j))/2:"right"===X&&(T=T+C-(M+j)),Mp(Q,S,T,r+e/2),H=T+sr/2),y!=$&&(S?Fl(Q,y,b,z,H,r,C-(H-g),e):Fl(Q,y,b,z,g,r,C,e,X)),void 0}return K=l.formatValue(K),K!=$?I===Fg?(Sm(Q,g,r,C,e,K),void 0):I===bh||!I&&pi(K)?(S=Tn(K?Bn:Kf),Mp(Q,S,g+C/2,r+e/2,c,f),void 0):(Fl(Q,K,b,z,g,r,C,e,X),void 0):void 0},fh=function(J,Z){var N=Z.view,j=N.getDataModel().getHistoryManager(),M=sj(J),H=Z.column||Z.property;j&&j.beginInteraction(),Z.editor=J,J.info=Z,N.setCurrentEditor(J),N.getView().insertBefore(M,N._79O),Vq(J,Z.editorRect),J.setFocus?J.setFocus():$r(J),J.commitValue=function(){J._17Q&&(J=J._17Q),N.setValue(Z.data,H,J.getValue?J.getValue():J.value),J.close&&J.close(),bf(M)},H.onEditorCreated&&H.onEditorCreated(Z)},ui=function(c,Y,x,i,N){var s=pb(c,x),v=Y.value,S=Y.view,d=N.getValueType();return s.onblur=s.onchange=function(){S.endEditing()},"input"===c?(v=N.formatValue(v),v!=$&&(s.value=v),s.onkeydown=function(X){eq(X)&&S.endEditing()},(d===Yi||d===jc)&&s.addEventListener(Lk,O.numberListener,!1)):c===cg&&i.forEach(function(o){var f=C.createElement("option");f.innerHTML=N.toEnumLabel(o),f.value=o,N.isEnumEqual(v,o)&&(f.selected=!0),Si(s,f)}),fh(s,Y),s},fs=X.widget={},pe=function(v,b,V){de(Z+".widget."+v,b,V)};$l(hn,{ms_value:function(T){T.getValue=function($){var v=this.getItemById($),k=v.element;return k?k.getValue?k.getValue():k.value:v.selected},T.setValue=function(O,f){var S=this.getItemById(O),Z=S.element;Z?Z.setValue?Z.setValue(f):Z.value=f:(S.selected=f,this.iv())},T.v=function(X,$){var H=this;if(2===arguments.length)H.setValue(X,$);else{if(!ys(X))return H.getValue(X);for(var P in X)H.setValue(P,X[P])}return H}},_46o:function(F){F._icon=$,F._accessType=$,F._valueType=$,F._editable=!1,F._batchEditable=!0,F._align=Zd,F._nullable=!0,F._emptiable=!1,F.setParent=qe,F.formatValue=function(c){var z=this,F=z._valueType;if(z.getEnumValues())return z.toEnumLabel(c);if(F===bh)return!!c;if(c!=$){if(F===Yi)return B(c);if(hf(c))return _m(c)}return c},F.setEnum=function(J,C,e,P,d,_){var k=this;J&&J.values&&(P=J.editable,e=J.icons,C=J.labels,d=J.strict,_=J.maxHeight,J=J.values),ie(J)&&(J=J._as),ie(C)&&(C=C._as),ie(e)&&(e=e._as),k._enumValues=J,k._enumLabels=C,k._enumIcons=e,k._enumEditable=P,k._enumStrict=d==$?!0:d,k._enumMaxHeight=_,J&&J.length&&hf(J[0])&&(k._valueType=jc),k.fp("enum",!1,!0)
    },F.getEnumMaxHeight=function(){return this._enumMaxHeight},F.isEnumEditable=function(){return this._enumEditable},F.getEnumValues=function(){return this._enumValues},F.getEnumLabels=function(){return this._enumLabels},F.getEnumIcons=function(){return this._enumIcons},F.isEnumStrict=function(){return this._enumStrict},F.isEnumEqual=function(t,s){return this._enumStrict?t===s:t==s},F.toEnumLabel=function(n){var D=this,h=D._enumValues,K=D._enumLabels;if(h&&K)for(var g=0;g<h.length;g++)if(D.isEnumEqual(n,h[g]))return K[g];return n},F.toEnumIcon=function(j){var h=this,c=h._enumValues,q=h._enumIcons;if(c&&q)for(var w=0;w<c.length;w++)if(h.isEnumEqual(j,c[w]))return q[w];return K}},_45o:function(j){j._87o=function(U,V,M,o,q,Z){if(U){var A=this,T=A._90I,g=eo(1);A._columnLineVisible&&(q-=1),A._rowLineVisible&&(Z-=1),0>=q||0>=Z||(A._90I||(T=A._90I={}),T[V]||(T[V]=new fr),Vq(g,A.tx()+M,A.ty()+o,q,Z),Si(g,U),A._view.insertBefore(g,A._79O),U.onParentAdded&&U.onParentAdded(g),T[V].add(g))}},j._76o=function(){var e=this,I=e._90I;if(I){for(var q in I)I[q].each(function(e){bf(e)});delete e._90I}},j._77o=function(G){var y=this;if(y._90I){var U=y._90I[G];U&&(U.each(function(O){bf(O)}),delete y._90I[G])}}},_47o:function(V){V.getValue=function(S,j){return j.getValue?j.getValue(S,j,this):Th(S,j.getAccessType(),j.getName())},V.setValue=function(Y,d,O){if(d.isEmptiable()||""!==O||(O=K),d.isNullable()||O!=$){var e=this,f=d.getName(),Z=d.getAccessType(),b=d.getValueType();b===Yi&&yf(O)?O=P(O):b===jc&&yf(O)?O=parseFloat(O):b===bh&&yf(O)&&(O="true"===O),e._batchEditable&&d._batchEditable&&e.isSelected(Y)?e.sm().each(function(m){d.setValue?d.setValue(m,d,O,e):Bh(m,Z,f,O)}):d.setValue?d.setValue(Y,d,O,e):Bh(Y,Z,f,O)}},V.setCurrentEditor=function(X){this.endEditing(),this._currentEditor=X,this.redraw()},V.isEditing=function(K,F){var o=this,q=o._currentEditor;if(!q)return!1;if(F){var Z=q.info;return Z?(Z.column||Z.property)===F&&Z.data===K:!1}return!0},V.endEditing=function(){var h=this,T=h._currentEditor,Y=h.getDataModel().getHistoryManager();T&&(delete h._currentEditor,T.commitValue&&T.commitValue(T.info),h.redraw(),Y&&Y.endInteraction())},V.beginEditing=function(k){this.endEditing();var v=this,f=k.column||k.property;if(f.beginEditing)f.beginEditing(k);else{var Z=k.data,a=k.value,A=v.getSelectBackground(Z),s=f.getEnumValues(),V=f.getSlider(),L=f.getColorPicker();if(V){var o=fi(fs.Slider,V);return o.setValue(a),o.getView().onblur=function(){v.endEditing()},o.isInstant()&&(o.onValueChanged=function(){v.setValue(Z,f,o.getValue())}),fh(o,k),void 0}if(L||f.getValueType()===Fg){var c=fi(fs.ColorPicker,L);return c.setValue(a),c.onClosed=function(){v.endEditing()},c.isInstant()&&(c.onValueChanged=function(Y,l){v.setValue(Z,f,l)}),fh(c,k),c.open(),void 0}if(s){if(fs.ComboBox){var h=new fs.ComboBox;h.setValue(a),h.setValues(s),h.setLabels(f.getEnumLabels()),h.setIcons(f.getEnumIcons()),h.setEditable(f.isEnumEditable()),h.setStrict(f.isEnumStrict()),h.setMaxHeight(f.getEnumMaxHeight()),h.onClosed=function(){v.endEditing()},fh(h,k),h.open()}else ui(cg,k,A,s,f);return}var m=f.getValueType();if(m===bh||pi(a))return v.setValue(Z,f,!a),void 0;if(f.getItemEditor()){var B=dh(f.getItemEditor()),i=new B(Z,f,v,k),e=i.getView();return e._17Q=i,i.setValue(a),Jf(e),fh(e,k),i.editBeginning&&i.editBeginning(),void 0}ui("input",k,A,$,f)}}},_44o:function(W){W.init=function(E){var V=this,n=V.th=new xh(E),u=V._view=eo(1);V.tv=V._tableView=E,Si(u,n.getView()),Si(u,E.getView()),n.mp(function(n){n.property===Bi&&V.iv()}),V.iv()},W.getTableView=function(){return this.tv},W.getTableHeader=function(){return this.th},W.getDataModel=function(){return this.tv.dm()},W.getColumnModel=function(){return this.tv.getColumnModel()},W.setColumns=function(B){this.tv.setColumns(B)},W.addColumns=function(z){this.tv.addColumns(z)},W.endEditing=function(){this.tv.endEditing()},W.validateImpl=function(){var B=this,R=B.th,X=Rm(R),w={x:0,y:0,width:B.getWidth(),height:X};Vq(R,w),w.y=X,w.height=V(0,B.getHeight()-X),Vq(B.tv,w)}},ms_vs:function(L){L._41o=function(){return this._29I.height<this._59I},L._43o=function(){var i=this;i._41o()&&(i._58I||(W(function(){i._94O()},os),i.iv()),i._58I=new Date)},L._94O=function(){var t=this;if(t._58I){var D=new Date;D.getTime()-t._58I.getTime()>=os?(delete t._58I,t.iv()):W(function(){t._94O()},os)}},L._93I=function(){var g=this,y=g._27I;if(g._58I||!g._autoHideScrollBar){y||Si(g._79O,y=g._27I=eo());var D=g._29I,n=D.height,c=g._59I,P=g.getScrollBarSize(),s=D.width-P-2,u=n*(-g.ty()/c),q=n*(n/c),d=y.style;c>n?(Oj>q&&(u=u+q/2-Oj/2,0>u&&(u=0),u+Oj>n&&(u=n-Oj),q=Oj),d.visibility=Oh,d.background=g.getScrollBarColor(),d.borderRadius=P/2+$p,Vq(y,s,u,P,q)):d.visibility=jo}else y&&(y.style.visibility=jo)}},ms_hs:function(z){z._40o=function(){return this._29I.width<this._91I},z._42o=function(){var R=this;R._40o()&&(R._95O||(W(function(){R._94I()},os),R.iv()),R._95O=new Date)},z._94I=function(){var S=this;if(S._95O){var Q=new Date;Q.getTime()-S._95O.getTime()>=os?(delete S._95O,S.iv()):W(function(){S._94I()},os)}},z._92I=function(){var r=this,z=r._28I;if(r._95O||!r._autoHideScrollBar){z||Si(r._79O,z=r._28I=eo());var M=r._29I,f=M.width,_=r._91I,g=r.getScrollBarSize(),t=M.height-g-2,E=f*(-r.tx()/_),G=f*(f/_),s=z.style;_>f?(Oj>G&&(E=E+G/2-Oj/2,0>E&&(E=0),E+Oj>f&&(E=f-Oj),G=Oj),s.visibility=Oh,s.background=r.getScrollBarColor(),s.borderRadius=g/2+$p,Vq(z,E,t,G,g)):s.visibility=jo}else z&&(z.style.visibility=jo)}}}),Em(Bn,Bf(16,16,[{type:km,rect:[1,1,14,14],background:Ng},{type:Pm,rect:[1,1,14,14],width:1,color:mj},{type:nr,points:[13,3,7,12,4,8],borderWidth:2,borderColor:"#FFF"}])),Em(Kf,Bf(16,16,{type:Pm,rect:[1,1,14,14],width:1,color:mj})),Em(On,Bf(16,16,[{type:mi,rect:[2,2,12,12],borderWidth:1,borderColor:mj,background:"#FFF"},{type:mi,rect:[4,4,8,8],background:Ng}])),Em(Cj,Bf(16,16,{type:mi,rect:[2,2,12,12],borderWidth:1,borderColor:mj})),hn._15Q=function(X){X._29I=Ch,X._59I=0,X._91I=0,X._5o=function(B){var U=this;U._30I=new fr,U._rows=new fr,U._rowMap={},U._31I=0,U._14I=0,U._view=eo(1),U._canvas=El(U._view),Si(U._view,U._79O=eo()),U.dm(B?B:new hj)},X.getCheckIcon=function(g){var Z=this.sm(),f=Z.co(g);return Z.sg()?Tn(f?On:Cj):Tn(f?Bn:Kf)},X.checkData=function(E){var R=this.sm(),w=R.co(E);R.sg()&&w||(this._32o=1,w?R.rs(E):R.as(E),delete this._32o)},X.getDataAt=function(k){k.target&&(k=this.lp(k));var l=r(k.y/this._rowHeight),G=this._rows;return 0>l||l>=G.size()?$:G.get(l)},X.onDataDoubleClicked=function(){},X.onDataClicked=function(){},X.adjustTranslateX=function(){return 0},X.adjustTranslateY=function(M){var q=this.getHeight()-this._59I;return q>M&&(M=q),M>0?0:B(M)},X.onPropertyChanged=function(Q){var S=this,c=Q.property;Xc[c]?S.ivm():tk[c]||S.redraw(),c===Yb?S._42o():c===Dj&&S._43o()},X.getLabel=function(Z){return Z.toLabel()},X.getLabelFont=function(){return this._labelFont},X.getLabelColor=function(r){var y=this;if(y.isCheckMode()){if(y._focusData===r)return y._labelSelectColor}else if(y.isSelected(r))return y._labelSelectColor;return y._labelColor},X.getStartRowIndex=function(){return this._31I},X.getEndRowIndex=function(){return this._14I},X.getRowDatas=function(){return this._rows},X.getRowIndex=function(p){return this._rowMap[p._id]},X.getRowSize=function(){return this._rows.size()},X.getViewRect=function(){return Nf(this._29I)},X.isVisible=function(g){return this._visibleFunc?this._visibleFunc(g):!0},X.getCurrentSortFunc=function(){return this._sortFunc},X.setDataModel=function(l){var W=this,i=W._dataModel,T=W._3o;i!==l&&(i&&(i.umm(W.handleDataModelChange,W),i.umd(W.handleDataPropertyChange,W),i.umh(W._15o,W),T||i.sm().ums(W._16o,W)),W._dataModel=l,l.mm(W.handleDataModelChange,W),l.md(W.handleDataPropertyChange,W),l.mh(W._15o,W),T?T._21I(l):l.sm().ms(W._16o,W),W.fp("dataModel",i,l))},X.validateModel=function(){var e=this;e._rows.clear(),e._rowMap={},e.buildChildren(e._dataModel._roots);var l=e._rows=e._rows.toList(e.isVisible,e),o=0,s=e.getCurrentSortFunc(),C=l.size();for(s&&l.sort(s);C>o;o++)e._rowMap[l.get(o)._id]=o},X.buildChildren=function(Y){var x=this;Y.each(function(q){x._rows.add(q),x.buildChildren(q._children)})},X.handleDataModelChange=function(){this.ivm()},X.handleDataPropertyChange=function(N){"parent"===N.property?this.ivm():this.invalidateData(N.data)},X._15o=function(){this.ivm()},X._16o=function(S){S.datas.each(this.invalidateData,this),this.onSelectionChanged(S)},X.onSelectionChanged=function(U){var C=this,y=C.sm();!C.isAutoMakeVisible()||1!==y.size()||"set"!==U.kind&&"append"!==U.kind||C._32o||C.makeVisible(y.ld())},X.makeVisible=function(T){T&&(this._23I=T,this.iv())},X.scrollToIndex=function(C){var c=this,f=c._29I,I=f.height,w=c._rowHeight,T=w*C;C>=0&&C<c._rows.size()&&I>0&&(T+w>f.y+I?c.ty(-T+I-w):T<f.y&&c.ty(-T))},X.ivm=function(){this.invalidateModel()},X.invalidateModel=function(){var O=this;O._96I||(O._96I=1,O._32I=1,delete O._24I,O.iv())},X.redraw=function(){var d=this;d._32I||(d._32I=1,delete d._24I,d.iv())},X.invalidateData=function(G){var U=this;f?U.redraw():U._32I||(U._24I||(U._24I={}),U._24I[G._id]=G,U.iv())},X.getFocusData=function(){return this._focusData},X.setFocusDataById=function(J){this.setFocusData(this.dm().getDataById(J))},X.setFocusData=function(f){var G=this,v=G._focusData;v!==f&&(G._focusData=f,G.fp("focusData",v,f),v&&G.invalidateData(v),f&&(G.invalidateData(f),G.isAutoMakeVisible()&&G.makeVisible(f)))},X.drawRowBackground=function(N,D,F,Y,k,A,x){var q=this,Z=q.isCheckMode();(D===q._focusData&&Z||F&&!Z)&&Sm(N,Y,k,A,x,q.getSelectBackground(D))},X.drawData=function(E,f,j){var T=this,F=T._rowHeight,S=F*j,g=T._29I,_=g.x,R=g.width;E.save(),E.beginPath(),E.rect(_,S,R,F),E.clip(),T._87o(T.drawRow(E,f,T.isSelected(f),_,S,R,F),j,_,S,R,F),E.restore(),T._rowLineVisible&&Sm(E,_,S+F-1,R,1,T._rowLineColor)},X._12I=function(J){var P=this,L=P._31I,h=P._29I,w=h.x,o=h.y,c=h.width,n=h.height;for(J.beginPath(),J.rect(w,o,c,n),J.clip(),J.clearRect(w,o,c,n),P._76o(),P._93db(J);L<P._14I;L++)P.drawData(J,P._rows.get(L),L);P._92db(J)},X._13I=function(T){for(var B,J=this,g=J._rowHeight,p=J._29I,q=p.x,E=p.width,K=J._31I,N=J._30I;K<J._14I;K++)B=J._rows.get(K),J._24I[B._id]&&N.add({data:B,index:K});N.isEmpty()||(T.beginPath(),N.each(function(Z){T.rect(q,Z.index*g,E,g)}),T.clip(),N.each(function(e){T.clearRect(q,e.index*g,E,g)}),N.each(function(x){J._77o(x.index)}),J._93db(T),N.each(function(t){J.drawData(T,t.data,t.index)}),J._92db(T),N.clear())},X.validateImpl=function(){var N=this,U=N._canvas,m=N.getWidth(),E=N.getHeight(),h=N._rowHeight,X=N._32I;(m!==U.clientWidth||E!==U.clientHeight)&&(Kp(U,m,E),X=1);var a=H&&!s;N._96I&&!a&&N.validateModel();var I=N._29I,b={x:-N.tx(),y:-N.ty(),width:m,height:E},i=N._rows.size(),v=dk(U),Z=N._23I;X||wf(b,I)||(X=1),N._29I=b,N._59I=i*h,N._31I=r(b.y/h),N._14I=j((b.y+b.height)/h),N._31I<0&&(N._31I=0),N._14I>i&&(N._14I=i),N._99I&&X&&N._99I(),vo(v,N.tx(),N.ty(),1),X?N._12I(v):N._24I&&N._13I(v),N._93I(),N._92I(),v.restore(),N._32I=N._24I=N._96I=$,Z&&(N.scrollToIndex(N.getRowIndex(Z)),delete N._23I),N.tx(N.tx()),N.ty(N.ty())}},hn._48o=function(U){U._rootVisible=!0,U._rootData=$,U._35o=function(){this._expandMap={},this._levelMap={}},U.validateModel=function(){var J=this,w=J._rootData;J._rows.clear(),J._levelMap={},J._rowMap={},J._currentLevel=0,w?J._rootVisible?J.isVisible(w)&&J.buildData(w):J.buildChildren(w):J.buildChildren(),delete J._currentLevel},U.buildData=function(n){var Z=this,B=n._id,h=Z._rows;Z._rowMap[B]=h.size(),h.add(n),Z._levelMap[B]=Z._currentLevel,Z.isExpanded(n)&&(Z._currentLevel++,Z.buildChildren(n),Z._currentLevel--)},U.buildChildren=function(J){var k=this,I=J?J._children:k._dataModel._roots,h=k.getCurrentSortFunc();h&&k.isChildrenSortable(J)?I.toList(k.isVisible,k).sort(h).each(k.buildData,k):I.each(function(s){k.isVisible(s)&&k.buildData(s)})},U.getLevel=function(p){return this._levelMap[p._id]},U.getToggleIcon=function(p){var r=this,_=r._loader,A=r._collapseIcon;return _&&!_.isLoaded(p)?A:p.hasChildren()?r.isExpanded(p)?r._expandIcon:A:$},U.isCheckMode=function(){return this._checkMode!=$},U.isChildrenSortable=function(){return!0},U.handleDataModelChange=function(T){var s=this;T.kind===tm?delete s._expandMap[T.data._id]:T.kind===Hh&&(s._expandMap={}),s.ivm()},U.toggle=function(K){var _=this;_.isExpanded(K)?_.collapse(K):_.expand(K)},U.isExpanded=function(G){return 1===this._expandMap[G._id]},U.expand=function(V){var p=this,S=p._loader;p.isExpanded(V)||(S&&!S.isLoaded(V)&&S.load(V),p._expandMap[V._id]=1,p.ivm(),p.onExpanded(V))},U.onExpanded=function(){},U.collapse=function(m){var P=this;P.isExpanded(m)&&(delete P._expandMap[m._id],P.ivm(),P.onCollapsed(m))},U.onCollapsed=function(){},U.expandAll=function(){var x=this;x._dataModel.each(function(N){N.hasChildren()&&(x._expandMap[N._id]=1)}),x.ivm()},U.collapseAll=function(){this._expandMap={},this.ivm()},U.makeVisible=function(W){if(W){var m=this;if(!m._rootData||W.isDescendantOf(m._rootData)){for(var B=W._parent;B;)m.expand(B),B=B._parent;m._23I=W,m.iv()}}},U.checkData=function(n){var k,x=this,B=x._checkMode,v=x.sm(),_=v.co(n);if(!v.sg()||!_){if(x._32o=1,B===I)_?v.rs(n):v.as(n);else if(B===fm)k=new fr(n),k.addAll(n._children);else if("descendant"===B)k=new fr,el(n,k);else if("all"===B&&(k=new fr,el(n,k),!_))for(var Z=n._parent;Z;)k.add(Z),Z=Z._parent;k&&(_?v.rs(k):v.as(k)),delete x._32o}},U._97I=function(X,i,A,$,o,c,Z){var q=this,Q=q._indent,L=q._levelMap[i._id],h=q.getIconWidth(i),l=Tn(q.getToggleIcon(i));l?($+=Q*L,Mp(X,l,$+Q/2,o+Z/2,i,q),$+=Q):$+=Q*(L+1),q._checkMode&&(Mp(X,q.getCheckIcon(i),$+Q/2,o+Z/2,i,q),$+=Q),q.drawIcon(X,i,$,o,h,Z),q.drawLabel(X,i,$+h,o,Z)}},hn._14Q=function(A){A.getIcon=function(m){return m.getIcon()},A.getIconWidth=function(t){return this.getIcon(t)?this._indent:0},A.drawIcon=function(L,T,R,y,P,l){if(P){var s=this,V=s.getBodyColor(T),Y=Tn(s.getIcon(T),V);Y&&(l-=s.isRowLineVisible()?1:0,ai(L,Y,dn,R,y,P,l,T,s,V),ng(L,s.getBorderColor(T),R,y,P,l))}},A.drawLabel=function(v,z,f,i,T){var g=this;Fl(v,g.getLabel(z),g.getLabelFont(z),g.getLabelColor(z),f,i,0,T)}},hn._50o=function(t){t._98I=function(){var M=this,x=M._39o=new hj;M._60I=new fr,x.mm(M._17o,M),x.md(M._18o,M),x.mh(M._19o,M)},t.setColumns=function(O){this._39o.clear(),this.addColumns(O)},t.addColumns=function(I){var l=this._39o;I.forEach(function(Q){if(!(Q instanceof to)){var E=dh(Q.className);Q=fi(E?E:to,Q)}l.add(Q)})},t.onColumnClicked=function(){},t.onCheckColumnClicked=function(){},t._3Q=function(k){for(var Q,E=0,A=this._60I,I=A.size();I>E;E++)if(Q=A.get(E),Q.column===k)return Q;return $},t.getColumnAt=function(M){var E=this._4Q(M);return E?E.column:$},t._4Q=function(A){for(var b=this,w=A.target?b.lp(A).x:A.x,I=b._60I,j=0;j<I.size();j++){var v=I.get(j),Y=v.startX;if(w>=Y&&w<Y+v.column.getWidth())return v}return $},t.getToolTip=function(_){var x=this,i=x.getDataAt(_),M=x.getColumnAt(_);return i&&M?M.getToolTip(i,x):$},t.adjustTranslateX=function($){var l=this.getWidth()-this._91I;return l>$&&($=l),$>0?0:B($)},t._99I=function(){var E=this,x=E._29I,D=E._60I;D.clear(),E._91I=0,E._39o._roots.each(function(l){if(l.isVisible()){var u=E._91I+l.getWidth();E._91I<=x.x+x.width&&u>=x.x&&D.add({column:l,startX:E._91I}),E._91I=u}})},t.drawData=function(c,h,v){var Q=this,X=Q._rowHeight,A=X*v,Y=Q.isSelected(h),g=Q._29I,V=g.x,d=g.width;Q.drawRowBackground(c,h,Y,V,A,d,X),Q._60I.each(function(y){var r=y.column,H=y.startX,B=r.getWidth();B>0&&!Q.isEditing(h,r)&&(c.save(),c.beginPath(),c.rect(H,A,B,X),c.clip(),Q._87o(Q.drawCell(c,h,Y,r,H,A,B,X),v,H,A,B,X),Q._columnLineVisible&&Sm(c,H+B-1,A,1,X,Q._columnLineColor),c.restore())}),Q._rowLineVisible&&Sm(c,V,A+X-1,d,1,Q._rowLineColor)},t.drawCell=function(B,d,T,l,Q,H,$,G){var U=this;if(l.drawCell)return l.drawCell(B,d,T,l,Q,H,$,G,U);var g=U.getValue(d,l);Dd(B,g,l,U.getLabelFont(d,l,g),U.getLabelColor(d,l,g),Q,H,$,G,d,U)},t.getColumnModel=function(){return this._39o},t._17o=function(){this.redraw()},t._18o=function(G){var y=this;G.data===y._sortColumn&&zk[G.property]?y.ivm():(y._42o(),y.redraw())},t._19o=function(){this.redraw()},t.getCurrentSortFunc=function(){var p=this,M=p._sortColumn;if(M&&M.isSortable()){var U=M.getSortFunc(),t=di===M.getSortOrder()?1:-1;return U||(U=Pe),function(A,x){return U.call(p,p.getValue(A,M),p.getValue(x,M),A,x)*t}}return p._sortFunc},t.isCellEditable=function(f,z){return z.isEditable()&&this.isEditable()},t._37O=function(o,t){if(Ni(t))for(var i=this,v=i.lp(t),f=i._60I,S=i._rowHeight,B=i._29I,r=B.x,A=B.y,z=B.width,e=B.height,y=0;y<f.size();y++){var b=f.get(y),h=b.startX,Y=b.column,q=Y.getWidth();if(Y!==i._31o&&Y!==i._4o&&i.isCellEditable(o,Y)&&v.x>=h&&v.x<h+q){var x={x:h,y:i.getRowIndex(o)*S,width:q,height:S},H={x:x.x+i.tx(),y:x.y+i.ty(),width:x.width,height:x.height},Q=0,J=0;return x.x<r?Q=x.x-r:x.x+x.width>r+z&&(Q=x.x+x.width-r-z),Q&&(i.tx(i.tx()-Q),H.x-=Q),x.y<A?J=x.y-A:x.y+S>A+e&&(J=x.y+S-A-e),J&&(i.ty(i.ty()-J),H.y-=J),i.beginEditing({data:o,column:Y,value:i.getValue(o,Y),event:t,rect:x,editorRect:H,view:i}),void 0}}}},fs.BaseItemEditor=function(f,G,d,g){this._data=f,this._column=G,this._master=d,this._editInfo=g},pe("BaseItemEditor",x,{ms_ac:["data","column","master","editInfo"],editBeginning:function(){},getView:function(){},getValue:function(){},setValue:function(){}});var Gl=X.Tab=function(){Cb(Gl,this)};Lo("Tab",hh,{ms_ac:["view","closable","disabled"],_icon:$,_closable:!1,_disabled:!1,setParent:qe});var to=X.Column=function(){Cb(to,this)};Lo("Column",hh,{_46o:1,ms_ac:["accessType","valueType",Oh,Go,ub,Sn,"align",Fg,"sortOrder",zf,"sortable","nullable","emptiable","slider","colorPicker","itemEditor"],_visible:!0,_width:80,_sortOrder:di,_sortFunc:$,_sortable:!0,setWidth:function(J){16>J&&(J=16);var g=this._width;this._width=J,this.fp(Sn,g,J)},getToolTip:function(Z,b){return this.formatValue(b.getValue(Z,this))}});var Sl=X.Property=function(){Cb(Sl,this)};Lo("Property",hh,{_46o:1,ms_ac:["accessType","valueType",Go,ub,"categoryName",Fg,"align","nullable","emptiable","slider","itemEditor","colorPicker"],_categoryName:$,getToolTip:function(A,L,B){var s=this;return L?s.formatValue(B.getValue(A,s)):B.getPropertyName(s)}}),fs.AccordionView=function(){var p=this;p._20o={},p._21o=new fr,p._10o=$,p._9o=$,p._11o=$,p._view=eo(),p.iv()},pe("AccordionView",x,{ms_v:1,ms_fire:1,ms_ac:[Vj,wb,"titleHeight",vh,dl,"titleBackground","selectWidth",Rq,"orientation","separatorColor"],_expandIcon:O.accordionViewExpandIcon,_collapseIcon:O.accordionViewCollapseIcon,_titleHeight:kc,_labelColor:O.accordionViewLabelColor,_labelFont:O.accordionViewLabelFont,_titleBackground:O.accordionViewTitleBackground,_selectBackground:O.accordionViewSelectBackground,_selectWidth:O.accordionViewSelectWidth,_orientation:"v",_separatorColor:O.accordionViewSeparatorColor,onPropertyChanged:function(){this.iv()},getView:function(){return this._view},getTitles:function(){return this._21o},getCurrentTitle:function(){return this._10o},add:function(V,I,o,W){var y=this,l=eo();if(y._20o[V])throw V+" already exists";l.onmousedown=In,l.style.cursor=Ar,l.addEventListener(_?rr:Nq,function(w){In(w)},!1),l.addEventListener(_?Fe:hi,function(l){In(l),Ni(l)&&(y._10o===V?y.collapse():y.expand(V))},!1),Si(y._view,l),y._20o[V]={content:I,div:l,canvas:El(l),icon:W},y._21o.add(V),o&&y.expand(V),y.iv()},remove:function(V){var w=this,G=w._20o[V];G&&(bf(G.div),delete w._20o[V],w._21o.remove(V),w.iv())},clear:function(){var b=this;b._20o={},b._21o.clear(),b.iv()},isExpanded:function(D){return this._10o===D},expand:function(e){var Q=this;Q._20o[e]&&Q._10o!==e&&(Q._10o=e,Q.onExpanded(e),Q.iv())},onExpanded:function(){},collapse:function(){var w=this;w._10o&&(w.onCollapsed(w._10o),delete w._10o,w.iv())},onCollapsed:function(){},initCanvas:function(F,j,z){Kp(F,j,z);var Z=dk(F);return vo(Z,0,0,1),Z.clearRect(0,0,j,z),Z},drawTitle:function($,A,b,m,Y){var p=this,f=Tn(Y.icon),d=p.isExpanded(A),v=p._titleHeight,g=p._titleBackground,R=p._selectWidth,W=p._separatorColor,L=Tn(d?p._expandIcon:p._collapseIcon),D=R+4;Sm($,0,0,b,m,g),d&&R&&Sm($,0,0,R,m,p._selectBackground),(d||p._21o.get(p._21o.size()-1)!==A)&&Sm($,0,m-1,b,1,W?W:Qc(g)),f&&(Mp($,f,D+ud(f)/2,v/2),D+=ud(f)+2),Fl($,A,p.getLabelFont(A),p.getLabelColor(A),D,0,0,v),L&&Mp($,L,b-ud(L)/2-4,v/2)},validateImpl:function(){var i=this,w=i._view,Z=0,M=0,x=i.getWidth(),u=i.getHeight(),j=i._titleHeight,_=i._21o.size()*j,L=i._11o,e=i._9o;delete i._11o,delete i._9o,i._21o.each(function(P){var m,q,v=i._20o[P],N=v.content,I=i._10o===P;dd(i)?(Vq(v.div,Z,0,j,u),m=i.initCanvas(v.canvas,j,u),Jh(m,0,u),Nk(m,-l),i.drawTitle(m,P,u,j,v),m.restore(),I?(q=V(0,x-_),N&&(i._11o=N,i._9o=sj(N),Vq(N,Z+j,0,q,u)),Z+=j+q):Z+=j):(Vq(v.div,0,M,x,j),m=i.initCanvas(v.canvas,x,j),i.drawTitle(m,P,x,j,v),m.restore(),I?(q=V(0,u-_),N&&(i._11o=N,i._9o=sj(N),Vq(N,0,M+j,x,q)),M+=j+q):M+=j)});var c=i._9o;L&&L!==i._11o&&L.endEditing&&L.endEditing(),c&&c!==e&&Si(w,c),e&&e!==c&&bf(e)}}),fs.SplitView=function(d,F,n,U){var P=this,r=P._dividerDiv=eo(),x=P._60O=El(),c=P._61O=El(),L=x.style,Q=c.style;P._view=eo(1),Si(P._view,r),L.msTouchAction=fg,L.pointerEvents=fg,L.cursor=Ar,Q.msTouchAction=fg,Q.pointerEvents=fg,Q.cursor=Ar,d&&P.setLeftView(d),F&&P.setRightView(F),n&&P.setOrientation(n),U!=$&&P.setPosition(U),P.setStatus(Vn),new Mi(P)},pe("SplitView",x,{ms_v:1,ms_fire:1,ms_ac:["dividerSize","dividerBackground","toggleIcon","togglable","dragOpacity","orientation","draggable","status"],_position:.5,_togglable:!0,_orientation:"h",_draggable:!0,_dividerSize:O.splitViewDividerSize,_dividerBackground:O.splitViewDividerBackground,_dragOpacity:O.splitViewDragOpacity,_toggleIcon:O.splitViewToggleIcon,onPropertyChanged:function(){this.iv()},getDividerDiv:function(){return this._dividerDiv},getPosition:function(){return this._position},setPosition:function(j,a){var T=this,E=T._position;isNaN(j)||(a||(T._82O=0>j?-1:j>1?1:0),T._position=j,T.fp(Ec,E,j))},getLeftView:function(){return this._leftView},setLeftView:function(d){var g=this,E=g._leftView,s=g._view;if(g._leftView!==d){if(E&&E!==g._rightView){var P=sj(E);P.parentNode===s&&bf(P)}if(g._leftView=d,d){var m=sj(d);m.parentNode!==s&&s.insertBefore(m,g._dividerDiv)}g.fp("leftView",E,d)}},getRightView:function(){return this._rightView},setRightView:function(X){var m=this,l=m._rightView,M=m._view;if(m._rightView!==X){if(l&&l!==m._leftView){var e=sj(l);e.parentNode===M&&bf(e)}if(m._rightView=X,X){var N=sj(X);N.parentNode!==M&&M.insertBefore(N,m._dividerDiv)}m.fp("rightView",l,X)}},validateImpl:function(){var t=this,F=t._draggable,f=t._position,W=t.getWidth(),O=t.getHeight(),j=t._dividerSize,b=t._dividerBackground,P=_?18:8,Y=t._dividerDiv,x=t._82O,q=t._60O,g=t._61O,c=t._toggleIcon,s=t._status,o=Y.style,i=null,C=_?20:4,Z=c.comps[0];j>=P||0===j?t._coverDiv&&(bf(t._coverDiv),delete t._coverDiv):t._coverDiv||(t._coverDiv=eo(),A&&(t._coverDiv.style.background=wl),Si(Y,t._coverDiv)),t._togglable?q.parentNode||(Si(Y,q),Si(Y,g)):(bf(q),bf(g));var $=t._coverDiv,H=t._leftView,S=t._rightView;if(dd(t)){if(j>W&&(j=W),s===Vn)if(1===x)var m=f,G=V(0,W-j-m);else-1===x?(G=-f,m=V(0,W-j-G)):(m=B((W-j)*f),G=V(0,W-j-m));else"cl"===s?(m=0,G=V(0,W-j)):"cr"===s&&(G=0,m=V(0,W-j));H&&Vq(H,0,0,m,O),S&&Vq(S,m+j,0,G,O),Vq(Y,m,0,j,O),t._22o=m,$&&(Vq($,j/2-P/2,0,P,O),$.style.cursor=F?Kn:""),Y.style.cursor=F?Kn:"";var K=Y.clientHeight/2,k=Y.clientWidth;Kp(q,k,k),Vq(q,0,K-k-C,k,k),i=dk(q),vo(i,0,0,1),Z.rotation=-l,fb(i,c,0,0,k,k),i.restore(),Kp(g,k,k),Vq(g,0,K+C,k,k),i=dk(g),vo(i,0,0,1),Z.rotation=l,fb(i,c,0,0,k,k),i.restore()}else{if(j>O&&(j=O),s===Vn)if(1===x)var v=f,T=V(0,O-j-v);else-1===x?(T=-f,v=V(0,O-j-T)):(v=B((O-j)*f),T=V(0,O-j-v));else"cl"===s?(v=0,T=V(0,O-j)):"cr"===s&&(T=0,v=V(0,O-j));H&&Vq(H,0,0,W,v),S&&Vq(S,0,v+j,W,T),Vq(Y,0,v,W,j),t._22o=v,$&&(Vq($,0,j/2-P/2,W,P),$.style.cursor=F?pm:""),o.cursor=F?pm:"";var R=Y.clientWidth/2,k=Y.clientHeight;Kp(q,k,k),Vq(q,R-k-C,0,k,k),i=dk(q),vo(i,0,0,1),Z.rotation=0,fb(i,c,0,0,k,k),i.restore(),Kp(g,k,k),Vq(g,R+C,0,k,k),i=dk(g),vo(i,0,0,1),Z.rotation=L,fb(i,c,0,0,k,k),i.restore()}o.background=b}});var Mi=function(H){this.sv=H,this.addListeners()};de(Mi,x,{ms_listener:1,getView:function(){return this.sv.getView()},handle_touchstart:function(X){var K=this,z=K.sv,L=z._dividerDiv,C=z._60O,n=z._61O,m=z._status,T=X.target;if(T===C)m===Vn?z.setStatus("cl"):"cr"===m&&z.setStatus(Vn);else if(T===n)m===Vn?z.setStatus("cr"):"cl"===m&&z.setStatus(Vn);else if(qk(X)&&(T===L||T===z._coverDiv)&&(In(X),z.isDraggable())){K.resizeDiv=eo();var p=K.resizeDiv.style,v=L.style,U=z.getLeftView(),P=z.getRightView();K._maskViews=[],[U,P].forEach(function(I){I=I.getView?I.getView():I;var N=eo(),Y=N.style;Y.left=I.style.left,Y.top=I.style.top,Y.width=I.offsetWidth+"px",Y.height=I.offsetHeight+"px",z.getView().appendChild(N),K._maskViews.push(N)}),p.left=v.left,p.top=v.top,p.width=v.width,p.height=v.height,p.opacity=z.getDragOpacity(),p.background=z.getDividerBackground(),K._85o=K._86o=dd(z)?lc(X).x:lc(X).y,Si(K.getView(),K.resizeDiv),K._clientPoint=lc(X),vq(K,X)}},handleWindowTouchMove:function(p){if(qk(p)){var _=this,k=_.sv,n=k._dividerSize,R=_.resizeDiv.style,Y=k.getWidth(),J=k.getHeight(),U=k._22o-_._86o;dd(k)?(_._85o=lc(p).x,U+=_._85o,U>Y-n&&(U=Y-n),0>U&&(U=0),R.left=U+$p):(_._85o=lc(p).y,U+=_._85o,U>J-n&&(U=J-n),0>U&&(U=0),R.top=U+$p)}},handleWindowTouchEnd:function(l){var h=this,R=h.sv,j=R._22o-h._86o+h._85o,J=R._dividerSize,Z=dd(R)?R.getWidth():R.getHeight(),L=R._82O,G=Ym(h._clientPoint,lc(l));G>1&&(R.setStatus(Vn),0>j&&(j=0),j>Z-J&&(j=Z-J),Z!==J&&(1===L?R.setPosition(j,1):-1===L?R.setPosition(j-Z+J,1):R.setPosition(j/(Z-J),1))),h._maskViews&&h._maskViews.forEach(function(p){bf(p)}),bf(h.resizeDiv),h.resizeDiv=h._85o=h._clientPoint=$},handle_mousedown:function(M){Ni(M)&&this.handle_touchstart(M)},handleWindowMouseMove:function(Y){this.handleWindowTouchMove(Y)},handleWindowMouseUp:function(E){this.handleWindowTouchEnd(E)}}),fs.TabView=function(){var W=this,V=W._view=eo(1),Y=W._91O=eo(1),y=W._tabModel=new hj,g=y.sm(),u=W.invalidate;W._7o=new fr,W._canvas=El(Y),Si(V,Y),Si(V,W._92O=eo(1)),g.setSelectionMode(D),g.ms(u,W),y.mm(u,W),y.md(u,W),y.mh(u,W),new np(W),W.iv()},pe("TabView",x,{ms_v:1,ms_fire:1,ms_tx:1,ms_ty:1,ms_lp:1,ms_ac:["movable","tabGap","tabHeight","tabPosition",vh,dl,"tabBackground","selectWidth",Rq,"moveBackground","insertColor"],_tabPosition:tn,_tabHeight:kc,_tabGap:O.tabViewTabGap,_labelColor:O.tabViewLabelColor,_labelFont:O.tabViewLabelFont,_tabBackground:O.tabViewTabBackground,_selectWidth:O.tabViewSelectWidth,_selectBackground:O.tabViewSelectBackground,_moveBackground:O.tabViewMoveBackground,_insertColor:O.tabViewInsertColor,_movable:!0,getContentDiv:function(){return this._92O},getTitleDiv:function(){return this._91O},getTabModel:function(){return this._tabModel},add:function(L,c,I){var U=new Gl,V=this._tabModel;return U.setName(L),U.setView(c),V.add(U),I&&V.sm().ss(U),U},getLabel:function(_){return _.toLabel()},onPropertyChanged:function(){this.iv()},_7Q:function(l){this._23o=l,this.iv()},get:function(o){var H=this,q=H._tabModel;if(hf(o))return q._roots.get(o);if(yf(o)){var b;return q.each(function(Y){o===H.getLabel(Y)&&(b=Y)}),b}return o instanceof Gl?o:$},select:function(c){this._tabModel.sm().ss(this.get(c))},remove:function(W){var C=this;if(W=C.get(W)){var t=C._tabModel,g=t._roots.indexOf(W);C._tabModel.remove(W),C._12Q(--g)}},getCurrentTab:function(){return this._8o},hideTabView:function(m,U){U.parentNode===this._92O&&(zp(U)?(U.style.display=Oc,U._tab_=m):bf(U),br())},showTabView:function(S,P){zp(P)&&(P.style.display="block",P._tab_=S),P.parentNode!==this._92O&&(Si(this._92O,P),br())},_24o:function(){var V,J=this,I=J._8o,P=J._9o,d=J._tabModel.sm().ld();d&&(V=sj(d.getView())),V!==P&&(P&&(I.getView().endEditing&&I.getView().endEditing(),J.hideTabView(I,P)),V&&J.showTabView(d,V)),J._8o=d,J._9o=V,I!==d&&J.onTabChanged(I,d)},onTabChanged:function(){},onTabClosed:function(c,m){this._12Q(--m)},_12Q:function(N){var d=this,H=d._tabModel,P=H.size();if(P&&!H.sm().ld()){N==$&&(N=0),N>=P&&(N=P-1),0>N&&(N=0);for(var M=N;M>=0;M--){var b=d.get(M);if(!b.isDisabled())return d.select(b),b}for(M=N+1;P>M;M++)if(b=d.get(M),!b.isDisabled())return d.select(b),b}},_9Q:function(o){var b=4,Z=Tn(o.getIcon());Z&&(b+=ud(Z,o)+4);var N=this.getLabel(o);return N&&(b+=Ul(this.getLabelFont(o),N).width+4),o.isClosable()&&(b+=10),b},_10Q:function(v,T,I,D,C,r,S){var K,n=this,i=n._tabPosition,b=I+4,t=n._selectWidth,c=Tn(T.getIcon()),f=T.isDisabled(),x=n.getLabelColor(T),z=n.getLabelFont(T),w=n.getLabel(T),k=n._selectBackground,g=i===Zd+"-vertical",e=i===Aj+"-vertical";(g||e)&&(b=D+4),f&&(v.globalAlpha=ed),Sm(v,I,D,C,r,S),T===n._8o&&t&&(i===tn?Sm(v,I,D+r-t,C,t,k):i===Zd?Sm(v,I+C-t,D,t,r,k):i===Aj?Sm(v,I,D,t,r,k):g?Sm(v,I+C-t,D,t,r,k):e?Sm(v,I,D,t,r,k):Sm(v,I,D,C,t,k));var W=C/2;if(g&&(Jh(v,W,D+r/2),Nk(v,L),Jh(v,-W,-D-r/2)),c){var X=Pq(c,T),V=ud(c,T);if(g||e){var _=I+C/2,P=b+X/2;Jh(v,_,P),Nk(v,l),Jh(v,-_,-P),Mp(v,c,I+C/2,b+X/2,T,n),Jh(v,_,P),Nk(v,-l),Jh(v,-_,-P),b+=X+4}else Mp(v,c,b+V/2,D+r/2,T,n),b+=V+4}return g||e?(Jh(v,C/2,b+C/2),Nk(v,l),Jh(v,-C/2,-b-C/2),Fl(v,w,z,x,I,b,r,C),Jh(v,C/2,b+C/2),Nk(v,-l),Jh(v,-C/2,-b-C/2)):Fl(v,w,z,x,b,D,C,r),g&&(Jh(v,W,D+r/2),Nk(v,-L),Jh(v,-W,-D-r/2)),T.isClosable()&&(v.strokeStyle=x,v.lineWidth=1,v.beginPath(),e?(v.moveTo(I+C-10,D+r-4),v.lineTo(I+C-4,D+r-10),v.moveTo(I+C-4,D+r-4),v.lineTo(I+C-10,D+r-10),v.stroke(),K={x:I+C-12,y:D+r-12,width:12,height:12}):(v.moveTo(I+C-10,D+4),v.lineTo(I+C-4,D+10),v.moveTo(I+C-4,D+4),v.lineTo(I+C-10,D+10),v.stroke(),K={x:I+C-12,y:D,width:12,height:12})),f&&(v.globalAlpha=1),K},validateImpl:function(){var y=this;y._24o();var v,B=y._canvas,H=y._tabPosition,m=y._91O,g=y._92O,X=y._tabModel,e=y.getWidth(),w=y.getHeight(),r=y._tabHeight,T=y._7o,Q=y._tabGap,z=H===tn,S=H===Zd,i=H===sb,n=H===Aj,s=H===Zd+"-vertical",d=H===Aj+"-vertical",p=y._23o,l=0;if((S||n)&&X._roots.each(function(L){l=V(y._9Q(L),l)}),z?(Vq(m,0,0,e,r),v={x:0,y:r,width:e,height:V(0,w-r)}):S?(Vq(m,0,0,l,w),v={x:l,y:0,width:V(0,e-l),height:w}):n?(Vq(m,e-l,0,l,w),v={x:0,y:0,width:V(0,e-l),height:w}):s?(Vq(m,0,0,r,w),v={x:r,y:0,width:V(0,e-r),height:w}):d?(Vq(m,e-r,0,r,w),v={x:0,y:0,width:V(0,e-r),height:w}):(Vq(m,0,w-r,e,r),v={x:0,y:0,width:e,height:V(0,w-r)}),Vq(g,v),s||d){y._9o&&(v.x=0,Vq(y._8o.getView(),v)),Kp(B,r,w);var k=dk(B),R=0;if(vo(k,0,y.ty(),1),k.clearRect(0,0,r,w),T.clear(),X._roots.each(function(N){var L,w=y._9Q(N);p&&p.tab===N||(L=y._10Q(k,N,0,R,r,w,y._tabBackground),L&&d&&(L.x=e-12)),T.add({_75o:L,tab:N,startY:R,endY:R+w,height:w}),R+=w+Q}),y._23Q=V(0,R-Q),p){var E=p.position;y._10Q(k,p.tab,0,p.startY,r,p.height,y._moveBackground),Sm(k,0,E,r,1,y._insertColor)}k.restore(),y.ty(y.ty())}else if(S||n){y._9o&&(v.x=0,Vq(y._8o.getView(),v)),Kp(B,l,w);var k=dk(B),R=0;if(vo(k,0,y.ty(),1),k.clearRect(0,0,l,w),T.clear(),X._roots.each(function(S){var c;p&&p.tab===S||(c=y._10Q(k,S,0,R,l,r,y._tabBackground),c&&n&&(c.x=e-12)),T.add({_75o:c,tab:S,startY:R,endY:R+r,height:r}),R+=r+Q}),y._23Q=V(0,R-Q),p){var E=p.position;y._10Q(k,p.tab,0,p.startY,l,p.height,y._moveBackground),Sm(k,0,E,l,1,y._insertColor)}k.restore(),y.ty(y.ty())}else{y._9o&&(v.y=0,Vq(y._8o.getView(),v)),Kp(B,e,r);var k=dk(B),A=0;if(vo(k,y.tx(),0,1),k.clearRect(0,0,e,r),T.clear(),X._roots.each(function(Y){var C,S=y._9Q(Y);p&&p.tab===Y||(C=y._10Q(k,Y,A,0,S,r,y._tabBackground),C&&i&&(C.y=w-r)),T.add({_75o:C,tab:Y,startX:A,endX:A+S,width:S}),A+=S+Q}),y._64I=V(0,A-Q),p){var E=p.position;y._10Q(k,p.tab,p.startX,0,p.width,r,y._moveBackground),Lp(k,y._insertColor,E,0,r)}k.restore(),y.tx(y.tx())}for(var a=[],O=g.children,o=0;o<O.length;o++){var x=O[o],q=x._tab_;q&&!X.contains(q)&&a.push(x)}a.forEach(function(D){g.removeChild(D)})}});var np=function(b){this.tv=b,this.addListeners()};de(np,x,{ms_listener:1,getView:function(){return this.tv._91O},handle_mousewheel:function(x){this.handleScroll(x,10*(x.wheelDelta/40))},handle_DOMMouseScroll:function(K){this.handleScroll(K,10*-K.detail)},handleScroll:function(y,b){In(y);var U=this.tv,I=U._tabPosition;!U._40o()||I!==tn&&I!==sb||U.tx(this.tv.tx()+b),!U._41o()||I!==Zd&&I!==Aj&&I!==Zd+"-vertical"&&I!==Aj+"-vertical"||U.ty(this.tv.ty()+b)
    },_8Q:function(o){var x,W,q=this.tv,T=q._tabPosition,Q=q._7o;if(T===tn||T===sb){var H=q.lp(o).x;for(x=0;x<Q.size();x++)if(W=Q.get(x),W.startX<=H&&H<=W.endX)return W}else if(T===Zd||T===Aj||T===Zd+"-vertical"||T===Aj+"-vertical"){var Z=q.lp(o).y;for(x=0;x<Q.size();x++)if(W=Q.get(x),W.startY<=Z&&Z<=W.endY)return W}return $},isClickable:function(R){var r=this.tv,j=r._tabPosition,O=this._73o=this._8Q(R);return!r._40o()||j!==tn&&j!==sb?!r._41o()||j!==Zd&&j!==Aj&&j!==Zd+"-vertical"&&j!==Aj+"-vertical"?O&&(!O.tab.isDisabled()||r.isMovable()):!0:!0},handle_mousemove:function(z){var V=this;Xp?V._74o=V._8Q(z):V.getView().style.cursor=V.isClickable(z)?Ar:""},handle_mousedown:function(n){this.handle_mousemove(n),this.handle_touchstart(n)},handle_touchstart:function(h){var i=this,A=i.tv,T=A._tabPosition;In(h),i.isClickable(h)&&(T===tn||T===sb?(i.x=lc(h).x,i.lp=A.lp(h),i.tx=A.tx()):(i.y=lc(h).y,i.lp=A.lp(h),i.ty=A.ty()),vq(i,h))},handleWindowMouseMove:function(D){this.handleWindowTouchMove(D)},handleWindowTouchMove:function(O){var U,j=this,x=j.tv,z=x._tabPosition,_=j._73o;if(z===tn||z===sb){if(U=lc(O).x-j.x,!j._25o&&!j.moving&&m(U)>2&&(x._40o()&&!Ak(O)?j._25o=1:_&&x.isMovable()&&(j.moving=1)),j._25o)x.tx(j.tx+U);else if(j.moving){var i=j.lp.x+U,e=x._tabGap/2;x._7o.each(function($){var Z=$.endX,M=i-$.startX<Z-i;i>=$.startX&&Z>=i&&x._7Q({tab:_.tab,startX:_.startX+U,width:_.width,front:M,insertTab:$.tab,position:M?V(0,$.startX-e):a(x._64I,Z+e)})})}}else if(U=lc(O).y-j.y,!j._25o&&!j.moving&&m(U)>2&&(x._41o()&&!Ak(O)?j._25o=1:_&&x.isMovable()&&(j.moving=1)),j._25o)x.ty(j.ty+U);else if(j.moving){var E=j.lp.y+U,e=x._tabGap/2;x._7o.each(function(b){var R=b.endY,f=E-b.startY<R-E;E>=b.startY&&R>=E&&x._7Q({tab:_.tab,startY:_.startY+U,height:_.height,front:f,insertTab:b.tab,position:f?V(0,b.startY-e):a(x._23Q,R+e)})})}},handleWindowMouseUp:function(U){this.handleWindowTouchEnd(U)},handleWindowTouchEnd:function(){var F=this,W=F.tv,M=W._tabPosition,z=W.getTabModel(),d=z._roots,N=F._73o;if(F.moving){var q=W._23o;if(q&&q.insertTab!==q.tab){var H=q.tab,O=d.remove(H),t=d.indexOf(q.insertTab);t>=0&&(q.front||t++,t<=d.size()&&(d.add(H,t),z._38I(H,O,t)))}W._7Q($),delete F.moving}else if(!F._25o&&N){H=N.tab;var r=F._74o;if(!r||r.tab===H)if(!H.isDisabled()&&rl(N._75o,F.lp)){var e=d.indexOf(H);z.remove(H),W.onTabClosed(H,e)}else H.isDisabled()||W._8o===H||z.sm().ss(H)}F._25o=F._73o=F._74o=M===tn||M===sb?F.x=F.lp=F.tx=$:F.y=F.lp=F.ty=$}}),fs.PropertyView=function(q){var Q=this;Q._view=eo(1),Q._canvas=El(Q._view),Si(Q._view,Q._79O=eo()),Q._rows=new fr,Q._28o=new fr,Q._26o={},Q._26Q={};var H=Q._propertyModel=new hj,c=Q.ivm;H.mm(c,Q),H.md(c,Q),H.mh(c,Q),Q.dm(q?q:new hj),new Dm(Q)},pe("PropertyView",x,{ms_ac:[vh,Wd,dl,Go,ub,"categorizable",rf,zf,eb,Vj,wb,jk,vr,is,"selectRowIndex",Rq,"background",hl,Im,Fj,Bl,Fo],ms_v:1,ms_dm:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,_45o:1,_47o:1,ms_tip:1,_29I:Ch,_59I:0,_9I:0,_selectRowIndex:-1,_editable:!0,_batchEditable:!0,_categorizable:!0,_indent:sr,_background:O.propertyViewBackground,_expandIcon:O.propertyViewExpandIcon,_collapseIcon:O.propertyViewCollapseIcon,_scrollBarColor:fj,_scrollBarSize:Wp,_autoHideScrollBar:jq,_selectBackground:O.propertyViewSelectBackground,_rowHeight:So,_rowLineVisible:O.propertyViewRowLineVisible,_rowLineColor:O.propertyViewRowLineColor,_10I:.5,_columnLineVisible:O.propertyViewColumnLineVisible,_columnLineColor:O.propertyViewColumnLineColor,_labelColor:O.propertyViewLabelColor,_labelSelectColor:O.propertyViewLabelSelectColor,_labelFont:O.propertyViewLabelFont,getRows:function(){return this._rows},getColumnPosition:function(){return this._10I},setColumnPosition:function(j){0>j&&(j=0),j>1&&(j=1);var $=this,B=$._10I;$._10I=j,$.fp("columnPosition",B,j)},getPropertyName:function(P){return P.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(P,K,M){return M===this._selectRowIndex?this._labelSelectColor:this._labelColor},getPropertyFont:function(){return this._labelFont},getPropertyColor:function(o,v){return v===this._selectRowIndex?this._labelSelectColor:o.getColor()||this._labelColor},getCategoryFont:function(){return this._labelFont},getCategoryColor:function(){return this._labelColor},adjustTranslateX:function(){return 0},adjustTranslateY:function(t){var X=this.getHeight()-this._59I;return X>t&&(t=X),t>0?0:B(t)},isExpanded:function(P){if(!P)return!0;var B=this._26o[P];return B?B.isExpanded:!(this._26Q[P]===!1)},toggle:function(l){var T=this;T.isExpanded(l)?T.collapse(l):T.expand(l)},expandAll:function(){this.validate();for(var l in this._26o)this.expand(l)},expand:function(B){if(B&&B!==Oc){var F=this,p=F._26o[B];p&&!p.isExpanded&&(p.isExpanded=!0,F.onExpanded(B),F.ivm())}},onExpanded:function(){},collapseAll:function(){this.validate();for(var d in this._26o)this.collapse(d)},collapse:function(T){if(T&&T!==Oc){var K=this,d=K._26o[T];d&&d.isExpanded&&(d.isExpanded=!1,K.onCollapsed(T),K.ivm())}},onCollapsed:function(){},getCategoryName:function(_){if(!this.isCategorizable())return Oc;var I=_.getCategoryName();return I?I:Oc},getPropertyModel:function(){return this._propertyModel},setDataModel:function(B){var y=this,v=y._dataModel;v!==B&&(v&&(v.umd(y.handlePropertyChange,y),y._3o||v.sm().ums(y.ivm,y)),y._dataModel=B,B.md(y.handlePropertyChange,y),y._3o?y._3o._21I(B):B.sm().ms(y.ivm,y),y.fp(ro,v,B))},isVisible:function(p){return this._visibleFunc?this._visibleFunc(p):!0},onPropertyChanged:function(L){var q=this,X=L.property;Uk[X]?q.ivm():q.iv(),X===Dj&&q._43o()},getCurrentData:function(){return this._27o},updateCurrentData:function(){this._27o=this.sm().ld()},getRawProperties:function(){return this._27o?this._propertyModel._roots:ps},handlePropertyChange:function(y){this._27o===y.data&&this.iv()},ivm:function(){this.invalidateModel()},invalidateModel:function(){var J=this;J._96I||(J.setSelectRowIndex(-1),J._96I=1,J.iv())},redraw:function(){this.iv()},validateModel:function(){var d=this,a=d._rows,L=d._28o,W={},y=new fr,C=d._27o;d.updateCurrentData(),C!==d._27o&&d.endEditing(),a.clear(),L.clear(),d.getRawProperties().each(function(g){if(d.isVisible(g)){y.add(g);var V=d.getCategoryName(g);W[V]||(L.add(V,V===Oc?0:K),W[V]={isExpanded:d.isExpanded(V),properties:new fr})}}),d._sortFunc&&y.sort(d._sortFunc);for(var R in d._26o)d._26Q[R]=d.isExpanded(R);d._26o=W,L.each(function(g){g!==Oc&&a.add(g);var w=W[g];w.isExpanded&&y.each(function(b){d.getCategoryName(b)===g&&(w.properties.add(b),a.add({property:b,data:d._27o}))},d)})},validateImpl:function(){var V=this;V._76o(),V._96I&&(V.validateModel(),delete V._96I);var M=V._canvas,c=V.getWidth(),O=V.getHeight(),m=-V.ty(),X=V._rowHeight,u=V._indent,e=c-u,I=V._rows,o=I.size(),Z=V._9I=u+e*V._10I,P=V._59I=o*X;Kp(M,c,O),V._29I={x:0,y:m,width:c,height:O},V._31I=r(m/X),V._14I=j((m+O)/X),V._31I<0&&(V._31I=0),V._14I>o&&(V._14I=o);var v,Y=dk(M),J=V._background;vo(Y,0,-m,1),Y.beginPath(),Y.rect(0,m,c,O),Y.clip(),Y.clearRect(0,m,c,O),V._93db(Y),J&&Sm(Y,0,0,u,P,J);for(var T=V._31I;T<V._14I;T++){var k=I.get(T),m=X*T;if(yf(k))J&&Sm(Y,u,m,e,X,J),v=Tn(V.isExpanded(k)?V._expandIcon:V._collapseIcon),v&&ai(Y,v,dn,0,m,u,X),Y.save(),Y.beginPath(),Y.rect(u,m,e,X),Y.clip(),V.drawCategoryName(Y,k,T,u,m,e,X),Y.restore();else{var N=k.property,b=k.data,v=Tn(N.getIcon()),s=V._selectRowIndex===T?V.getSelectBackground():$;if(v&&ai(Y,v,dn,0,m,u,X),s&&Sm(Y,u,m,e,X,s),Y.save(),Y.beginPath(),Y.rect(u,m,Z-u,X),Y.clip(),V.drawPropertyName(Y,N,T,u,m,Z-u,X),Y.restore(),!V.isEditing(b,N)){var B=Z+1,D=c-Z-1;Y.save(),Y.beginPath(),Y.rect(B,m,D,X),Y.clip(),V._87o(V.drawPropertyValue(Y,N,V.getValue(b,N),T,B,m,D,X,b),T,B,m,D,X),Y.restore()}}V._rowLineVisible&&Sm(Y,u,m+X-1,e,1,V._rowLineColor)}V._columnLineVisible&&(Sm(Y,Z,0,1,P,V._columnLineColor),Sm(Y,c-1,0,1,P)),V._92db(Y),V._93I(),Y.restore(),V.ty(V.ty())},drawCategoryName:function(O,r,x,o,D,i,z){Fl(O,r,this.getCategoryFont(r),this.getCategoryColor(r),o,D,i,z)},drawPropertyName:function(m,i,j,K,x,M,Q){return i.drawPropertyName?(i.drawPropertyName(m,i,j,K,x,M,Q,this),void 0):(Fl(m,this.getPropertyName(i),this.getPropertyFont(i,j),this.getPropertyColor(i,j),K,x,M,Q),void 0)},drawPropertyValue:function(R,q,m,X,g,r,W,y,a){return q.drawPropertyValue?q.drawPropertyValue(R,q,m,X,g,r,W,y,a,this):(Dd(R,m,q,this.getLabelFont(q,m,X),this.getLabelColor(q,m,X),g,r,W,y,a,this),void 0)},isPropertyEditable:function(p){return p.isEditable()&&this.isEditable()},setProperties:function(_){this._propertyModel.clear(),this.addProperties(_)},addProperties:function(y){if(y){var F=this._propertyModel;y.forEach(function(z){if(!(z instanceof Sl)){var o=dh(z.className);z=fi(o?o:Sl,z)}F.add(z)})}},getRowIndexAt:function(S){var u=this,y=r(u.lp(S).y/u._rowHeight);return y>=0&&y<u._rows.size()?y:-1},getPropertyAt:function(A){var d=this,Q=d.getRowIndexAt(A);return Q>=0?d._rows.get(Q).property:$},getToolTip:function(z){var Q=this,P=Q.getPropertyAt(z),M=Q._27o;return P&&M?P.getToolTip(M,Q._9I<Q.lp(z).x,Q):$}});var Dm=function(x){this.pv=x,this.addListeners()};de(Dm,x,{ms_listener:1,getView:function(){return this.pv._view},setCursor:function($){this.getView().style.cursor=$},clear:function(){var f=this;f._62O=f.cp=f.ty=f.p=$,f.setCursor(I)},handle_mousedown:function(w){this.handle_touchstart(w)},handle_touchstart:function(V){var O=this,n=O.pv;In(V),n.setFocus(V)&&(Ni(V)?(O.cp=lc(V),O.ty=n.ty(),O.p=n.getColumnPosition(),O.handle_touchmove(V)):n.setSelectRowIndex(n.getRowIndexAt(V)))},handleWindowMouseUp:function(){this.clear()},handleWindowTouchEnd:function(){this.clear()},handle_mouseup:function(T){this.handle_touchend(T)},handle_touchend:function(G){var t=this;if(t.cp&&!t._62O){var B=t.pv,U=B.lp(G),a=U.x,C=U.y,A=B._indent,s=B.getRowIndexAt(G),O=B._9I;if(s>=0){var c=B._rowHeight,P=c*s,p=B._rows.get(s),l=p.property;if(yf(p))Tn(B.isExpanded(p)?B._expandIcon:B._collapseIcon)&&a>=0&&A>=a&&C>=P&&P+c>=C?B.toggle(p):ik(G)&&B.toggle(p);else if(a>O&&B.isPropertyEditable(l)){var x={x:O+1,y:P,width:B.getWidth()-O-1,height:c},h={x:x.x+B.tx(),y:x.y+B.ty(),width:x.width,height:x.height},o=0,n=B._29I;x.y<n.y?o=x.y-n.y:x.y+c>n.y+n.height&&(o=x.y+c-n.y-n.height),o&&(B.ty(B.ty()-o),h.y-=o),B.beginEditing({data:p.data,property:l,value:B.getValue(p.data,l),event:G,rect:x,editorRect:h,view:B})}}B.setSelectRowIndex(s)}t.clear()},handleWindowMouseMove:function(x){this.handleWindowTouchMove(x)},handleWindowTouchMove:function(Y){var B=this,r=B.pv,G=B.ty,k=B.cp,E=lc(Y),U=B._62O;if("p"===U)r.setTranslateY(G+E.y-k.y);else if("c"===U){var f=r.getWidth()-r._indent;if(f>16){var v=B.p-(k.x-E.x)/f,V=16/f;V>v&&(v=V),v>1-V&&(v=1-V),r.setColumnPosition(v)}}else"s"===U&&r.setTranslateY(G+(k.y-E.y)*r._59I/r._29I.height)},handle_mousemove:function(H){this.handle_touchmove(H)},handle_touchmove:function(L){if(!Xp&&Ni(L)){var j=this,o=j.pv,w=m(o.lp(L).x-o._9I)<=(_?8:3);j.cp?j._62O||(w?(j._62O="c",vq(j)):m(lc(L).y-j.cp.y)>=2&&(j._62O=j.isV(L)?"s":"p",vq(j))):(w?j.setCursor(Kn):j.setCursor(I),j.isV(L)&&o._43o())}},isV:function(N){var e=this.pv,X=e._29I;return e._41o()&&X.x+X.width-e.lp(N).x<gq},handle_mousewheel:function(D){this.handleScroll(D,D.wheelDelta/40)},handle_DOMMouseScroll:function(t){2===t.axis&&this.handleScroll(t,-t.detail)},handleScroll:function(W,V){var j=this.pv;In(W),j.endEditing(),j.translate(0,V*j.getRowHeight())},handle_keydown:function(z){var e=this.pv,o=e._rows.size(),Y=e._selectRowIndex+(Hj(z)?-1:1);(Hj(z)||Ag(z))&&(0>Y&&(Y=0),Y>=o&&(Y=o-1),e.setSelectRowIndex(Y))}}),fs.ListView=function(d){this._5o(d),new Zb(this)},pe("ListView",x,{ms_ac:[vh,Wd,dl,hl,rf,Im,Fj,zf,eb,jk,vr,is,Pn,Rq],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,_14Q:1,ms_dm:1,_45o:1,_checkMode:!1,_indent:sr,_rowHeight:So,_rowLineVisible:O.listViewRowLineVisible,_rowLineColor:O.listViewRowLineColor,_scrollBarColor:fj,_scrollBarSize:Wp,_autoMakeVisible:dj,_autoHideScrollBar:jq,_selectBackground:O.listViewSelectBackground,_labelColor:O.listViewLabelColor,_labelSelectColor:O.listViewLabelSelectColor,_labelFont:O.listViewLabelFont,isCheckMode:function(){return this._checkMode},setCheckMode:function(z){var t=this,T=t._checkMode;t._checkMode=z,t.fp(ep,T,z)},drawRow:function(K,Q,V,v,N,O,J){var r=this,C=0,I=r._indent,u=r.getIconWidth(Q);r.drawRowBackground(K,Q,V,v,N,O,J),r._checkMode&&(Mp(K,r.getCheckIcon(Q),C+I/2,N+J/2,Q,r),C+=I),r.drawIcon(K,Q,C,N,u,J),r.drawLabel(K,Q,C+u,N,J)}});var Zb=function(b){this.list=b,this.addListeners()};de(Zb,x,{ms_listener:1,getView:function(){return this.list._view},clear:function(B){var G=this;B&&"d"===G._62O&&G.list.handleDragAndDrop(B,"end"),G._62O=G.cp=G.tx=G.ty=$},handle_mousedown:function(n){this.handle_touchstart(n)},handle_touchstart:function(L){var g=this,W=g.list;if(In(L),W.setFocus(L))if(g.cp=lc(L),g.tx=W.tx(),g.ty=W.ty(),Ni(L))g.isV(L)||g.isH(L)||!W.handleDragAndDrop||W.handleDragAndDrop(L,"prepare");else{var u=W.getDataAt(L);u&&g._33o(L,u),g.clear(L)}},handleWindowMouseUp:function(q){this.clear(q)},handleWindowTouchEnd:function(a){this.clear(a)},handle_mouseup:function(M){this.handle_touchend(M)},handle_touchend:function(N){var w=this,J=w.list;if(w.cp&&!w._62O){var c=J.getDataAt(N);c&&(J.isCheckMode()?w._34o(N,c):w._33o(N,c),ik(N)?J.onDataDoubleClicked(c,N):J.onDataClicked(c,N))}w.clear(N)},handleWindowMouseMove:function(P){this.handleWindowTouchMove(P)},handleWindowTouchMove:function(t){var f=this,O=f.list,r=f._62O,z=f.tx,b=f.ty,n=f.cp,y=lc(t),E=O._29I;"p"===r?O.setTranslate(z+y.x-n.x,b+y.y-n.y):"v"===r?O.ty(b+(n.y-y.y)*O._59I/E.height):"h"===r?O.tx(z+(n.x-y.x)*O._91I/E.width):"d"===r&&O.handleDragAndDrop(t,"between")},handle_mousemove:function(d){this.handle_touchmove(d)},handle_touchmove:function(e){if(!Xp&&Ni(e)){var X=this,G=X.list,V=X.isV(e),E=X.isH(e);if(X.cp){if(!X._62O){if(Ym(lc(e),X.cp)<2)return;V?X._62O="v":E?X._62O="h":G.handleDragAndDrop?(X._62O="d",G.handleDragAndDrop(e,"begin")):X._62O="p",vq(X)}}else V&&G._43o(),E&&G._42o()}},isV:function(H){var f=this.list,l=f._29I;return f._41o()&&l.x+l.width-f.lp(H).x<gq},isH:function(W){var R=this.list,q=R._29I;return R._40o()&&q.y+q.height-R.lp(W).y<gq},handle_mousewheel:function(Y){this.handleScroll(Y,Y.wheelDelta/40,Y.wheelDelta!==Y.wheelDeltaX)},handle_DOMMouseScroll:function(I){this.handleScroll(I,-I.detail,1)},handleScroll:function(o,P,q){var T=this.list;In(o),T.endEditing&&T.endEditing(),q&&T._41o()?T.translate(0,P*T.getRowHeight()):T._40o()&&T.translate(10*P,0)},handle_keydown:function(t){var c,$=this.list,k=$.sm(),Q=$._rows,s=Q.size();if(Uf(t))$.selectAll();else if(Te(t))$.handleDelete&&$.handleDelete(t);else if(mr(t))$.isCheckMode()&&(c=$.getFocusData(),c&&$.checkData(c));else if(Hj(t)||Ag(t)){var X=$.isCheckMode();if(c=X?$.getFocusData():k.ld()){var U=$.getRowIndex(c);U>=0&&(Hj(t)?0!==U&&(c=Q.get(U-1),X?$.setFocusData(c):k.ss(c)):U!==s-1&&(c=Q.get(U+1),X?$.setFocusData(c):k.ss(c)))}else s>0&&(c=Q.get(0),X?$.setFocusData(c):k.ss(c))}},_34o:function(o,r){var X=this.list,x=X.lp(o).x;return x>=0&&x<=X._indent?(X.checkData(r),void 0):(X.setFocusData(r),void 0)},_33o:function(u,x){var V=this.list,R=V.sm(),y=R.ld();if(Ak(u))V.isSelected(x)?R.rs(x):R.as(x);else if(Sj(u))if(y)for(var X=V.getRowIndex(y),w=V.getRowIndex(x);X!==w;)X+=w>X?1:-1,R.as(V._rows.get(X));else R.ss(x);else(Ni(u)||!R.contains(x))&&R.ss(x)}}),fs.TreeView=function(w){var b=this;b._35o(),b._5o(w),new mq(b)},pe("TreeView",x,{ms_ac:[vh,Wd,dl,"rootVisible",ep,"rootData",zf,eb,jk,vr,is,rf,hl,Im,Fj,Vj,wb,Pn,Rq,"loader"],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,_48o:1,_14Q:1,_45o:1,_checkMode:$,_indent:sr,_rowHeight:So,_rowLineVisible:O.treeViewRowLineVisible,_rowLineColor:O.treeViewRowLineColor,_scrollBarColor:fj,_scrollBarSize:Wp,_autoHideScrollBar:jq,_expandIcon:O.treeViewExpandIcon,_collapseIcon:O.treeViewCollapseIcon,_autoMakeVisible:dj,_selectBackground:O.treeViewSelectBackground,_labelColor:O.treeViewLabelColor,_labelSelectColor:O.treeViewLabelSelectColor,_labelFont:O.treeViewLabelFont,drawRow:function(z,o,p,I,n,N,O){var u=this;u.drawRowBackground(z,o,p,I,n,N,O),u._97I(z,o,p,0,n,N,O)}});var mq=function(m){Cb(mq,this,[m])};de(mq,Zb,{toggle:function(h,l,L,R){var i=this.list,g=i.lp(h).x;if(Tn(i.getToggleIcon(l))){var O=L*R;if(g>=O&&O+L>=g)return i.toggle(l),!0}return ik(h)?(i.toggle(l),!0):!1},_34o:function(G,Q){var M=this.list,D=M.lp(G).x,v=M._levelMap[Q._id],N=M._indent,k=N*(v+1);return D>=k&&k+N>=D?(M.checkData(Q),void 0):(this.toggle(G,Q,N,v)||M.setFocusData(Q),void 0)},_33o:function(t,o){var l=this,N=l.list;l.toggle(t,o,N._indent,N.getLevel(o))||mq.superClass._33o.call(l,t,o)},handle_keydown:function(K){if(Rr(K)||un(K)){var R=this.list,X=R._rows,Y=R.isCheckMode(),A=R.sm(),U=Y?R.getFocusData():A.ld();U?U.hasChildren()&&(Rr(K)?R.collapse(U):R.expand(U)):X.size()>0&&(U=X.get(0),Y?R.setFocusData(U):A.ss(U))}else mq.superClass.handle_keydown.call(this,K)}});var Eq=fs.TableView=function(t){this._98I(),this._5o(t),new cq(this)};pe("TableView",x,{ms_ac:[vh,Wd,dl,"sortMode",Go,ub,hl,Im,Fj,Bl,Fo,"sortColumn",zf,eb,jk,vr,is,Pn,Rq],ms_v:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_45o:1,_47o:1,_sortMode:Bm,_editable:!0,_batchEditable:!1,_rowHeight:So,_rowLineVisible:O.tableViewRowLineVisible,_rowLineColor:O.tableViewRowLineColor,_columnLineVisible:O.tableViewColumnLineVisible,_columnLineColor:O.tableViewColumnLineColor,_scrollBarColor:fj,_scrollBarSize:Wp,_autoHideScrollBar:jq,_autoMakeVisible:dj,_selectBackground:O.tableViewSelectBackground,_labelColor:O.tableViewLabelColor,_labelSelectColor:O.tableViewLabelSelectColor,_labelFont:O.tableViewLabelFont,getCheckColumn:function(){var j=this;if(!j._31o){var J=j._31o=new to;J.setEditable(!0),J.setWidth(40),J.getValue=j.getCheckColumValue,J.drawCell=j.drawCheckColumnCell}return j._31o},isCheckMode:function(){return this._39o.contains(this._31o)},setCheckMode:function(X){var w=this,D=w._39o,f=w.getCheckColumn();X!==w.isCheckMode()&&(X?D.add(f,0):D.remove(f),w.fp(ep,!X,X))},getCheckColumValue:function(z,r,N){return N.isSelected(z)},drawCheckColumnCell:function(o,W,s,$,V,h,X,M,r){Mp(o,r.getCheckIcon(W),V+X/2,h+M/2,W,r)}});var cq=function(n){Cb(cq,this,[n])};de(cq,Zb,{_34o:function(H,k){var $=this.list,i=$._31o;if($.isCellEditable(k,i)){var C=$._3Q(i),t=$.lp(H).x;if(C&&t>=C.startX&&t<C.startX+i.getWidth())return $.checkData(k),void 0}$.setFocusData(k),$._37O(k,H)},_33o:function(L,P){cq.superClass._33o.apply(this,arguments),this.list._37O(P,L)}});var zs=fs.TreeTableView=function(H){var _=this,c=_._4o=new to;_._35o(),_._98I(),_._5o(H),c.setDisplayName("Name"),c.setEditable(!0),c.setWidth(180),c.drawCell=Bc,c.getValue=dp,_._39o.add(c),new Kh(_)},Bc=function(z,I,L,g,B,j,w,e,q){q._97I(z,I,L,B,j,w,e)},dp=function(A,s,K){return K.getLabel(A)};pe("TreeTableView",x,{ms_ac:[vh,Wd,dl,"sortMode",Go,ub,rf,ep,"rootData","rootVisible",zf,eb,"sortColumn",Vj,wb,jk,vr,is,Pn,Fj,hl,Im,Bl,Fo,Rq,"loader"],ms_v:1,ms_bnb:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_48o:1,_14Q:1,_45o:1,_47o:1,_sortMode:Bm,_checkMode:$,_editable:!0,_batchEditable:!1,_indent:sr,_rowHeight:So,_rowLineVisible:O.treeTableViewRowLineVisible,_rowLineColor:O.treeTableViewRowLineColor,_columnLineVisible:O.treeTableViewColumnLineVisible,_columnLineColor:O.treeTableViewColumnLineColor,_expandIcon:O.treeTableViewExpandIcon,_collapseIcon:O.treeTableViewCollapseIcon,_scrollBarColor:fj,_scrollBarSize:Wp,_autoHideScrollBar:jq,_autoMakeVisible:dj,_selectBackground:O.treeTableViewSelectBackground,_labelColor:O.treeTableViewLabelColor,_labelSelectColor:O.treeTableViewLabelSelectColor,_labelFont:O.treeTableViewLabelFont,getTreeColumn:function(){return this._4o}});var Kh=function(y){Cb(Kh,this,[y])};de(Kh,Zb,{_34o:function(n,P){var o=this.list,M=o._4o,e=o._3Q(M),k=o.lp(n).x;if(e){var x=o._indent,Q=e.startX+x*o.getLevel(P);if(Tn(o.getToggleIcon(P))&&k>=Q&&Q+x>=k)return o.toggle(P),void 0;if(o.isCellEditable(P,M)&&(Q+=x,k>=Q&&Q+x>=k))return o.checkData(P),void 0}o.setFocusData(P),o._37O(P,n)},_33o:function(B,g){var h=this.list,_=h.lp(B).x;if(Tn(h.getToggleIcon(g))){var c=h._3Q(h._4o);if(c){var N=h._indent,z=c.startX+N*h.getLevel(g);if(_>=z&&z+N>=_)return h.toggle(g),void 0}}Kh.superClass._33o.apply(this,arguments),h._37O(g,B)}});var xh=fs.TableHeader=function(z){var o=this,P=o._view=eo(1),N=o._39o=z.getColumnModel(),u=o.iv;o.tv=o._tableView=z,o._60I=new fr,o._canvas=El(P),P.style.background=O.tableHeaderBackground||"",P.style.height=ho+$p,N.mm(u,o),N.md(u,o),N.mh(u,o),z.mp(function(x){zc[x.property]&&o.iv()},o),new Ek(o),o.iv()};pe("TableHeader",x,{ms_v:1,ms_lp:1,ms_fire:1,ms_ac:["checkIcon","sortDescIcon","sortAscIcon",vh,dl,rf,"moveBackground","insertColor",Bl,Fo,"resizable","movable"],_checkIcon:Kf,_movable:!0,_resizable:!0,_labelColor:O.tableHeaderLabelColor,_labelFont:O.tableHeaderLabelFont,_columnLineColor:O.tableHeaderColumnLineColor,_columnLineVisible:O.tableHeaderColumnLineVisible,_sortDescIcon:O.tableHeaderSortDescIcon,_sortAscIcon:O.tableHeaderSortAscIcon,_moveBackground:O.tableHeaderMoveBackground,_insertColor:O.tableHeaderInsertColor,_indent:sr,getCheckIcon:function(){return this._checkIcon},getTableView:function(){return this.tv},getLabel:function(Q){return Q.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(C){return C.getColor()||this._labelColor},getLabelAlign:function(C){return C._align},onPropertyChanged:function(){this.iv()},_5Q:function(j){this._61I=j,this.iv()},getLogicalPoint:function(v){return tl(v,this._canvas,this.tv.tx())},validateImpl:function(){var b=this,E=b._canvas,Q=b.getWidth(),P=b.getHeight(),p=b.tv,w=b._60I,Y=b._61I,j=-p.tx(),I=0;(Q!==E.clientWidth||P!==E.clientHeight)&&Kp(E,Q,P),w.clear(),b._39o._roots.each(function(l){if(l.isVisible()){var A=I+l.getWidth();j+Q>=I&&A>=j&&w.add({column:l,startX:I}),I=A}});var i=dk(E);if(vo(i,-j,0,1),i.beginPath(),i.rect(j,0,Q,P),i.clip(),i.clearRect(j,0,Q,P),w.each(function(G){var p=G.column,e=G.startX,r=p.getWidth();r>0&&(i.save(),i.beginPath(),i.rect(e,0,r,P),i.clip(),Y&&Y.column===p||b.drawColumn(i,p,e,0,r,P),b._columnLineVisible&&Sm(i,e+r-1,0,1,P,b._columnLineColor),i.restore())}),Y){var K=Y.column,I=Y.startX,f=Y.position,J=K.getWidth();i.save(),i.beginPath(),i.rect(I,0,J,P),i.clip(),i.fillStyle=b._moveBackground,i.fill(),b.drawColumn(i,K,I,0,J,P),i.restore(),Lp(i,b._insertColor,f,0,P)}i.restore()},_6Q:function(s){var v=this.tv;return v._31o===s&&v.sm().getSelectionMode()===p},drawColumn:function(B,T,V,m,R,b){var S=this,D=S.tv,N=Tn(T.getIcon()),M=S.getLabelAlign(T);if(S._6Q(T)){var o=Tn(S._checkIcon);Mp(B,o,V+R/2,m+b/2,T,S)}else{var P=S.getLabel(T),s=S.getLabelFont(T),O=S.getLabelColor(T),h=Ul(s,P).width,X=N?S._indent:0;M===Zd?(N&&ai(B,N,dn,V,m,X,b),Fl(B,P,s,O,V+X,m,R,b,Zd)):M===Aj?(N&&ai(B,N,dn,V+R-h-X,m,X,b),Fl(B,P,s,O,V,m,R,b,Aj)):(N&&ai(B,N,dn,V+(R-h-X)/2,m,X,b),Fl(B,P,s,O,V+(R-h+X)/2,m,0,b,Zd))}if(T.isSortable()&&D.getSortColumn()===T&&(N=Tn(T.getSortOrder()===di?S._sortAscIcon:S._sortDescIcon))){var E=ud(N,T)/2+2;Mp(B,N,M===Aj?V+E:V+R-E,m+b/2,T,D)}}});var Ek=function(i){var s=this;s.th=i,s.tv=i._tableView,s.addListeners()};de(Ek,x,{ms_listener:1,getView:function(){return this.th.getView()},setCursor:function(V){this.getView().style.cursor=V},handle_mousemove:function(M){if(!Xp){var J=this;delete J._29o,J.setCursor(I);for(var D=J.th,X=D._60I,o=D.lp(M).x,h=X.size()-1;h>=0;h--){var q=X.get(h),c=q.column,$=q.startX+c.getWidth();if(D.isResizable()&&m($-o)<=(_?10:3))return J._29o=q,J.setCursor(Kn),void 0;(c.isSortable()||D.isMovable()||c===J.tv.getCheckColumn())&&o>=q.startX&&$>=o&&c.getWidth()>0&&(J._29o=q,J.setCursor(Ar))}}},handle_mousedown:function(Z){this.handle_touchstart(Z)},handle_touchstart:function(n){var W=this;In(n),W.tv.endEditing(),W.handle_mousemove(n),W._29o&&(W.x=lc(n).x,W.lx=W.th.lp(n).x,W.w=W._29o.column.getWidth(),vq(W,n))},handleWindowMouseMove:function(f){this.handleWindowTouchMove(f)},handleWindowTouchMove:function(X){var N=this,I=N.th,J=N.getView().style.cursor,f=N._29o,r=lc(X).x-N.x;if(N.resizing||N.moving||(J===Kn?N.resizing=1:I.isMovable()&&J===Ar&&m(r)>2&&(N.moving=1)),N.resizing)f.column.setWidth(N.w+r);else if(N.moving){var A=N.lx+r;I._60I.each(function(s){var g=s.startX,o=g+s.column.getWidth();if(A>=g&&o>=A){var z={column:f.column,startX:f.startX+r,front:o-A>A-g,insertColumn:s.column};z.position=z.front?g:o,I._5Q(z)}})}},_16Q:function(H,d){var z=this,v=z.tv,i=z.th,T=i._checkIcon;if(i._6Q(H)){var x=Tn(T),D=z.lx,k=H.getWidth(),u=ud(x,H);if(D>=d+k/2-u&&d+k/2+u>=D){i.setCheckIcon(T===Bn?Kf:Bn);var s=v.sm(),h=v._rows;return T===Bn?s.rs(h):s.ss(h),v.onCheckColumnClicked(H),!0}}return!1},handleWindowMouseUp:function(l){this.handleWindowTouchEnd(l)},handleWindowTouchEnd:function(q){var Z=this,G=Z.tv,T=Z.th,N=Z._29o;if(Z.moving){var w=T._61I;if(w&&w.insertColumn!==w.column){var b=w.column,m=G.getColumnModel()._roots,i=m.remove(b),z=m.indexOf(w.insertColumn);z>=0&&(w.front||z++,z<=m.size()&&(m.add(b,z),G.getColumnModel()._38I(b,i,z)))}T._5Q($),delete Z.moving}else if(!Z.resizing&&N){b=N.column;var Q=T.lp(q).x,Y=N.startX,o=!0;if(T.onColumnClicked){var L=T.onColumnClicked(b,q);L===!1&&(o=!1)}if(o&&Q>=Y&&Q<=Y+b.getWidth()&&!Z._16Q(b,Y)){if(b.isSortable()){var n=G.getSortMode(),P=b.getSortOrder();n===Bm?G.getSortColumn()===b?(P===Tp&&G.setSortColumn($),b.setSortOrder(P===di?Tp:di)):G.setSortColumn(b):"bistate"===n&&(G.getSortColumn()===b?b.setSortOrder(P===di?Tp:di):G.setSortColumn(b))}G.onColumnClicked(b,q)}}Z._29o=Z.resizing=Z.x=Z.lx=Z.w=$}}),fs.TablePane=function(F){this.init(new Eq(F))},pe("TablePane",x,{ms_v:1,_44o:1}),fs.TreeTablePane=function(N){this.init(new zs(N))},pe("TreeTablePane",x,{ms_v:1,_44o:1}),fs.Toolbar=function(r){var L=this,p=L._view=eo(1),V=p.style;V.background=O.toolbarBackground||"",V.height=kc+$p,L._canvas=El(p),L._30o=new fr,L._90I=new fr,L.setItems(r||[]),p.handleGroupSelectedChanged=function($){if($.isSelected()){var S=$.getGroupId();null!=S&&L._items.forEach(function(d){var i=d.element;i&&i!==$&&i.setSelected&&i.getGroupId&&i.getGroupId()===S&&i.setSelected(!1)})}},new Bp(L)},pe("Toolbar",x,{ms_v:1,ms_fire:1,ms_tx:1,ms_lp:1,ms_tip:1,ms_value:1,ms_ac:[dm,vh,dl,Wd,Rq,"itemGap","separatorColor","currentItem","stickToRight"],_labelColor:O.toolbarLabelColor,_labelSelectColor:O.toolbarLabelSelectColor,_labelFont:O.toolbarLabelFont,_selectBackground:O.toolbarSelectBackground,_itemGap:O.toolbarItemGap,_separatorColor:O.toolbarSeparatorColor,_stickToRight:!1,getSumWidth:function(){return this._64I},getToolTip:function(t){var H=this.getItemInfoAt(t);return H?H.item.toolTip:$},getLabelColor:function(Z){return Z.selected&&Z.type!==Bn&&Z.type!==oe?this._labelSelectColor:this._labelColor},onPropertyChanged:function(i){this.iv(),i.property===dm&&this._items.forEach(function(i){Eh(i)})},redraw:function(){this.iv()},addItem:function(E,o){var T=this._items;o==$?T.push(E):T.splice(o,0,E),this.fp(dm,$,T)},removeItem:function(s){if(s)for(var O=this._items,x=0;x<O.length;x++)s===O[x]&&(O.splice(x,1),this.fp(dm,$,O))},removeItemById:function(x){if(x!=$)for(var p=this._items,G=0;G<p.length;G++)x===p[G].id&&(p.splice(G,1),this.fp(dm,$,p))},getItemById:function(j){if(j!=$)for(var s=this._items,q=0;q<s.length;q++){var F=s[q];if(j===F.id)return F}},getItemInfos:function(){return this._30o},getItemInfoAt:function(X){var o=this,V=0,e=o._30o,q=o.lp(X),w=q.x,W=q.y;if(W>=0&&W<=o.getHeight())for(;V<e.size();V++){var v=e.get(V);if(v.startX<=w&&w<=v.endX)return v}return $},drawItem:function(D,t,Y,X,n){if(t.visible===!1)return 0;var W=this,B=t.disabled;B&&(D.globalAlpha=ed);var z=W.drawItemImpl(D,t,Y,X,n),O=W._itemGap;return B&&(D.globalAlpha=1),this._currentItem!==t||"separator"===t||t.unfocusable||ng(D,W._separatorColor,Y-O/2,0,z+O,X),z},drawItemImpl:function(z,C,r,X,i){var j,$=this,M=$._view,A=$._itemGap,q=X/2,h=C.type,T=C.label,f=$.getLabelFont(C),W=$.getLabelColor(C),D=C.selected,S=Tn(C.icon),Q=ud(S,C),o=0,v=C.element,a=Q+(T?Ul(f,T).width:0);if("separator"===C)return Lp(z,$._separatorColor,r,X/4,q),1;if(v){S&&Mp(z,S,r+Q/2,q),Fl(z,T,f,W,r+Q,0,0,X);var R=sj(v);i||$._90I.add(R),R.parentNode!==M&&Si(M,R),v.iv&&v.iv(),v.validate&&v.validate();var H=R.getBoundingClientRect(),s=H.width,I=R.style;return Jf(R),I.left=$.tx()+r+a+$p,I.top=(X-H.height)/2+$p,a+s}return h===oe?j=Tn(D?On:Cj):h===Bn&&(j=Tn(D?Bn:Kf)),j?(o=ud(j,C),Mp(z,j,r+o/2,q),r+=o,a+=o):D&&Sm(z,r-A/2,0,a+A,X,$.getSelectBackground(C)),S&&Mp(z,S,r+Q/2,q),Fl(z,T,f,W,r+Q,0,0,X),a},validateImpl:function(){var B=this,j=B._canvas,v=B.getWidth(),k=B.getHeight(),b=B._30o,H=B._items;Kp(j,v,k);var n=dk(j),D=B._itemGap,y=D/2;vo(n,B.tx(),0,1),n.clearRect(0,0,v,k);var x=B._90I;B._90I=new fr,b.clear(),H.forEach(function(N){var h=B.drawItem(n,N,y,k);b.add({item:N,startX:y,endX:y+h,width:h}),h&&(y+=h+D)}),x.each(function(R){B._90I.contains(R)||bf(R)}),B._64I=V(0,y),n.restore(),B._stickToRight?(B._65O=0,n=dk(j),y=v-B._64I+D,vo(n,0,0,1),n.clearRect(0,0,v,k),b.clear(),H.forEach(function(w){var $=B.drawItem(n,w,y,k,!0);b.add({item:w,startX:y,endX:y+$,width:$}),$&&(y+=$+D)}),n.restore()):B.tx(B.tx())},handleClick:function(q){var E=this,x=q.type,z=q.action,d=q.groupId,u=q.selected;q.disabled||(d!=$?u||(q.selected=!0,this._items.forEach(function(n){n.groupId===d&&q!==n&&(n.selected=!1)}),z&&q.action(q,E)):x===Bn||"toggle"===x?(q.selected=!u,z&&q.action(q,E)):z&&q.action(q,E)),br(),E.iv()}});var Bp=function(m){this.tb=m,this.addListeners()};de(Bp,x,{ms_listener:1,getView:function(){return this.tb._view},handle_mousewheel:function(X){this.handleScroll(X,10*(X.wheelDelta/40))},handle_DOMMouseScroll:function(S){this.handleScroll(S,10*-S.detail)},handleScroll:function(p,_){In(p);var T=this.tb;T.isScrollable()&&!T._stickToRight&&(T.tx(T.tx()+_),zn())},handle_mousemove:function(x){var o=this;Xp?o.info2=o.tb.getItemInfoAt(x):o.setItem(x)},handle_mouseout:function(D){var k=this;D.target===k.getView()?k.tb.setCurrentItem($):k.handle_mousemove(D)},handle_mousedown:function(y){this.handle_mousemove(y),this.handle_touchstart(y)},handle_touchstart:function(S){var W=this,T=W.tb,_=S.target;(_===W.getView()||_===T._canvas)&&(In(S),T.setFocus(S)&&(this.setItem(S),(T.isScrollable()||W.info&&!W.info.item.disabled)&&(W.x=lc(S).x,W.tx=T.tx(),vq(W,S))))},handleWindowMouseMove:function(I){this.handleWindowTouchMove(I)},handleWindowTouchMove:function(X){var s=this,O=s.tb;if(!O._stickToRight){var Z=lc(X).x-s.x;!s._25o&&m(Z)>2&&O.isScrollable()&&(s._25o=1),s._25o&&O.tx(s.tx+Z)}},handleWindowMouseUp:function(y){this.handleWindowTouchEnd(y)},handleWindowTouchEnd:function(){var m=this,E=m.tb,X=m.info,J=m.info2;if(!m._25o&&X){var A=X.item;J&&J.item!==A||E.handleClick(A)}m._25o=m.x=m.tx=m.info2=$,m.setItem()},setItem:function(_){var b=this,S=b.tb,v=b.info=_?S.getItemInfoAt(_):$;S.setCurrentItem(v?v.item:$)}}),fs.BorderPane=function(){this._view=eo(1),this.iv()},pe("BorderPane",x,{ms_v:1,ms_ac:["topHeight","bottomHeight","leftWidth","rightWidth"],ms_fire:1,getLeftView:function(){return this._leftView},setLeftView:function(k,B){this._12o("leftView",k),B!=$&&this.setLeftWidth(B)},getRightView:function(){return this._rightView},setRightView:function(H,g){this._12o("rightView",H),g!=$&&this.setRightWidth(g)},getTopView:function(){return this._topView},setTopView:function(j,E){this._12o("topView",j),E!=$&&this.setTopHeight(E)},getBottomView:function(){return this._bottomView},setBottomView:function(J,A){this._12o("bottomView",J),A!=$&&this.setBottomHeight(A)},getCenterView:function(){return this._centerView},setCenterView:function(z){this._12o("centerView",z)},_12o:function(T,M){var e=this,H="_"+T,k=e._view,E=e[H];E!==M&&(E&&(E.getView?bf(E.getView()):bf(E)),e[H]=M,M&&(M.getView?Si(k,M.getView(),1):Si(k,M,1)),e.fp(T,E,M))},onPropertyChanged:function(){this.iv()},validateImpl:function(){var I=this,m=I._topView,j=I._bottomView,p=I._leftView,t=I._rightView,w=I._centerView,Z=I.getWidth(),K=I.getHeight(),B=0,_=0,M=Z,s=K,n=0,e=0,T=0,J=0;m&&(n=I._topHeight==$?Rm(m):I._topHeight,_=n),j&&(e=I._bottomHeight==$?Rm(j):I._bottomHeight,s=K-e),p&&(T=I._leftWidth==$?Tc(p):I._leftWidth,B=T),t&&(J=I._rightWidth==$?Tc(t):I._rightWidth,M=Z-J);
        var H=V(0,M-B),C=V(0,s-_);m&&Vq(m,0,0,Z,n),j&&Vq(j,0,s,Z,e),p&&Vq(p,0,_,T,C),t&&Vq(t,M,_,J,C),w&&Vq(w,B,_,H,C)}})}}(this,Object);